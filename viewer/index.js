function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=r.parcelRequire1f7b;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},r.parcelRequire1f7b=a),a.register("2e6QR",(function(e,t){var r=a("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=a("fwxWp");function o(e,t){return void 0===t&&(t="utf8"),r.isBuffer(e)?s(e.toString("base64")):s(r.from(e,t).toString("base64"))}function i(e){return e=e.toString(),n.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function s(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var c=o;c.encode=o,c.decode=function(e,t){return void 0===t&&(t="utf8"),r.from(i(e),"base64").toString(t)},c.toBase64=i,c.fromBase64=s,c.toBuffer=function(e){return r.from(i(e),"base64")},e.exports.default=c})),a.register("6ZWSX",(function(t,r){var n,o;e(t.exports,"Buffer",(()=>n),(e=>n=e)),e(t.exports,"INSPECT_MAX_BYTES",(()=>o),(e=>o=e));var i=a("kuxul"),s=a("9NvM5");const c="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n=f,o=50;const l=2147483647;function u(e){if(e>l)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,f.prototype),t}function f(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return d(e,t,r)}function d(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|v(e,t);let n=u(r);const o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return m(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return f.from(n,t,r);const o=function(e){if(f.isBuffer(e)){const t=0|y(e.length),r=u(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||X(e.length)?u(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return h(e),u(e<0?0:0|y(e))}function g(e){const t=e.length<0?0:0|y(e.length),r=u(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function m(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,f.prototype),n}function y(e){if(e>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|e}function v(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(o)return n?-1:q(e).length;t=(""+t).toLowerCase(),o=!0}}function w(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function k(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),X(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:B(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):B(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function B(e,t,r,n,o){let a,i=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,r/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){let n=-1;for(a=r;a<s;a++)if(l(e,a)===l(t,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===c)return n*i}else-1!==n&&(a-=a-n),n=-1}else for(r+c>s&&(r=s-c),a=r;a>=0;a--){let r=!0;for(let n=0;n<c;n++)if(l(e,a+n)!==l(t,n)){r=!1;break}if(r)return a}return-1}function _(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const a=t.length;let i;for(n>a/2&&(n=a/2),i=0;i<n;++i){const n=parseInt(t.substr(2*i,2),16);if(X(n))return i;e[r+i]=n}return i}function E(e,t,r,n){return $(q(t,e.length-r),e,r,n)}function C(e,t,r,n){return $(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return $(G(t),e,r,n)}function S(e,t,r,n){return $(function(e,t){let r,n,o;const a=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,o=r%256,a.push(o),a.push(n);return a}(t,e.length-r),e,r,n)}function P(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let a=null,i=t>239?4:t>223?3:t>191?2:1;if(o+i<=r){let r,n,s,c;switch(i){case 1:t<128&&(a=t);break;case 2:r=e[o+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(a=c));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:r=e[o+1],n=e[o+2],s=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,c>65535&&c<1114112&&(a=c))}}null===a?(a=65533,i=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=i}return function(e){const t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=x));return r}(n)}f.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(e,t,r){return d(e,t,r)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?u(e):void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)}(e,t,r)},f.allocUnsafe=function(e){return p(e)},f.allocUnsafeSlow=function(e){return p(e)},f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(Q(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=f.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(Q(t,Uint8Array))o+t.length>n.length?(f.isBuffer(t)||(t=f.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!f.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)k(this,t,t+1);return this},f.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},f.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},f.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):w.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){let e="";const t=o;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},c&&(f.prototype[c]=f.prototype.inspect),f.prototype.compare=function(e,t,r,n,o){if(Q(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let a=(o>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0);const s=Math.min(a,i),c=this.slice(n,o),l=e.slice(t,r);for(let e=0;e<s;++e)if(c[e]!==l[e]){a=c[e],i=l[e];break}return a<i?-1:i<a?1:0},f.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function I(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function T(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function D(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=t;n<r;++n)o+=ee[e[n]];return o}function O(e,t,r){const n=e.slice(t,r);let o="";for(let e=0;e<n.length-1;e+=2)o+=String.fromCharCode(n[e]+256*n[e+1]);return o}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,r,n,o,a){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,o){J(t,n,o,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,r}function U(e,t,r,n,o){J(t,n,o,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a>>=8,e[r+6]=a,a>>=8,e[r+5]=a,a>>=8,e[r+4]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=i,i>>=8,e[r+2]=i,i>>=8,e[r+1]=i,i>>=8,e[r]=i,r+8}function H(e,t,r,n,o,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(e,t,r,n,o){return t=+t,r>>>=0,o||H(e,0,r,4),s.write(e,t,r,n,23,4),r+4}function z(e,t,r,n,o){return t=+t,r>>>=0,o||H(e,0,r,8),s.write(e,t,r,n,52,8),r+8}f.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,f.prototype),n},f.prototype.readUintLE=f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e],o=1,a=0;for(;++a<t&&(o*=256);)n+=this[e+a]*o;return n},f.prototype.readUintBE=f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},f.prototype.readUint8=f.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readBigUInt64LE=te((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Z(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),f.prototype.readBigUInt64BE=te((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Z(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e],o=1,a=0;for(;++a<t&&(o*=256);)n+=this[e+a]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=t,o=1,a=this[e+--n];for(;n>0&&(o*=256);)a+=this[e+--n]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a},f.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readBigInt64LE=te((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Z(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),f.prototype.readBigInt64BE=te((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Z(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),f.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),s.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),s.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),s.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),s.read(this,e,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){N(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){N(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigUInt64LE=te((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),f.prototype.writeBigUInt64BE=te((function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),f.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,e,t,r,n-1,-n)}let o=0,a=1,i=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===i&&0!==this[t+o-1]&&(i=1),this[t+o]=(e/a>>0)-i&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,e,t,r,n-1,-n)}let o=r-1,a=1,i=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===i&&0!==this[t+o+1]&&(i=1),this[t+o]=(e/a>>0)-i&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigInt64LE=te((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),f.prototype.writeBigInt64BE=te((function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),f.prototype.writeFloatLE=function(e,t,r){return K(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return K(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return z(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return z(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},f.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const a=f.isBuffer(e)?e:f.from(e,n),i=a.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%i]}return this};const F={};function j(e,t,r){F[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function W(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function J(e,t,r,n,o,a){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=a>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(a+1)}${n}`:`>= -(2${n} ** ${8*(a+1)-1}${n}) and < 2 ** ${8*(a+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new F.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||Z(t,e.length-(r+1))}(n,o,a)}function V(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function Z(e,t,r){if(Math.floor(e)!==e)throw V(e,r),new F.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=W(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=W(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function q(e,t){let r;t=t||1/0;const n=e.length;let o=null;const a=[];for(let i=0;i<n;++i){if(r=e.charCodeAt(i),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function G(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const ee=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function te(e){return"undefined"==typeof BigInt?re:e}function re(){throw new Error("BigInt not supported")}})),a.register("kuxul",(function(t,r){var n,o;e(t.exports,"toByteArray",(()=>n),(e=>n=e)),e(t.exports,"fromByteArray",(()=>o),(e=>o=e)),n=function(e){var t,r,n=f(e),o=n[0],a=n[1],c=new s(function(e,t,r){return 3*(t+r)/4-r}(0,o,a)),l=0,u=a>0?o-4:o;for(r=0;r<u;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},o=function(e){for(var t,r=e.length,n=r%3,o=[],i=16383,s=0,c=r-n;s<c;s+=i)o.push(d(e,s,s+i>c?c:s+i));1===n?(t=e[r-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return o.join("")};for(var a=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=c.length;l<u;++l)a[l]=c[l],i[c.charCodeAt(l)]=l;function f(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function d(e,t,r){for(var n,o,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(a[(o=n)>>18&63]+a[o>>12&63]+a[o>>6&63]+a[63&o]);return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63})),a.register("9NvM5",(function(t,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var n,o;e(t.exports,"read",(()=>n),(e=>n=e)),e(t.exports,"write",(()=>o),(e=>o=e)),n=function(e,t,r,n,o){var a,i,s=8*o-n-1,c=(1<<s)-1,l=c>>1,u=-7,f=r?o-1:0,d=r?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-u)-1,h>>=-u,u+=s;u>0;a=256*a+e[t+f],f+=d,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=n;u>0;i=256*i+e[t+f],f+=d,u-=8);if(0===a)a=1-l;else{if(a===c)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,n),a-=l}return(h?-1:1)*i*Math.pow(2,a-n)},o=function(e,t,r,n,o,a){var i,s,c,l=8*a-o-1,u=(1<<l)-1,f=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(i++,c/=2),i+f>=u?(s=0,i=u):i+f>=1?(s=(t*c-1)*Math.pow(2,o),i+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;e[r+h]=255&s,h+=p,s/=256,o-=8);for(i=i<<o|s,l+=o;l>0;e[r+h]=255&i,h+=p,i/=256,l-=8);e[r+h-p]|=128*g}})),a.register("fwxWp",(function(e,t){var r=a("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){var t=e.length,n=t%4;if(!n)return e;var o=t,a=4-n,i=t+a,s=r.alloc(i);for(s.write(e);a--;)s.write("=",o++);return s.toString()}})),a.register("kzGqM",(function(e,t){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,o,a){t=t||"&",o=o||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var c=1e3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var f,d,h,p,g=e[u].replace(s,"%20"),m=g.indexOf(o);m>=0?(f=g.substr(0,m),d=g.substr(m+1)):(f=g,d=""),h=decodeURIComponent(f),p=decodeURIComponent(d),r(i,h)?n(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}})),a.register("kWD7b",(function(e,t){var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,i,s){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+i;return n(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+i+encodeURIComponent(r(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}})),a.register("7we3r",(function(e,t){var r=a("gKvUL"),n=a("jJbMR"),o=a("ewFRw"),i=a("lk5EI");var s=function e(t){var a=new o(t),s=n(o.prototype.request,a);return r.extend(s,o.prototype,a),r.extend(s,a),s.create=function(r){return e(i(t,r))},s}(a("blSvA"));s.Axios=o,s.Cancel=a("4Tkeq"),s.CancelToken=a("lAKPy"),s.isCancel=a("7L4QX"),s.VERSION=a("35BUy").version,s.all=function(e){return Promise.all(e)},s.spread=a("JEeti"),s.isAxiosError=a("dxy9O"),e.exports=s,e.exports.default=s})),a.register("gKvUL",(function(e,t){var r=a("jJbMR"),n=Object.prototype.toString;function o(e){return Array.isArray(e)}function i(e){return void 0===e}function s(e){return"[object ArrayBuffer]"===n.call(e)}function c(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==n.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===n.call(e)}function f(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:o,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===n.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:l,isUndefined:i,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:u,isStream:function(e){return c(e)&&u(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===n.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:f,merge:function e(){var t={};function r(r,n){l(t[n])&&l(r)?t[n]=e(t[n],r):l(r)?t[n]=e({},r):o(r)?t[n]=r.slice():t[n]=r}for(var n=0,a=arguments.length;n<a;n++)f(arguments[n],r);return t},extend:function(e,t,n){return f(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}})),a.register("jJbMR",(function(e,t){e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}})),a.register("ewFRw",(function(e,t){var r=a("gKvUL"),n=a("cbIsf"),o=a("83RYu"),i=a("dlZEJ"),s=a("lk5EI"),c=a("bv3QM"),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&c.assertOptions(r,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var a,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!o){var f=[i,void 0];for(Array.prototype.unshift.apply(f,n),f=f.concat(u),a=Promise.resolve(t);f.length;)a=a.then(f.shift(),f.shift());return a}for(var d=t;n.length;){var h=n.shift(),p=n.shift();try{d=h(d)}catch(e){p(e);break}}try{a=i(d)}catch(e){return Promise.reject(e)}for(;u.length;)a=a.then(u.shift(),u.shift());return a},u.prototype.getUri=function(e){return e=s(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,n){return this.request(s(n||{},{method:e,url:t,data:r}))}})),e.exports=u})),a.register("cbIsf",(function(e,t){var r=a("gKvUL");function n(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,o){if(!t)return e;var a;if(o)a=o(t);else if(r.isURLSearchParams(t))a=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(n(t)+"="+n(e))})))})),a=i.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}})),a.register("83RYu",(function(e,t){var r=a("gKvUL");function n(){this.handlers=[]}n.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n})),a.register("dlZEJ",(function(e,t){var r=a("gKvUL"),n=a("7YJ0v"),o=a("7L4QX"),i=a("blSvA"),s=a("4Tkeq");function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=n.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return c(e),t.data=n.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=n.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}})),a.register("7YJ0v",(function(e,t){var r=a("gKvUL"),n=a("blSvA");e.exports=function(e,t,o){var a=this||n;return r.forEach(o,(function(r){e=r.call(a,e,t)})),e}})),a.register("blSvA",(function(e,t){var r=a("gKvUL"),n=a("kiL6T"),o=a("8v8A7"),i=a("6YCMk"),s={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,f={transitional:i,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==l&&"[object process]"===Object.prototype.toString.call(l))&&(u=a("at5cb")),u),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||f.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){f.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){f.headers[e]=r.merge(s)})),e.exports=f}));var s,c,l={},u=l={};function f(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function h(e){if(s===setTimeout)return setTimeout(e,0);if((s===f||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:f}catch(e){s=f}try{c="function"==typeof clearTimeout?clearTimeout:d}catch(e){c=d}}();var p,g=[],m=!1,y=-1;function v(){m&&p&&(m=!1,p.length?g=p.concat(g):y=-1,g.length&&w())}function w(){if(!m){var e=h(v);m=!0;for(var t=g.length;t;){for(p=g,g=[];++y<t;)p&&p[y].run();y=-1,t=g.length}p=null,m=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===d||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function k(e,t){this.fun=e,this.array=t}function b(){}u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new k(e,t)),1!==g.length||m||h(w)},k.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=b,u.addListener=b,u.once=b,u.off=b,u.removeListener=b,u.removeAllListeners=b,u.emit=b,u.prependListener=b,u.prependOnceListener=b,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0},a.register("kiL6T",(function(e,t){var r=a("gKvUL");e.exports=function(e,t){r.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}})),a.register("8v8A7",(function(e,t){e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}})),a.register("6YCMk",(function(e,t){e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}})),a.register("at5cb",(function(e,t){var r=a("gKvUL"),n=a("kk0E9"),o=a("8JRzs"),i=a("cbIsf"),s=a("7GD7a"),c=a("lDriZ"),l=a("889er"),u=a("kjF3e"),f=a("6YCMk"),d=a("4Tkeq");e.exports=function(e){return new Promise((function(t,a){var h,p=e.data,g=e.headers,m=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}r.isFormData(p)&&delete g["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",k=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(w+":"+k)}var b=s(e.baseURL,e.url);function B(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,o={data:m&&"text"!==m&&"json"!==m?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};n((function(e){t(e),y()}),(function(e){a(e),y()}),o),v=null}}if(v.open(e.method.toUpperCase(),i(b,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=B:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(B)},v.onabort=function(){v&&(a(u("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){a(u("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),a(u(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var _=(e.withCredentials||l(b))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;_&&(g[e.xsrfHeaderName]=_)}"setRequestHeader"in v&&r.forEach(g,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete g[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),m&&"json"!==m&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){v&&(a(!e||e&&e.type?new d("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),p||(p=null),v.send(p)}))}})),a.register("kk0E9",(function(e,t){var r=a("kjF3e");e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}})),a.register("kjF3e",(function(e,t){var r=a("8v8A7");e.exports=function(e,t,n,o,a){var i=new Error(e);return r(i,t,n,o,a)}})),a.register("8JRzs",(function(e,t){var r=a("gKvUL");e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,a,i){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}})),a.register("7GD7a",(function(e,t){var r=a("ckHwb"),n=a("fE4ul");e.exports=function(e,t){return e&&!r(t)?n(e,t):t}})),a.register("ckHwb",(function(e,t){e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}})),a.register("fE4ul",(function(e,t){e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}})),a.register("lDriZ",(function(e,t){var r=a("gKvUL"),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,o,a,i={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),o=r.trim(e.substr(a+1)),t){if(i[t]&&n.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([o]):i[t]?i[t]+", "+o:o}})),i):i}})),a.register("889er",(function(e,t){var r=a("gKvUL");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}})),a.register("4Tkeq",(function(e,t){function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r})),a.register("7L4QX",(function(e,t){e.exports=function(e){return!(!e||!e.__CANCEL__)}})),a.register("lk5EI",(function(e,t){var r=a("gKvUL");e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function i(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function c(r){return r in t?o(e[r],t[r]):r in e?o(void 0,e[r]):void 0}var l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||a,o=t(e);r.isUndefined(o)&&t!==c||(n[e]=o)})),n}})),a.register("bv3QM",(function(e,t){var r=a("35BUy").version,n={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){n[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var o={};n.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(r,n,i){if(!1===e)throw new Error(a(n," has been removed"+(t?" in "+t:"")));return t&&!o[n]&&(o[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,i)}},e.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-- >0;){var a=n[o],i=t[a];if(i){var s=e[a],c=void 0===s||i(s,a,e);if(!0!==c)throw new TypeError("option "+a+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+a)}},validators:n}})),a.register("35BUy",(function(e,t){e.exports={version:"0.26.1"}})),a.register("lAKPy",(function(e,t){var r=a("4Tkeq");function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},n.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n})),a.register("JEeti",(function(e,t){e.exports=function(e){return function(t){return e.apply(null,t)}}})),a.register("dxy9O",(function(e,t){var r=a("gKvUL");e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}}));var B={};(B=a("2e6QR").default).default=B;class _ extends Error{constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class E extends _{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class C extends _{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class A extends _{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}var S=crypto;function P(e){try{return null!=e&&"boolean"==typeof e.extractable&&"string"==typeof e.algorithm.name&&"string"==typeof e.type}catch(e){return!1}}const R=new TextEncoder,x=new TextDecoder;function I(...e){const t=e.reduce(((e,{length:t})=>e+t),0),r=new Uint8Array(t);let n=0;return e.forEach((e=>{r.set(e,n),n+=e.length})),r}const T=e=>{let t=e;"string"==typeof t&&(t=R.encode(t));const r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))},D=e=>T(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),O=e=>new Uint8Array(atob(e).split("").map((e=>e.charCodeAt(0)))),M=e=>{let t=e;t instanceof Uint8Array&&(t=x.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return O(t)}catch(e){throw new TypeError("The input to be decoded is not correctly encoded.")}};S.getRandomValues.bind(S);function N(){return"function"==typeof WebSocketPair}function L(){try{return void 0!==l.versions.node}catch(e){return!1}}function U(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function H(e,t){return e.name===t}function K(e){return parseInt(e.name.slice(4),10)}function z(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw new TypeError(e)}}function F(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!H(e.algorithm,"HMAC"))throw U("HMAC");const r=parseInt(t.slice(2),10);if(K(e.algorithm.hash)!==r)throw U(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!H(e.algorithm,"RSASSA-PKCS1-v1_5"))throw U("RSASSA-PKCS1-v1_5");const r=parseInt(t.slice(2),10);if(K(e.algorithm.hash)!==r)throw U(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!H(e.algorithm,"RSA-PSS"))throw U("RSA-PSS");const r=parseInt(t.slice(2),10);if(K(e.algorithm.hash)!==r)throw U(`SHA-${r}`,"algorithm.hash");break}case L()&&"EdDSA":if("NODE-ED25519"!==e.algorithm.name&&"NODE-ED448"!==e.algorithm.name)throw U("NODE-ED25519 or NODE-ED448");break;case N()&&"EdDSA":if(!H(e.algorithm,"NODE-ED25519"))throw U("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!H(e.algorithm,"ECDSA"))throw U("ECDSA");const r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw U(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}z(e,r)}var j=(e,...t)=>{let r="Key must be ";if(t.length>2){const e=t.pop();r+=`one of type ${t.join(", ")}, or ${e}.`}else 2===t.length?r+=`one of type ${t[0]} or ${t[1]}.`:r+=`of type ${t[0]}.`;return null==e?r+=` Received ${e}`:"function"==typeof e&&e.name?r+=` Received function ${e.name}`:"object"==typeof e&&null!=e&&e.constructor&&e.constructor.name&&(r+=` Received an instance of ${e.constructor.name}`),r},W=e=>P(e);const J=["CryptoKey"];var V=(...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let r;for(const e of t){const t=Object.keys(e);if(r&&0!==r.size)for(const e of t){if(r.has(e))return!1;r.add(e)}else r=new Set(t)}return!0};function Z(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}var Y=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};var q=async e=>{var t,r;const{algorithm:n,keyUsages:o}=function(e){let t,r;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new E(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},r=["deriveBits"];break;default:throw new E('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new E('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new E('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case(N()||L())&&"OKP":if("EdDSA"!==e.alg)throw new E('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(e.crv){case"Ed25519":t={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},r=e.d?["sign"]:["verify"];break;case L()&&"Ed448":t={name:"NODE-ED448",namedCurve:"NODE-ED448"},r=e.d?["sign"]:["verify"];break;default:throw new E('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value')}break;default:throw new E('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),a=[n,null!==(t=e.ext)&&void 0!==t&&t,null!==(r=e.key_ops)&&void 0!==r?r:o];if("PBKDF2"===n.name)return S.subtle.importKey("raw",M(e.k),...a);const i={...e};return delete i.alg,S.subtle.importKey("jwk",i,...a)};async function G(e,t,r){if(!Z(e))throw new TypeError("JWK must be an object");if(t||(t=e.alg),"string"!=typeof t||!t)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=r||(r=!0!==e.ext),r?q({...e,alg:t,ext:!1}):M(e.k);case"RSA":if(void 0!==e.oth)throw new E('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return q({...e,alg:t});default:throw new E('Unsupported "kty" (Key Type) Parameter value')}}var $=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?(e=>{if(!(e instanceof Uint8Array)){if(!W(e))throw new TypeError(j(e,...J,"Uint8Array"));if("secret"!==e.type)throw new TypeError(`${J.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(t):((e,t)=>{if(!W(e))throw new TypeError(j(e,...J));if("secret"===e.type)throw new TypeError(`${J.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===t&&"public"===e.type)throw new TypeError(`${J.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===t&&"public"===e.type)throw new TypeError(`${J.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&"verify"===t&&"private"===e.type)throw new TypeError(`${J.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&"encrypt"===t&&"private"===e.type)throw new TypeError(`${J.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(t,r)};var Q=function(e,t,r,n,o){if(void 0!==o.crit&&void 0===n.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((e=>"string"!=typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t;for(const t of n.crit){if(!a.has(t))throw new E(`Extension Header Parameter "${t}" is not recognized`);if(void 0===o[t])throw new e(`Extension Header Parameter "${t}" is missing`);if(a.get(t)&&void 0===n[t])throw new e(`Extension Header Parameter "${t}" MUST be integrity protected`)}return new Set(n.crit)};var X=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:D(e)};if(!P(e))throw new TypeError(j(e,...J,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:o,...a}=await S.subtle.exportKey("jwk",e);return a};async function ee(e){return X(e)}Symbol();function te(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case(N()||L())&&"EdDSA":const{namedCurve:n}=t;return{name:n,namedCurve:n};default:throw new E(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function re(e,t,r){if(P(t))return F(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(j(t,...J));return S.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(j(t,...J,"Uint8Array"))}var ne=e=>Math.floor(e.getTime()/1e3);const oe=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var ae=e=>{const t=oe.exec(e);if(!t)throw new TypeError("Invalid time period format");const r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*r);case"day":case"days":case"d":return Math.round(86400*r);case"week":case"weeks":case"w":return Math.round(604800*r);default:return Math.round(31557600*r)}};var ie=async(e,t,r)=>{const n=await re(e,t,"sign");Y(e,n);const o=await S.subtle.sign(te(e,n.algorithm),n,r);return new Uint8Array(o)};class se{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new C("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!V(this._protectedHeader,this._unprotectedHeader))throw new C("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader};let n=!0;if(Q(C,new Map([["b64",!0]]),null==t?void 0:t.crit,this._protectedHeader,r).has("b64")&&(n=this._protectedHeader.b64,"boolean"!=typeof n))throw new C('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if("string"!=typeof o||!o)throw new C('JWS "alg" (Algorithm) Header Parameter missing or invalid');$(o,e,"sign");let a,i=this._payload;n&&(i=R.encode(D(i))),a=this._protectedHeader?R.encode(D(JSON.stringify(this._protectedHeader))):R.encode("");const s=I(a,R.encode("."),i),c=await ie(o,e,s),l={signature:D(c),payload:""};return n&&(l.payload=x.decode(i)),this._unprotectedHeader&&(l.header=this._unprotectedHeader),this._protectedHeader&&(l.protected=x.decode(a)),l}}class ce{constructor(e){this._flattened=new se(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const r=await this._flattened.sign(e,t);if(void 0===r.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class le{constructor(e){if(!Z(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return this._payload="number"==typeof e?{...this._payload,nbf:e}:{...this._payload,nbf:ne(new Date)+ae(e)},this}setExpirationTime(e){return this._payload="number"==typeof e?{...this._payload,exp:e}:{...this._payload,exp:ne(new Date)+ae(e)},this}setIssuedAt(e){return this._payload=void 0===e?{...this._payload,iat:ne(new Date)}:{...this._payload,iat:e},this}}class ue extends le{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var r;const n=new ce(R.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new A("JWTs MUST NOT use unencoded payload");return n.sign(e,t)}}var fe;function de(e){var t;const r=null!==(t=null==e?void 0:e.modulusLength)&&void 0!==t?t:2048;if("number"!=typeof r||r<2048)throw new E("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}async function he(e,t){return async function(e,t){var r,n;let o,a;switch(e){case"PS256":case"PS384":case"PS512":o={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:de(t)},a=["sign","verify"];break;case"RS256":case"RS384":case"RS512":o={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:de(t)},a=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":o={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:de(t)},a=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":o={name:"ECDSA",namedCurve:"P-256"},a=["sign","verify"];break;case"ES384":o={name:"ECDSA",namedCurve:"P-384"},a=["sign","verify"];break;case"ES512":o={name:"ECDSA",namedCurve:"P-521"},a=["sign","verify"];break;case(N()||L())&&"EdDSA":switch(null==t?void 0:t.crv){case void 0:case"Ed25519":o={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},a=["sign","verify"];break;case L()&&"Ed448":o={name:"NODE-ED448",namedCurve:"NODE-ED448"},a=["sign","verify"];break;default:throw new E("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":o={name:"ECDH",namedCurve:null!==(r=null==t?void 0:t.crv)&&void 0!==r?r:"P-256"},a=["deriveKey","deriveBits"];break;default:throw new E('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return S.subtle.generateKey(o,null!==(n=null==t?void 0:t.extractable)&&void 0!==n&&n,a)}(e,t)}a("kzGqM"),fe=a("kWD7b");function pe(e){let t=e.length;for(;--t>=0;)e[t]=0}const ge=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),me=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ye=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ve=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),we=new Array(576);pe(we);const ke=new Array(60);pe(ke);const be=new Array(512);pe(be);const Be=new Array(256);pe(Be);const _e=new Array(29);pe(_e);const Ee=new Array(30);function Ce(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}let Ae,Se,Pe;function Re(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}pe(Ee);const xe=e=>e<256?be[e]:be[256+(e>>>7)],Ie=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Te=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Ie(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},De=(e,t,r)=>{Te(e,r[2*t],r[2*t+1])},Oe=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},Me=(e,t,r)=>{const n=new Array(16);let o,a,i=0;for(o=1;o<=15;o++)n[o]=i=i+r[o-1]<<1;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=Oe(n[t]++,t))}},Ne=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},Le=e=>{e.bi_valid>8?Ie(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Ue=(e,t,r,n)=>{const o=2*t,a=2*r;return e[o]<e[a]||e[o]===e[a]&&n[t]<=n[r]},He=(e,t,r)=>{const n=e.heap[r];let o=r<<1;for(;o<=e.heap_len&&(o<e.heap_len&&Ue(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!Ue(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n},Ke=(e,t,r)=>{let n,o,a,i,s=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],o=e.pending_buf[e.l_buf+s],s++,0===n?De(e,o,t):(a=Be[o],De(e,a+256+1,t),i=ge[a],0!==i&&(o-=_e[a],Te(e,o,i)),n--,a=xe(n),De(e,a,r),i=me[a],0!==i&&(n-=Ee[a],Te(e,n,i)))}while(s<e.last_lit);De(e,256,t)},ze=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.elems;let i,s,c,l=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<a;i++)0!==r[2*i]?(e.heap[++e.heap_len]=l=i,e.depth[i]=0):r[2*i+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,o&&(e.static_len-=n[2*c+1]);for(t.max_code=l,i=e.heap_len>>1;i>=1;i--)He(e,r,i);c=a;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],He(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=s,r[2*c]=r[2*i]+r[2*s],e.depth[c]=(e.depth[i]>=e.depth[s]?e.depth[i]:e.depth[s])+1,r[2*i+1]=r[2*s+1]=c,e.heap[1]=c++,He(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,f,d,h,p,g=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(r[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],d=r[2*r[2*u+1]+1]+1,d>c&&(d=c,g++),r[2*u+1]=d,u>n||(e.bl_count[d]++,h=0,u>=s&&(h=i[u-s]),p=r[2*u],e.opt_len+=p*(d+h),a&&(e.static_len+=p*(o[2*u+1]+h)));if(0!==g){do{for(d=c-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,g-=2}while(g>0);for(d=c;0!==d;d--)for(u=e.bl_count[d];0!==u;)f=e.heap[--l],f>n||(r[2*f+1]!==d&&(e.opt_len+=(d-r[2*f+1])*r[2*f],r[2*f+1]=d),u--)}})(e,t),Me(r,l,e.bl_count)},Fe=(e,t,r)=>{let n,o,a=-1,i=t[1],s=0,c=7,l=4;for(0===i&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=i,i=t[2*(n+1)+1],++s<c&&o===i||(s<l?e.bl_tree[2*o]+=s:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=o,0===i?(c=138,l=3):o===i?(c=6,l=3):(c=7,l=4))},je=(e,t,r)=>{let n,o,a=-1,i=t[1],s=0,c=7,l=4;for(0===i&&(c=138,l=3),n=0;n<=r;n++)if(o=i,i=t[2*(n+1)+1],!(++s<c&&o===i)){if(s<l)do{De(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==a&&(De(e,o,e.bl_tree),s--),De(e,16,e.bl_tree),Te(e,s-3,2)):s<=10?(De(e,17,e.bl_tree),Te(e,s-3,3)):(De(e,18,e.bl_tree),Te(e,s-11,7));s=0,a=o,0===i?(c=138,l=3):o===i?(c=6,l=3):(c=7,l=4)}};let We=!1;const Je=(e,t,r,n)=>{Te(e,0+(n?1:0),3),((e,t,r,n)=>{Le(e),n&&(Ie(e,r),Ie(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r})(e,t,r,!0)};var Ve={_tr_init:e=>{We||((()=>{let e,t,r,n,o;const a=new Array(16);for(r=0,n=0;n<28;n++)for(_e[n]=r,e=0;e<1<<ge[n];e++)Be[r++]=n;for(Be[r-1]=n,o=0,n=0;n<16;n++)for(Ee[n]=o,e=0;e<1<<me[n];e++)be[o++]=n;for(o>>=7;n<30;n++)for(Ee[n]=o<<7,e=0;e<1<<me[n]-7;e++)be[256+o++]=n;for(t=0;t<=15;t++)a[t]=0;for(e=0;e<=143;)we[2*e+1]=8,e++,a[8]++;for(;e<=255;)we[2*e+1]=9,e++,a[9]++;for(;e<=279;)we[2*e+1]=7,e++,a[7]++;for(;e<=287;)we[2*e+1]=8,e++,a[8]++;for(Me(we,287,a),e=0;e<30;e++)ke[2*e+1]=5,ke[2*e]=Oe(e,5);Ae=new Ce(we,ge,257,286,15),Se=new Ce(ke,me,0,30,15),Pe=new Ce(new Array(0),ye,0,19,7)})(),We=!0),e.l_desc=new Re(e.dyn_ltree,Ae),e.d_desc=new Re(e.dyn_dtree,Se),e.bl_desc=new Re(e.bl_tree,Pe),e.bi_buf=0,e.bi_valid=0,Ne(e)},_tr_stored_block:Je,_tr_flush_block:(e,t,r,n)=>{let o,a,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),ze(e,e.l_desc),ze(e,e.d_desc),i=(e=>{let t;for(Fe(e,e.dyn_ltree,e.l_desc.max_code),Fe(e,e.dyn_dtree,e.d_desc.max_code),ze(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*ve[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=o&&(o=a)):o=a=r+5,r+4<=o&&-1!==t?Je(e,t,r,n):4===e.strategy||a===o?(Te(e,2+(n?1:0),3),Ke(e,we,ke)):(Te(e,4+(n?1:0),3),((e,t,r,n)=>{let o;for(Te(e,t-257,5),Te(e,r-1,5),Te(e,n-4,4),o=0;o<n;o++)Te(e,e.bl_tree[2*ve[o]+1],3);je(e,e.dyn_ltree,t-1),je(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),Ke(e,e.dyn_ltree,e.dyn_dtree)),Ne(e),n&&Le(e)},_tr_tally:(e,t,r)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(Be[r]+256+1)]++,e.dyn_dtree[2*xe(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{Te(e,2,3),De(e,256,we),(e=>{16===e.bi_valid?(Ie(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Ze=(e,t,r,n)=>{let o=65535&e|0,a=e>>>16&65535|0,i=0;for(;0!==r;){i=r>2e3?2e3:r,r-=i;do{o=o+t[n++]|0,a=a+o|0}while(--i);o%=65521,a%=65521}return o|a<<16|0};const Ye=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var qe=(e,t,r,n)=>{const o=Ye,a=n+r;e^=-1;for(let r=n;r<a;r++)e=e>>>8^o[255&(e^t[r])];return-1^e},Ge={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$e={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Qe,_tr_stored_block:Xe,_tr_flush_block:et,_tr_tally:tt,_tr_align:rt}=Ve,{Z_NO_FLUSH:nt,Z_PARTIAL_FLUSH:ot,Z_FULL_FLUSH:at,Z_FINISH:it,Z_BLOCK:st,Z_OK:ct,Z_STREAM_END:lt,Z_STREAM_ERROR:ut,Z_DATA_ERROR:ft,Z_BUF_ERROR:dt,Z_DEFAULT_COMPRESSION:ht,Z_FILTERED:pt,Z_HUFFMAN_ONLY:gt,Z_RLE:mt,Z_FIXED:yt,Z_DEFAULT_STRATEGY:vt,Z_UNKNOWN:wt,Z_DEFLATED:kt}=$e,bt=(e,t)=>(e.msg=Ge[t],t),Bt=e=>(e<<1)-(e>4?9:0),_t=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Et=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const Ct=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},At=(e,t)=>{et(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ct(e.strm)},St=(e,t)=>{e.pending_buf[e.pending++]=t},Pt=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Rt=(e,t,r,n)=>{let o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),r),1===e.state.wrap?e.adler=Ze(e.adler,t,o,r):2===e.state.wrap&&(e.adler=qe(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)},xt=(e,t)=>{let r,n,o=e.max_chain_length,a=e.strstart,i=e.prev_length,s=e.nice_match;const c=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,u=e.w_mask,f=e.prev,d=e.strstart+258;let h=l[a+i-1],p=l[a+i];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,l[r+i]===p&&l[r+i-1]===h&&l[r]===l[a]&&l[++r]===l[a+1]){a+=2,r++;do{}while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<d);if(n=258-(d-a),a=d-258,n>i){if(e.match_start=t,i=n,n>=s)break;h=l[a+i-1],p=l[a+i]}}}while((t=f[t&u])>c&&0!=--o);return i<=e.lookahead?i:e.lookahead},It=e=>{const t=e.w_size;let r,n,o,a,i;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do{o=e.head[--r],e.head[r]=o>=t?o-t:0}while(--n);n=t,r=n;do{o=e.prev[--r],e.prev[r]=o>=t?o-t:0}while(--n);a+=t}if(0===e.strm.avail_in)break;if(n=Rt(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Et(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Et(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},Tt=(e,t)=>{let r,n;for(;;){if(e.lookahead<262){if(It(e),e.lookahead<262&&t===nt)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Et(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=xt(e,r)),e.match_length>=3)if(n=tt(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Et(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Et(e,e.ins_h,e.window[e.strstart+1]);else n=tt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(At(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===it?(At(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(At(e,!1),0===e.strm.avail_out)?1:2},Dt=(e,t)=>{let r,n,o;for(;;){if(e.lookahead<262){if(It(e),e.lookahead<262&&t===nt)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Et(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=xt(e,r),e.match_length<=5&&(e.strategy===pt||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,n=tt(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=Et(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(At(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=tt(e,0,e.window[e.strstart-1]),n&&At(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=tt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===it?(At(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(At(e,!1),0===e.strm.avail_out)?1:2};function Ot(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}const Mt=[new Ot(0,0,0,0,((e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(It(e),0===e.lookahead&&t===nt)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,At(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(At(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===it?(At(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(At(e,!1),e.strm.avail_out),1)})),new Ot(4,4,8,4,Tt),new Ot(4,5,16,8,Tt),new Ot(4,6,32,32,Tt),new Ot(4,4,16,16,Dt),new Ot(8,16,32,32,Dt),new Ot(8,16,128,128,Dt),new Ot(8,32,128,256,Dt),new Ot(32,128,258,1024,Dt),new Ot(32,258,258,4096,Dt)];function Nt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=kt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),_t(this.dyn_ltree),_t(this.dyn_dtree),_t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),_t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),_t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Lt=e=>{if(!e||!e.state)return bt(e,ut);e.total_in=e.total_out=0,e.data_type=wt;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=nt,Qe(t),ct},Ut=e=>{const t=Lt(e);var r;return t===ct&&((r=e.state).window_size=2*r.w_size,_t(r.head),r.max_lazy_match=Mt[r.level].max_lazy,r.good_match=Mt[r.level].good_length,r.nice_match=Mt[r.level].nice_length,r.max_chain_length=Mt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},Ht=(e,t,r,n,o,a)=>{if(!e)return ut;let i=1;if(t===ht&&(t=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),o<1||o>9||r!==kt||n<8||n>15||t<0||t>9||a<0||a>yt)return bt(e,ut);8===n&&(n=9);const s=new Nt;return e.state=s,s.strm=e,s.wrap=i,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=a,s.method=r,Ut(e)};var Kt={deflateInit:(e,t)=>Ht(e,t,kt,15,8,vt),deflateInit2:Ht,deflateReset:Ut,deflateResetKeep:Lt,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?ut:(e.state.gzhead=t,ct):ut,deflate:(e,t)=>{let r,n;if(!e||!e.state||t>st||t<0)return e?bt(e,ut):ut;const o=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===o.status&&t!==it)return bt(e,0===e.avail_out?dt:ut);o.strm=e;const a=o.last_flush;if(o.last_flush=t,42===o.status)if(2===o.wrap)e.adler=0,St(o,31),St(o,139),St(o,8),o.gzhead?(St(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),St(o,255&o.gzhead.time),St(o,o.gzhead.time>>8&255),St(o,o.gzhead.time>>16&255),St(o,o.gzhead.time>>24&255),St(o,9===o.level?2:o.strategy>=gt||o.level<2?4:0),St(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(St(o,255&o.gzhead.extra.length),St(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=qe(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(St(o,0),St(o,0),St(o,0),St(o,0),St(o,0),St(o,9===o.level?2:o.strategy>=gt||o.level<2?4:0),St(o,3),o.status=113);else{let t=kt+(o.w_bits-8<<4)<<8,r=-1;r=o.strategy>=gt||o.level<2?0:o.level<6?1:6===o.level?2:3,t|=r<<6,0!==o.strstart&&(t|=32),t+=31-t%31,o.status=113,Pt(o,t),0!==o.strstart&&(Pt(o,e.adler>>>16),Pt(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>r&&(e.adler=qe(e.adler,o.pending_buf,o.pending-r,r)),Ct(e),r=o.pending,o.pending!==o.pending_buf_size));)St(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(e.adler=qe(e.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=qe(e.adler,o.pending_buf,o.pending-r,r)),Ct(e),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}n=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,St(o,n)}while(0!==n);o.gzhead.hcrc&&o.pending>r&&(e.adler=qe(e.adler,o.pending_buf,o.pending-r,r)),0===n&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=qe(e.adler,o.pending_buf,o.pending-r,r)),Ct(e),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}n=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,St(o,n)}while(0!==n);o.gzhead.hcrc&&o.pending>r&&(e.adler=qe(e.adler,o.pending_buf,o.pending-r,r)),0===n&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&Ct(e),o.pending+2<=o.pending_buf_size&&(St(o,255&e.adler),St(o,e.adler>>8&255),e.adler=0,o.status=113)):o.status=113),0!==o.pending){if(Ct(e),0===e.avail_out)return o.last_flush=-1,ct}else if(0===e.avail_in&&Bt(t)<=Bt(a)&&t!==it)return bt(e,dt);if(666===o.status&&0!==e.avail_in)return bt(e,dt);if(0!==e.avail_in||0!==o.lookahead||t!==nt&&666!==o.status){let r=o.strategy===gt?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(It(e),0===e.lookahead)){if(t===nt)return 1;break}if(e.match_length=0,r=tt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(At(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===it?(At(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(At(e,!1),0===e.strm.avail_out)?1:2})(o,t):o.strategy===mt?((e,t)=>{let r,n,o,a;const i=e.window;for(;;){if(e.lookahead<=258){if(It(e),e.lookahead<=258&&t===nt)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,n=i[o],n===i[++o]&&n===i[++o]&&n===i[++o])){a=e.strstart+258;do{}while(n===i[++o]&&n===i[++o]&&n===i[++o]&&n===i[++o]&&n===i[++o]&&n===i[++o]&&n===i[++o]&&n===i[++o]&&o<a);e.match_length=258-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=tt(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=tt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(At(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===it?(At(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(At(e,!1),0===e.strm.avail_out)?1:2})(o,t):Mt[o.level].func(o,t);if(3!==r&&4!==r||(o.status=666),1===r||3===r)return 0===e.avail_out&&(o.last_flush=-1),ct;if(2===r&&(t===ot?rt(o):t!==st&&(Xe(o,0,0,!1),t===at&&(_t(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),Ct(e),0===e.avail_out))return o.last_flush=-1,ct}return t!==it?ct:o.wrap<=0?lt:(2===o.wrap?(St(o,255&e.adler),St(o,e.adler>>8&255),St(o,e.adler>>16&255),St(o,e.adler>>24&255),St(o,255&e.total_in),St(o,e.total_in>>8&255),St(o,e.total_in>>16&255),St(o,e.total_in>>24&255)):(Pt(o,e.adler>>>16),Pt(o,65535&e.adler)),Ct(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?ct:lt)},deflateEnd:e=>{if(!e||!e.state)return ut;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?bt(e,ut):(e.state=null,113===t?bt(e,ft):ct)},deflateSetDictionary:(e,t)=>{let r=t.length;if(!e||!e.state)return ut;const n=e.state,o=n.wrap;if(2===o||1===o&&42!==n.status||n.lookahead)return ut;if(1===o&&(e.adler=Ze(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===o&&(_t(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const a=e.avail_in,i=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,It(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=Et(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,It(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=i,e.input=s,e.avail_in=a,n.wrap=o,ct},deflateInfo:"pako deflate (from Nodeca project)"};const zt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Ft=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)zt(r,t)&&(e[t]=r[t])}}return e},jt=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,o=e.length;t<o;t++){let o=e[t];r.set(o,n),n+=o.length}return r};let Wt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Wt=!1}const Jt=new Uint8Array(256);for(let e=0;e<256;e++)Jt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Jt[254]=Jt[254]=1;var Vt=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,o,a,i=e.length,s=0;for(o=0;o<i;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<i&&(n=e.charCodeAt(o+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,o=0;a<s;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<i&&(n=e.charCodeAt(o+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},Zt=(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,o;const a=new Array(2*r);for(o=0,n=0;n<r;){let t=e[n++];if(t<128){a[o++]=t;continue}let i=Jt[t];if(i>4)a[o++]=65533,n+=i-1;else{for(t&=2===i?31:3===i?15:7;i>1&&n<r;)t=t<<6|63&e[n++],i--;i>1?a[o++]=65533:t<65536?a[o++]=t:(t-=65536,a[o++]=55296|t>>10&1023,a[o++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Wt)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(a,o)},Yt=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+Jt[e[r]]>t?r:t};var qt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Gt=Object.prototype.toString,{Z_NO_FLUSH:$t,Z_SYNC_FLUSH:Qt,Z_FULL_FLUSH:Xt,Z_FINISH:er,Z_OK:tr,Z_STREAM_END:rr,Z_DEFAULT_COMPRESSION:nr,Z_DEFAULT_STRATEGY:or,Z_DEFLATED:ar}=$e;function ir(e){this.options=Ft({level:nr,method:ar,chunkSize:16384,windowBits:15,memLevel:8,strategy:or},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qt,this.strm.avail_out=0;let r=Kt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==tr)throw new Error(Ge[r]);if(t.header&&Kt.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Vt(t.dictionary):"[object ArrayBuffer]"===Gt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=Kt.deflateSetDictionary(this.strm,e),r!==tr)throw new Error(Ge[r]);this._dict_set=!0}}function sr(e,t){const r=new ir(t);if(r.push(e,!0),r.err)throw r.msg||Ge[r.err];return r.result}ir.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let o,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?er:$t,"string"==typeof e?r.input=Vt(e):"[object ArrayBuffer]"===Gt.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===Qt||a===Xt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(o=Kt.deflate(r,a),o===rr)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),o=Kt.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===tr;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ir.prototype.onData=function(e){this.chunks.push(e)},ir.prototype.onEnd=function(e){e===tr&&(this.result=jt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var cr={Deflate:ir,deflate:sr,deflateRaw:function(e,t){return(t=t||{}).raw=!0,sr(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,sr(e,t)},constants:$e};var lr=function(e,t){let r,n,o,a,i,s,c,l,u,f,d,h,p,g,m,y,v,w,k,b,B,_,E,C;const A=e.state;r=e.next_in,E=e.input,n=r+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(t-e.avail_out),i=o+(e.avail_out-257),s=A.dmax,c=A.wsize,l=A.whave,u=A.wnext,f=A.window,d=A.hold,h=A.bits,p=A.lencode,g=A.distcode,m=(1<<A.lenbits)-1,y=(1<<A.distbits)-1;e:do{h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),v=p[d&m];t:for(;;){if(w=v>>>24,d>>>=w,h-=w,w=v>>>16&255,0===w)C[o++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=p[(65535&v)+(d&(1<<w)-1)];continue t}if(32&w){A.mode=12;break e}e.msg="invalid literal/length code",A.mode=30;break e}k=65535&v,w&=15,w&&(h<w&&(d+=E[r++]<<h,h+=8),k+=d&(1<<w)-1,d>>>=w,h-=w),h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),v=g[d&y];r:for(;;){if(w=v>>>24,d>>>=w,h-=w,w=v>>>16&255,!(16&w)){if(0==(64&w)){v=g[(65535&v)+(d&(1<<w)-1)];continue r}e.msg="invalid distance code",A.mode=30;break e}if(b=65535&v,w&=15,h<w&&(d+=E[r++]<<h,h+=8,h<w&&(d+=E[r++]<<h,h+=8)),b+=d&(1<<w)-1,b>s){e.msg="invalid distance too far back",A.mode=30;break e}if(d>>>=w,h-=w,w=o-a,b>w){if(w=b-w,w>l&&A.sane){e.msg="invalid distance too far back",A.mode=30;break e}if(B=0,_=f,0===u){if(B+=c-w,w<k){k-=w;do{C[o++]=f[B++]}while(--w);B=o-b,_=C}}else if(u<w){if(B+=c+u-w,w-=u,w<k){k-=w;do{C[o++]=f[B++]}while(--w);if(B=0,u<k){w=u,k-=w;do{C[o++]=f[B++]}while(--w);B=o-b,_=C}}}else if(B+=u-w,w<k){k-=w;do{C[o++]=f[B++]}while(--w);B=o-b,_=C}for(;k>2;)C[o++]=_[B++],C[o++]=_[B++],C[o++]=_[B++],k-=3;k&&(C[o++]=_[B++],k>1&&(C[o++]=_[B++]))}else{B=o-b;do{C[o++]=C[B++],C[o++]=C[B++],C[o++]=C[B++],k-=3}while(k>2);k&&(C[o++]=C[B++],k>1&&(C[o++]=C[B++]))}break}}break}}while(r<n&&o<i);k=h>>3,r-=k,h-=k<<3,d&=(1<<h)-1,e.next_in=r,e.next_out=o,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=o<i?i-o+257:257-(o-i),A.hold=d,A.bits=h};const ur=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fr=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dr=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var pr=(e,t,r,n,o,a,i,s)=>{const c=s.bits;let l,u,f,d,h,p,g=0,m=0,y=0,v=0,w=0,k=0,b=0,B=0,_=0,E=0,C=null,A=0;const S=new Uint16Array(16),P=new Uint16Array(16);let R,x,I,T=null,D=0;for(g=0;g<=15;g++)S[g]=0;for(m=0;m<n;m++)S[t[r+m]]++;for(w=c,v=15;v>=1&&0===S[v];v--);if(w>v&&(w=v),0===v)return o[a++]=20971520,o[a++]=20971520,s.bits=1,0;for(y=1;y<v&&0===S[y];y++);for(w<y&&(w=y),B=1,g=1;g<=15;g++)if(B<<=1,B-=S[g],B<0)return-1;if(B>0&&(0===e||1!==v))return-1;for(P[1]=0,g=1;g<15;g++)P[g+1]=P[g]+S[g];for(m=0;m<n;m++)0!==t[r+m]&&(i[P[t[r+m]]++]=m);if(0===e?(C=T=i,p=19):1===e?(C=ur,A-=257,T=fr,D-=257,p=256):(C=dr,T=hr,p=-1),E=0,m=0,g=y,h=a,k=w,b=0,f=-1,_=1<<w,d=_-1,1===e&&_>852||2===e&&_>592)return 1;for(;;){R=g-b,i[m]<p?(x=0,I=i[m]):i[m]>p?(x=T[D+i[m]],I=C[A+i[m]]):(x=96,I=0),l=1<<g-b,u=1<<k,y=u;do{u-=l,o[h+(E>>b)+u]=R<<24|x<<16|I|0}while(0!==u);for(l=1<<g-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,m++,0==--S[g]){if(g===v)break;g=t[r+i[m]]}if(g>w&&(E&d)!==f){for(0===b&&(b=w),h+=y,k=g-b,B=1<<k;k+b<v&&(B-=S[k+b],!(B<=0));)k++,B<<=1;if(_+=1<<k,1===e&&_>852||2===e&&_>592)return 1;f=E&d,o[f]=w<<24|k<<16|h-a|0}}return 0!==E&&(o[h+E]=g-b<<24|4194304),s.bits=w,0};const{Z_FINISH:gr,Z_BLOCK:mr,Z_TREES:yr,Z_OK:vr,Z_STREAM_END:wr,Z_NEED_DICT:kr,Z_STREAM_ERROR:br,Z_DATA_ERROR:Br,Z_MEM_ERROR:_r,Z_BUF_ERROR:Er,Z_DEFLATED:Cr}=$e,Ar=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Sr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Pr=e=>{if(!e||!e.state)return br;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,vr},Rr=e=>{if(!e||!e.state)return br;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Pr(e)},xr=(e,t)=>{let r;if(!e||!e.state)return br;const n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?br:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Rr(e))},Ir=(e,t)=>{if(!e)return br;const r=new Sr;e.state=r,r.window=null;const n=xr(e,t);return n!==vr&&(e.state=null),n};let Tr,Dr,Or=!0;const Mr=e=>{if(Or){Tr=new Int32Array(512),Dr=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(pr(1,e.lens,0,288,Tr,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;pr(2,e.lens,0,32,Dr,0,e.work,{bits:5}),Or=!1}e.lencode=Tr,e.lenbits=9,e.distcode=Dr,e.distbits=5},Nr=(e,t,r,n)=>{let o;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>n&&(o=n),a.window.set(t.subarray(r-n,r-n+o),a.wnext),(n-=o)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0};var Lr={inflateReset:Rr,inflateReset2:xr,inflateResetKeep:Pr,inflateInit:e=>Ir(e,15),inflateInit2:Ir,inflate:(e,t)=>{let r,n,o,a,i,s,c,l,u,f,d,h,p,g,m,y,v,w,k,b,B,_,E=0;const C=new Uint8Array(4);let A,S;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return br;r=e.state,12===r.mode&&(r.mode=13),i=e.next_out,o=e.output,c=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,l=r.hold,u=r.bits,f=s,d=c,_=vr;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(2&r.wrap&&35615===l){r.check=0,C[0]=255&l,C[1]=l>>>8&255,r.check=qe(r.check,C,2,0),l=0,u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=30;break}if((15&l)!==Cr){e.msg="unknown compression method",r.mode=30;break}if(l>>>=4,u-=4,B=8+(15&l),0===r.wbits)r.wbits=B;else if(B>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&l?10:12,l=0,u=0;break;case 2:for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==Cr){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(C[0]=255&l,C[1]=l>>>8&255,r.check=qe(r.check,C,2,0)),l=0,u=0,r.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&(C[0]=255&l,C[1]=l>>>8&255,C[2]=l>>>16&255,C[3]=l>>>24&255,r.check=qe(r.check,C,4,0)),l=0,u=0,r.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(C[0]=255&l,C[1]=l>>>8&255,r.check=qe(r.check,C,2,0)),l=0,u=0,r.mode=5;case 5:if(1024&r.flags){for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(C[0]=255&l,C[1]=l>>>8&255,r.check=qe(r.check,C,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(h=r.length,h>s&&(h=s),h&&(r.head&&(B=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+h),B)),512&r.flags&&(r.check=qe(r.check,n,h,a)),s-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break e;h=0;do{B=n[a+h++],r.head&&B&&r.length<65536&&(r.head.name+=String.fromCharCode(B))}while(B&&h<s);if(512&r.flags&&(r.check=qe(r.check,n,h,a)),s-=h,a+=h,B)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break e;h=0;do{B=n[a+h++],r.head&&B&&r.length<65536&&(r.head.comment+=String.fromCharCode(B))}while(B&&h<s);if(512&r.flags&&(r.check=qe(r.check,n,h,a)),s-=h,a+=h,B)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}e.adler=r.check=Ar(l),l=0,u=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=i,e.avail_out=c,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,kr;e.adler=r.check=1,r.mode=12;case 12:if(t===mr||t===yr)break e;case 13:if(r.last){l>>>=7&u,u-=7&u,r.mode=27;break}for(;u<3;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=14;break;case 1:if(Mr(r),r.mode=20,t===yr){l>>>=2,u-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&l,l=0,u=0,r.mode=15,t===yr)break e;case 15:r.mode=16;case 16:if(h=r.length,h){if(h>s&&(h=s),h>c&&(h=c),0===h)break e;o.set(n.subarray(a,a+h),i),s-=h,a+=h,c-=h,i+=h,r.length-=h;break}r.mode=12;break;case 17:for(;u<14;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;u<3;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.lens[P[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[P[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},_=pr(0,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,_){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[l&(1<<r.lenbits)-1],m=E>>>24,y=E>>>16&255,v=65535&E,!(m<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(v<16)l>>>=m,u-=m,r.lens[r.have++]=v;else{if(16===v){for(S=m+2;u<S;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l>>>=m,u-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}B=r.lens[r.have-1],h=3+(3&l),l>>>=2,u-=2}else if(17===v){for(S=m+3;u<S;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}l>>>=m,u-=m,B=0,h=3+(7&l),l>>>=3,u-=3}else{for(S=m+7;u<S;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}l>>>=m,u-=m,B=0,h=11+(127&l),l>>>=7,u-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;h--;)r.lens[r.have++]=B}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,A={bits:r.lenbits},_=pr(1,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,_){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},_=pr(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,_){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,t===yr)break e;case 20:r.mode=21;case 21:if(s>=6&&c>=258){e.next_out=i,e.avail_out=c,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,lr(e,d),i=e.next_out,o=e.output,c=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,l=r.hold,u=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;E=r.lencode[l&(1<<r.lenbits)-1],m=E>>>24,y=E>>>16&255,v=65535&E,!(m<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(y&&0==(240&y)){for(w=m,k=y,b=v;E=r.lencode[b+((l&(1<<w+k)-1)>>w)],m=E>>>24,y=E>>>16&255,v=65535&E,!(w+m<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,r.back+=w}if(l>>>=m,u-=m,r.back+=m,r.length=v,0===y){r.mode=26;break}if(32&y){r.back=-1,r.mode=12;break}if(64&y){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&y,r.mode=22;case 22:if(r.extra){for(S=r.extra;u<S;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;E=r.distcode[l&(1<<r.distbits)-1],m=E>>>24,y=E>>>16&255,v=65535&E,!(m<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(0==(240&y)){for(w=m,k=y,b=v;E=r.distcode[b+((l&(1<<w+k)-1)>>w)],m=E>>>24,y=E>>>16&255,v=65535&E,!(w+m<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,r.back+=w}if(l>>>=m,u-=m,r.back+=m,64&y){e.msg="invalid distance code",r.mode=30;break}r.offset=v,r.extra=15&y,r.mode=24;case 24:if(r.extra){for(S=r.extra;u<S;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===c)break e;if(h=d-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}h>r.wnext?(h-=r.wnext,p=r.wsize-h):p=r.wnext-h,h>r.length&&(h=r.length),g=r.window}else g=o,p=i-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do{o[i++]=g[p++]}while(--h);0===r.length&&(r.mode=21);break;case 26:if(0===c)break e;o[i++]=r.length,c--,r.mode=21;break;case 27:if(r.wrap){for(;u<32;){if(0===s)break e;s--,l|=n[a++]<<u,u+=8}if(d-=c,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?qe(r.check,o,d,i-d):Ze(r.check,o,d,i-d)),d=c,(r.flags?l:Ar(l))!==r.check){e.msg="incorrect data check",r.mode=30;break}l=0,u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}l=0,u=0}r.mode=29;case 29:_=wr;break e;case 30:_=Br;break e;case 31:return _r;default:return br}return e.next_out=i,e.avail_out=c,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,(r.wsize||d!==e.avail_out&&r.mode<30&&(r.mode<27||t!==gr))&&Nr(e,e.output,e.next_out,d-e.avail_out),f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?qe(r.check,o,d,e.next_out-d):Ze(r.check,o,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===f&&0===d||t===gr)&&_===vr&&(_=Er),_},inflateEnd:e=>{if(!e||!e.state)return br;let t=e.state;return t.window&&(t.window=null),e.state=null,vr},inflateGetHeader:(e,t)=>{if(!e||!e.state)return br;const r=e.state;return 0==(2&r.wrap)?br:(r.head=t,t.done=!1,vr)},inflateSetDictionary:(e,t)=>{const r=t.length;let n,o,a;return e&&e.state?(n=e.state,0!==n.wrap&&11!==n.mode?br:11===n.mode&&(o=1,o=Ze(o,t,r,0),o!==n.check)?Br:(a=Nr(e,t,r,r),a?(n.mode=31,_r):(n.havedict=1,vr))):br},inflateInfo:"pako inflate (from Nodeca project)"};var Ur=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Hr=Object.prototype.toString,{Z_NO_FLUSH:Kr,Z_FINISH:zr,Z_OK:Fr,Z_STREAM_END:jr,Z_NEED_DICT:Wr,Z_STREAM_ERROR:Jr,Z_DATA_ERROR:Vr,Z_MEM_ERROR:Zr}=$e;function Yr(e){this.options=Ft({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qt,this.strm.avail_out=0;let r=Lr.inflateInit2(this.strm,t.windowBits);if(r!==Fr)throw new Error(Ge[r]);if(this.header=new Ur,Lr.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Vt(t.dictionary):"[object ArrayBuffer]"===Hr.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Lr.inflateSetDictionary(this.strm,t.dictionary),r!==Fr)))throw new Error(Ge[r])}function qr(e,t){const r=new Yr(t);if(r.push(e),r.err)throw r.msg||Ge[r.err];return r.result}Yr.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let a,i,s;if(this.ended)return!1;for(i=t===~~t?t:!0===t?zr:Kr,"[object ArrayBuffer]"===Hr.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Lr.inflate(r,i),a===Wr&&o&&(a=Lr.inflateSetDictionary(r,o),a===Fr?a=Lr.inflate(r,i):a===Vr&&(a=Wr));r.avail_in>0&&a===jr&&r.state.wrap>0&&0!==e[r.next_in];)Lr.inflateReset(r),a=Lr.inflate(r,i);switch(a){case Jr:case Vr:case Wr:case Zr:return this.onEnd(a),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(0===r.avail_out||a===jr))if("string"===this.options.to){let e=Yt(r.output,r.next_out),t=r.next_out-e,o=Zt(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(o)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==Fr||0!==s){if(a===jr)return a=Lr.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},Yr.prototype.onData=function(e){this.chunks.push(e)},Yr.prototype.onEnd=function(e){e===Fr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=jt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Gr={Inflate:Yr,inflate:qr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,qr(e,t)},ungzip:qr,constants:$e};const{Deflate:$r,deflate:Qr,deflateRaw:Xr,gzip:en}=cr,{Inflate:tn,inflate:rn,inflateRaw:nn,ungzip:on}=Gr;var an,sn=nn,cn={};e(cn,"low",(()=>yl)),e(cn,"verify",(()=>ll)),e(cn,"Context",(()=>Xc)),e(cn,"LogLevel",(()=>qc)),e(cn,"ErrorCode",(()=>an)),e(cn,"directory",(()=>al)),function(e){e[e.NOERROR=0]="NOERROR",e[e.ERROR=100]="ERROR",e[e.PARAMETER_INVALID=101]="PARAMETER_INVALID",e[e.QR_DECODE_ERROR=102]="QR_DECODE_ERROR",e[e.SHC_DECODE_ERROR=103]="SHC_DECODE_ERROR",e[e.SHC_ENCODE_ERROR=104]="SHC_ENCODE_ERROR",e[e.SHC_FORMAT_ERROR=105]="SHC_FORMAT_ERROR",e[e.JWS_COMPACT_DECODE_ERROR=106]="JWS_COMPACT_DECODE_ERROR",e[e.JWS_COMPACT_ENCODE_ERROR=107]="JWS_COMPACT_ENCODE_ERROR",e[e.JWS_COMPACT_FORMAT_ERROR=108]="JWS_COMPACT_FORMAT_ERROR",e[e.JWS_COMPACT_MISSING=109]="JWS_COMPACT_MISSING",e[e.JWS_MISSING=110]="JWS_MISSING",e[e.JWS_MISSING_HEADER=111]="JWS_MISSING_HEADER",e[e.JWS_MISSING_PAYLOAD=112]="JWS_MISSING_PAYLOAD",e[e.JWS_MISSING_SIGNATURE=113]="JWS_MISSING_SIGNATURE",e[e.JWS_ENCODE_FAIL=114]="JWS_ENCODE_FAIL",e[e.JWS_HEADER_DECODE_FAIL=115]="JWS_HEADER_DECODE_FAIL",e[e.JWS_HEADER_ENCODE_FAIL=116]="JWS_HEADER_ENCODE_FAIL",e[e.JWS_HEADER_ERROR=117]="JWS_HEADER_ERROR",e[e.JWS_HEADER_GENERATE_FAIL=118]="JWS_HEADER_GENERATE_FAIL",e[e.JWS_SIGNATURE_DECODE_FAIL=119]="JWS_SIGNATURE_DECODE_FAIL",e[e.JWS_SIGNATURE_ENCODE_FAIL=120]="JWS_SIGNATURE_ENCODE_FAIL",e[e.JWS_SIGNATURE_MISSING=121]="JWS_SIGNATURE_MISSING",e[e.JWS_SIGNATURE_NO_PUBLIC_KEYS=122]="JWS_SIGNATURE_NO_PUBLIC_KEYS",e[e.JWS_SIGNATURE_FORMAT_ERROR=123]="JWS_SIGNATURE_FORMAT_ERROR",e[e.JWS_PAYLOAD_DECODE_ERROR=124]="JWS_PAYLOAD_DECODE_ERROR",e[e.JWS_PAYLOAD_ENCODE_ERROR=125]="JWS_PAYLOAD_ENCODE_ERROR",e[e.JWS_PAYLOAD_ERROR=126]="JWS_PAYLOAD_ERROR",e[e.JWS_PAYLOAD_ISS_MISSING=127]="JWS_PAYLOAD_ISS_MISSING",e[e.JWS_PAYLOAD_NOT_DEFLATED=128]="JWS_PAYLOAD_NOT_DEFLATED",e[e.JWS_PAYLOAD_FUTURE_NBF=129]="JWS_PAYLOAD_FUTURE_NBF",e[e.SIGNATURE_INVALID=130]="SIGNATURE_INVALID",e[e.DIRECTORY_ERROR=131]="DIRECTORY_ERROR",e[e.DIRECTORY_ISSUER_MISSING_ISS=132]="DIRECTORY_ISSUER_MISSING_ISS",e[e.DIRECTORY_ISSUER_INVALID_PROPERTY=133]="DIRECTORY_ISSUER_INVALID_PROPERTY",e[e.DIRECTORY_MISSING=134]="DIRECTORY_MISSING",e[e.DIRECTORY_ISSUER_NOT_FOUND=135]="DIRECTORY_ISSUER_NOT_FOUND",e[e.DIRECTORY_KEY_NOT_FOUND=136]="DIRECTORY_KEY_NOT_FOUND",e[e.DIRECTORY_SCHEMA_ERROR=137]="DIRECTORY_SCHEMA_ERROR",e[e.KEYS_ONLY_MATCH=138]="KEYS_ONLY_MATCH",e[e.JWK_UNEXPECTED_PROPERTY=139]="JWK_UNEXPECTED_PROPERTY",e[e.JWK_INVALID_PROPERTY=140]="JWK_INVALID_PROPERTY",e[e.JWK_INCORRECT_KID=141]="JWK_INCORRECT_KID",e[e.CRYPTO_FAILURE=142]="CRYPTO_FAILURE",e[e.DOWNLOAD_FAILED=143]="DOWNLOAD_FAILED",e[e.FHIR_VALIDATION_ERROR=144]="FHIR_VALIDATION_ERROR"}(an||(an={}));var ln,un,fn,dn,hn={};e(hn,"create",(()=>ln),(e=>ln=e)),e(hn,"toCanvas",(()=>un),(e=>un=e)),e(hn,"toDataURL",(()=>fn),(e=>fn=e)),e(hn,"toString",(()=>dn),(e=>dn=e));var pn,gn,mn,yn,vn,wn,kn,bn;let Bn;pn=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then};const _n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];var En,Cn,An,Sn,Pn,Rn;mn=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},yn=function(e){return _n[e]},vn=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},wn=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');Bn=e},kn=function(){return void 0!==Bn},bn=function(e){return Bn(e)},En={bit:1},Cn={bit:0},An={bit:3},Sn={bit:2},Pn=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},Rn=function(e,t){if(Pn(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return En;case"m":case"medium":return Cn;case"q":case"quartile":return An;case"h":case"high":return Sn;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return t}};var xn={};function In(){this.buffer=[],this.length=0}In.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},xn=In;var Tn,Dn,On={};function Mn(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Mn.prototype.set=function(e,t,r,n){const o=e*this.size+t;this.data[o]=r,n&&(this.reservedBit[o]=!0)},Mn.prototype.get=function(e,t){return this.data[e*this.size+t]},Mn.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},Mn.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},On=Mn;var Nn,Ln=mn;Tn=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,r=Ln(e),n=145===r?26:2*Math.ceil((r-13)/(2*t-2)),o=[r-7];for(let e=1;e<t-1;e++)o[e]=o[e-1]-n;return o.push(6),o.reverse()},Dn=function(e){const t=[],r=Tn(e),n=r.length;for(let e=0;e<n;e++)for(let o=0;o<n;o++)0===e&&0===o||0===e&&o===n-1||e===n-1&&0===o||t.push([r[e],r[o]]);return t};var Un=mn;var Hn,Kn,zn,Fn,jn,Wn,Jn,Vn,Zn;Nn=function(e){const t=Un(e);return[[0,0],[t-7,0],[0,t-7]]},Hn={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const Yn=3,qn=3,Gn=40,$n=10;function Qn(e,t,r){switch(e){case Hn.PATTERN000:return(t+r)%2==0;case Hn.PATTERN001:return t%2==0;case Hn.PATTERN010:return r%3==0;case Hn.PATTERN011:return(t+r)%3==0;case Hn.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case Hn.PATTERN101:return t*r%2+t*r%3==0;case Hn.PATTERN110:return(t*r%2+t*r%3)%2==0;case Hn.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}var Xn,eo;Kn=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},zn=function(e){return Kn(e)?parseInt(e,10):void 0},Fn=function(e){const t=e.size;let r=0,n=0,o=0,a=null,i=null;for(let s=0;s<t;s++){n=o=0,a=i=null;for(let c=0;c<t;c++){let t=e.get(s,c);t===a?n++:(n>=5&&(r+=Yn+(n-5)),a=t,n=1),t=e.get(c,s),t===i?o++:(o>=5&&(r+=Yn+(o-5)),i=t,o=1)}n>=5&&(r+=Yn+(n-5)),o>=5&&(r+=Yn+(o-5))}return r},jn=function(e){const t=e.size;let r=0;for(let n=0;n<t-1;n++)for(let o=0;o<t-1;o++){const t=e.get(n,o)+e.get(n,o+1)+e.get(n+1,o)+e.get(n+1,o+1);4!==t&&0!==t||r++}return r*qn},Wn=function(e){const t=e.size;let r=0,n=0,o=0;for(let a=0;a<t;a++){n=o=0;for(let i=0;i<t;i++)n=n<<1&2047|e.get(a,i),i>=10&&(1488===n||93===n)&&r++,o=o<<1&2047|e.get(i,a),i>=10&&(1488===o||93===o)&&r++}return r*Gn},Jn=function(e){let t=0;const r=e.data.length;for(let n=0;n<r;n++)t+=e.data[n];return Math.abs(Math.ceil(100*t/r/5)-10)*$n},Vn=function(e,t){const r=t.size;for(let n=0;n<r;n++)for(let o=0;o<r;o++)t.isReserved(o,n)||t.xor(o,n,Qn(e,o,n))},Zn=function(e,t){const r=Object.keys(Hn).length;let n=0,o=1/0;for(let a=0;a<r;a++){t(a),Vn(a,e);const r=Fn(e)+jn(e)+Wn(e)+Jn(e);Vn(a,e),r<o&&(o=r,n=a)}return n};const to=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ro=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Xn=function(e,t){switch(t){case En:return to[4*(e-1)+0];case Cn:return to[4*(e-1)+1];case An:return to[4*(e-1)+2];case Sn:return to[4*(e-1)+3];default:return}},eo=function(e,t){switch(t){case En:return ro[4*(e-1)+0];case Cn:return ro[4*(e-1)+1];case An:return ro[4*(e-1)+2];case Sn:return ro[4*(e-1)+3];default:return}};var no,oo,ao,io,so,co={};const lo=new Uint8Array(512),uo=new Uint8Array(256);function fo(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}var ho,po,go,mo,yo,vo,wo,ko,bo,Bo,_o,Eo,Co,Ao,So,Po,Ro,xo,Io,To,Do,Oo,Mo;!function(){let e=1;for(let t=0;t<255;t++)lo[t]=e,uo[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)lo[e]=lo[e-255]}(),io=function(e){return lo[e]},so=function(e,t){return 0===e||0===t?0:lo[uo[e]+uo[t]]},no=function(e,t){const r=new Uint8Array(e.length+t.length-1);for(let n=0;n<e.length;n++)for(let o=0;o<t.length;o++)r[n+o]^=so(e[n],t[o]);return r},oo=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){const e=r[0];for(let n=0;n<t.length;n++)r[n]^=so(t[n],e);let n=0;for(;n<r.length&&0===r[n];)n++;r=r.slice(n)}return r},ao=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=no(t,new Uint8Array([1,io(r)]));return t},fo.prototype.initialize=function(e){this.degree=e,this.genPoly=ao(this.degree)},fo.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=oo(t,this.genPoly),n=this.degree-r.length;if(n>0){const e=new Uint8Array(this.degree);return e.set(r,n),e}return r},co=fo,So=function(e){return!isNaN(e)&&e>=1&&e<=40};let No="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";No=No.replace(/u/g,"\\u");const Lo="(?:(?![A-Z0-9 $%*+\\-./:]|"+No+")(?:.|[\r\n]))+";Po=new RegExp(No,"g"),Ro=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),xo=new RegExp(Lo,"g"),Io=new RegExp("[0-9]+","g"),To=new RegExp("[A-Z $%*+\\-./:]+","g");const Uo=new RegExp("^"+No+"$"),Ho=new RegExp("^[0-9]+$"),Ko=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Do=function(e){return Uo.test(e)},Oo=function(e){return Ho.test(e)},Mo=function(e){return Ko.test(e)},yo={id:"Numeric",bit:1,ccBits:[10,12,14]},vo={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},wo={id:"Byte",bit:4,ccBits:[8,16,16]},ko={id:"Kanji",bit:8,ccBits:[8,10,12]},bo={bit:-1},Bo=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!So(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},_o=function(e){return Oo(e)?yo:Mo(e)?vo:Do(e)?ko:wo},Eo=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},Co=function(e){return e&&e.bit&&e.ccBits},Ao=function(e,t){if(Co(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return yo;case"alphanumeric":return vo;case"kanji":return ko;case"byte":return wo;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return t}};const zo=vn(7973);function Fo(e,t){return Bo(e,t)+4}function jo(e,t){let r=0;return e.forEach((function(e){const n=Fo(e.mode,t);r+=n+e.getBitsLength()})),r}var Wo;ho=function(e,t){return So(e)?parseInt(e,10):t},po=function(e,t,r){if(!So(e))throw new Error("Invalid QR Code version");void 0===r&&(r=wo);const n=8*(yn(e)-eo(e,t));if(r===bo)return n;const o=n-Fo(r,e);switch(r){case yo:return Math.floor(o/10*3);case vo:return Math.floor(o/11*2);case ko:return Math.floor(o/13);default:return Math.floor(o/8)}},go=function(e,t){let r;const n=Rn(t,Cn);if(Array.isArray(e)){if(e.length>1)return function(e,t){for(let r=1;r<=40;r++)if(jo(e,r)<=po(r,t,bo))return r}(e,n);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,t,r){for(let n=1;n<=40;n++)if(t<=po(n,r,e))return n}(r.mode,r.getLength(),n)},mo=function(e){if(!So(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;vn(t)-zo>=0;)t^=7973<<vn(t)-zo;return e<<12|t};const Jo=vn(1335);var Vo,Zo,Yo;Wo=function(e,t){const r=e.bit<<3|t;let n=r<<10;for(;vn(n)-Jo>=0;)n^=1335<<vn(n)-Jo;return 21522^(r<<10|n)};var qo={};function Go(e){this.mode=yo,this.data=e.toString()}Go.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Go.prototype.getLength=function(){return this.data.length},Go.prototype.getBitsLength=function(){return Go.getBitsLength(this.data.length)},Go.prototype.write=function(e){let t,r,n;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),n=parseInt(r,10),e.put(n,10);const o=this.data.length-t;o>0&&(r=this.data.substr(t),n=parseInt(r,10),e.put(n,3*o+1))},qo=Go;var $o={};const Qo=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Xo(e){this.mode=vo,this.data=e}Xo.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},Xo.prototype.getLength=function(){return this.data.length},Xo.prototype.getBitsLength=function(){return Xo.getBitsLength(this.data.length)},Xo.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*Qo.indexOf(this.data[t]);r+=Qo.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(Qo.indexOf(this.data[t]),6)},$o=Xo;var ea,ta={};function ra(e){this.mode=wo,this.data=new Uint8Array(ea(e))}ea=function(e){for(var t=[],r=e.length,n=0;n<r;n++){var o=e.charCodeAt(n);if(o>=55296&&o<=56319&&r>n+1){var a=e.charCodeAt(n+1);a>=56320&&a<=57343&&(o=1024*(o-55296)+a-56320+65536,n+=1)}o<128?t.push(o):o<2048?(t.push(o>>6|192),t.push(63&o|128)):o<55296||o>=57344&&o<65536?(t.push(o>>12|224),t.push(o>>6&63|128),t.push(63&o|128)):o>=65536&&o<=1114111?(t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(63&o|128)):t.push(239,191,189)}return new Uint8Array(t).buffer},ra.getBitsLength=function(e){return 8*e},ra.prototype.getLength=function(){return this.data.length},ra.prototype.getBitsLength=function(){return ra.getBitsLength(this.data.length)},ra.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},ta=ra;var na={};function oa(e){this.mode=ko,this.data=e}oa.getBitsLength=function(e){return 13*e},oa.prototype.getLength=function(){return this.data.length},oa.prototype.getBitsLength=function(){return oa.getBitsLength(this.data.length)},oa.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=bn(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else{if(!(r>=57408&&r<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13)}},na=oa;var aa,ia,sa,ca,la,ua,fa,da={},ha={single_source_shortest_paths:function(e,t,r){var n={},o={};o[t]=0;var a,i,s,c,l,u,f,d=ha.PriorityQueue.make();for(d.push(t,0);!d.empty();)for(s in i=(a=d.pop()).value,c=a.cost,l=e[i]||{})l.hasOwnProperty(s)&&(u=c+l[s],f=o[s],(void 0===o[s]||f>u)&&(o[s]=u,d.push(s,u),n[s]=i));if(void 0!==r&&void 0===o[r]){var h=["Could not find a path from ",t," to ",r,"."].join("");throw new Error(h)}return n},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,t,r){var n=ha.single_source_shortest_paths(e,t,r);return ha.extract_shortest_path_from_predecessor_list(n,r)},PriorityQueue:{make:function(e){var t,r=ha.PriorityQueue,n={};for(t in e=e||{},r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.queue=[],n.sorter=e.sorter||r.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var r={value:e,cost:t};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};function pa(e){return unescape(encodeURIComponent(e)).length}function ga(e,t,r){const n=[];let o;for(;null!==(o=e.exec(r));)n.push({data:o[0],index:o.index,mode:t,length:o[0].length});return n}function ma(e){const t=ga(Io,yo,e),r=ga(To,vo,e);let n,o;kn()?(n=ga(xo,wo,e),o=ga(Po,ko,e)):(n=ga(Ro,wo,e),o=[]);return t.concat(r,n,o).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function ya(e,t){switch(t){case yo:return qo.getBitsLength(e);case vo:return $o.getBitsLength(e);case ko:return na.getBitsLength(e);case wo:return ta.getBitsLength(e)}}function va(e,t){let r;const n=_o(e);if(r=Ao(t,n),r!==wo&&r.bit<n.bit)throw new Error('"'+e+'" cannot be encoded with mode '+Eo(r)+".\n Suggested mode is: "+Eo(n));switch(r!==ko||kn()||(r=wo),r){case yo:return new qo(e);case vo:return new $o(e);case ko:return new na(e);case wo:return new ta(e)}}function wa(e,t,r){const n=e.size,o=Wo(t,r);let a,i;for(a=0;a<15;a++)i=1==(o>>a&1),a<6?e.set(a,8,i,!0):a<8?e.set(a+1,8,i,!0):e.set(n-15+a,8,i,!0),a<8?e.set(8,n-a-1,i,!0):a<9?e.set(8,15-a-1+1,i,!0):e.set(8,15-a-1,i,!0);e.set(n-8,8,1,!0)}function ka(e,t,r){const n=new xn;r.forEach((function(t){n.put(t.mode.bit,4),n.put(t.getLength(),Bo(t.mode,e)),t.write(n)}));const o=8*(yn(e)-eo(e,t));for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let e=0;e<a;e++)n.put(e%2?17:236,8);return function(e,t,r){const n=yn(t),o=eo(t,r),a=n-o,i=Xn(t,r),s=i-n%i,c=Math.floor(n/i),l=Math.floor(a/i),u=l+1,f=c-l,d=new co(f);let h=0;const p=new Array(i),g=new Array(i);let m=0;const y=new Uint8Array(e.buffer);for(let e=0;e<i;e++){const t=e<s?l:u;p[e]=y.slice(h,h+t),g[e]=d.encode(p[e]),h+=t,m=Math.max(m,t)}const v=new Uint8Array(n);let w,k,b=0;for(w=0;w<m;w++)for(k=0;k<i;k++)w<p[k].length&&(v[b++]=p[k][w]);for(w=0;w<f;w++)for(k=0;k<i;k++)v[b++]=g[k][w];return v}(n,e,t)}function ba(e,t,r,n){let o;if(Array.isArray(e))o=Vo(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let n=t;if(!n){const t=Yo(e);n=go(t,r)}o=Zo(e,n||40)}}const a=go(o,r);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<a)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+a+".\n")}else t=a;const i=ka(t,r,o),s=mn(t),c=new On(s);return function(e,t){const r=e.size,n=Nn(t);for(let t=0;t<n.length;t++){const o=n[t][0],a=n[t][1];for(let t=-1;t<=7;t++)if(!(o+t<=-1||r<=o+t))for(let n=-1;n<=7;n++)a+n<=-1||r<=a+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(o+t,a+n,!0,!0):e.set(o+t,a+n,!1,!0))}}(c,t),function(e){const t=e.size;for(let r=8;r<t-8;r++){const t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(c),function(e,t){const r=Dn(t);for(let t=0;t<r.length;t++){const n=r[t][0],o=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(n+t,o+r,!0,!0):e.set(n+t,o+r,!1,!0)}}(c,t),wa(c,r,0),t>=7&&function(e,t){const r=e.size,n=mo(t);let o,a,i;for(let t=0;t<18;t++)o=Math.floor(t/3),a=t%3+r-8-3,i=1==(n>>t&1),e.set(o,a,i,!0),e.set(a,o,i,!0)}(c,t),function(e,t){const r=e.size;let n=-1,o=r-1,a=7,i=0;for(let s=r-1;s>0;s-=2)for(6===s&&s--;;){for(let r=0;r<2;r++)if(!e.isReserved(o,s-r)){let n=!1;i<t.length&&(n=1==(t[i]>>>a&1)),e.set(o,s-r,n),a--,-1===a&&(i++,a=7)}if(o+=n,o<0||r<=o){o-=n,n=-n;break}}}(c,i),isNaN(n)&&(n=Zn(c,wa.bind(null,c,r))),Vn(n,c),wa(c,r,n),{modules:c,version:t,errorCorrectionLevel:r,maskPattern:n,segments:o}}function Ba(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}function _a(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Ea(e,t,r){let n=e+t;return void 0!==r&&(n+=" "+r),n}function Ca(e,t,r,n,o){const a=[].slice.call(arguments,1),i=a.length,s="function"==typeof a[i-1];if(!s&&!pn())throw new Error("Callback required as last argument");if(!s){if(i<1)throw new Error("Too few arguments provided");return 1===i?(r=t,t=n=void 0):2!==i||t.getContext||(n=r,r=t,t=void 0),new Promise((function(o,a){try{const a=gn(r,n);o(e(a,t,n))}catch(e){a(e)}}))}if(i<2)throw new Error("Too few arguments provided");2===i?(o=r,r=t,t=n=void 0):3===i&&(t.getContext&&void 0===o?(o=n,n=void 0):(o=n,n=r,r=t,t=void 0));try{const a=gn(r,n);o(null,e(a,t,n))}catch(e){o(e)}}da=ha,Vo=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(va(t,null)):t.data&&e.push(va(t.data,t.mode)),e}),[])},Zo=function(e,t){const r=function(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];switch(n.mode){case yo:t.push([n,{data:n.data,mode:vo,length:n.length},{data:n.data,mode:wo,length:n.length}]);break;case vo:t.push([n,{data:n.data,mode:wo,length:n.length}]);break;case ko:t.push([n,{data:n.data,mode:wo,length:pa(n.data)}]);break;case wo:t.push([{data:n.data,mode:wo,length:pa(n.data)}])}}return t}(ma(e,kn())),n=function(e,t){const r={},n={start:{}};let o=["start"];for(let a=0;a<e.length;a++){const i=e[a],s=[];for(let e=0;e<i.length;e++){const c=i[e],l=""+a+e;s.push(l),r[l]={node:c,lastCount:0},n[l]={};for(let e=0;e<o.length;e++){const a=o[e];r[a]&&r[a].node.mode===c.mode?(n[a][l]=ya(r[a].lastCount+c.length,c.mode)-ya(r[a].lastCount,c.mode),r[a].lastCount+=c.length):(r[a]&&(r[a].lastCount=c.length),n[a][l]=ya(c.length,c.mode)+4+Bo(c.mode,t))}}o=s}for(let e=0;e<o.length;e++)n[o[e]].end=0;return{map:n,table:r}}(r,t),o=da.find_path(n.map,"start","end"),a=[];for(let e=1;e<o.length-1;e++)a.push(n.table[o[e]].node);return Vo(function(e){return e.reduce((function(e,t){const r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(a))},Yo=function(e){return Vo(ma(e,kn()))},sa=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:r,scale:r?4:n,margin:t,color:{dark:Ba(e.color.dark||"#000000ff"),light:Ba(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},ca=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},la=function(e,t){const r=ca(e,t);return Math.floor((e+2*t.margin)*r)},ua=function(e,t,r){const n=t.modules.size,o=t.modules.data,a=ca(n,r),i=Math.floor((n+2*r.margin)*a),s=r.margin*a,c=[r.color.light,r.color.dark];for(let t=0;t<i;t++)for(let l=0;l<i;l++){let u=4*(t*i+l),f=r.color.light;if(t>=s&&l>=s&&t<i-s&&l<i-s){f=c[o[Math.floor((t-s)/a)*n+Math.floor((l-s)/a)]?1:0]}e[u++]=f.r,e[u++]=f.g,e[u++]=f.b,e[u]=f.a}},aa=function(e,t,r){let n=r,o=t;void 0!==n||t&&t.getContext||(n=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),n=sa(n);const a=la(e.modules.size,n),i=o.getContext("2d"),s=i.createImageData(a,a);return ua(s.data,e,n),function(e,t,r){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=r,t.width=r,t.style.height=r+"px",t.style.width=r+"px"}(i,o,a),i.putImageData(s,0,0),o},ia=function(e,t,r){let n=r;void 0!==n||t&&t.getContext||(n=t,t=void 0),n||(n={});const o=aa(e,t,n),a=n.type||"image/png",i=n.rendererOpts||{};return o.toDataURL(a,i.quality)},fa=function(e,t,r){const n=sa(t),o=e.modules.size,a=e.modules.data,i=o+2*n.margin,s=n.color.light.a?"<path "+_a(n.color.light,"fill")+' d="M0 0h'+i+"v"+i+'H0z"/>':"",c="<path "+_a(n.color.dark,"stroke")+' d="'+function(e,t,r){let n="",o=0,a=!1,i=0;for(let s=0;s<e.length;s++){const c=Math.floor(s%t),l=Math.floor(s/t);c||a||(a=!0),e[s]?(i++,s>0&&c>0&&e[s-1]||(n+=a?Ea("M",c+r,.5+l+r):Ea("m",o,0),o=0,a=!1),c+1<t&&e[s+1]||(n+=Ea("h",i),i=0)):o++}return n}(a,o,n.margin)+'"/>',l='viewBox="0 0 '+i+" "+i+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+l+' shape-rendering="crispEdges">'+s+c+"</svg>\n";return"function"==typeof r&&r(null,u),u},ln=gn=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let r,n,o=Cn;return void 0!==t&&(o=Rn(t.errorCorrectionLevel,Cn),r=ho(t.version),n=zn(t.maskPattern),t.toSJISFunc&&wn(t.toSJISFunc)),ba(e,r,o,n)},un=Ca.bind(null,aa),fn=Ca.bind(null,ia),dn=Ca.bind(null,(function(e,t,r){return fa(e,r)}));const Aa=/^[\w-]{2,}$/;const Sa={object:function(e){return e&&("function"==typeof e||"object"==typeof e)},stringArray:function(e){return e instanceof Array&&e.every((e=>"string"==typeof e))},base64url:function(e,t=!1){if("string"!=typeof e)return!1;if(!Aa.test(e.trim()))return!1;if(!t)return!0;const r=6*e.length%8;return 0===r||0===("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e.charAt(e.length-1))&(1<<r)-1)}};var Pa={parseJson:function(e){try{return JSON.parse(e)}catch{return}},is:Sa,clone:function(e){return JSON.parse(JSON.stringify(e))},determineArtifact:function(e){return/data:image\/(png|jpeg);base64,[0-9A-Za-z+\/]{2,}={0,2}/.test(e)?"qr":/shc:\/(\d\d)+/.test(e)?"shc":/^\s*[0-9A-Za-z\-_]{2,}\.[0-9A-Za-z\-_]{2,}\.[0-9A-Za-z\-_]{2,}\s*$/.test(e)?"jws.compact":Sa.object(e)&&"header"in e&&"payload"in e&&"signature"in e?Sa.base64url(e.header)?"jws.flat":"jws":void 0}};const Ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function xa(e){for(var t=[],r=0,n=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>>6|192,t[n++]=63&o|128):o<55296||o>57343?(t[n++]=o>>>12|224,t[n++]=o>>>6&63|128,t[n++]=63&o|128):(o=1024*(o-55296)+(e.charCodeAt(++r)-56320)+65536,t[n++]=o>>>18|240,t[n++]=o>>>12&63|128,t[n++]=o>>>6&63|128,t[n++]=63&o|128)}return new Uint8Array(t)}function Ia(e){for(var t,r="",n=0;n<e.length;){var o=e[n++];if((t=o<128?o:o<224?(o<<6)+e[n++]-12416:o<240?(o<<12)+(e[n++]<<6)+e[n++]-925824:(o<<18)+(e[n++]<<12)+(e[n++]<<6)+e[n++]-63447168)>65535){var a=Math.floor((t-65536)/1024)+55296,i=(t-65536)%1024+56320;r+=String.fromCharCode(a,i)}else r+=String.fromCharCode(t)}return r}function Ta(e,t=!1){var r,n,o,a,i,s,c,l;let u="";for(l=0;l<e.length;l+=3)a=(r=e[l])>>2,i=(3&r)<<4|(n=e[l+1])>>4,s=(15&n)<<2|(o=e[l+2])>>6,c=63&o,isNaN(n)?s=c=64:isNaN(o)&&(c=64),u=u+Ra.charAt(a)+Ra.charAt(i)+Ra.charAt(s)+Ra.charAt(c);return t?u.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""):u}function Da(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4!=0;)e+="=";var t,r,n,o,a,i,s,c=[];for(s=0;s<e.length;s+=4)t=Ra.indexOf(e.charAt(s))<<2|(o=Ra.indexOf(e.charAt(s+1)))>>4,r=(15&o)<<4|(a=Ra.indexOf(e.charAt(s+2)))>>2,n=(3&a)<<6|(i=Ra.indexOf(e.charAt(s+3))),c.push(t),64!==a&&c.push(r),64!==i&&c.push(n);return new Uint8Array(c)}var Oa,Ma,Na={textToBytes:xa,bytesToText:Ia,bytesToBase64:Ta,base64ToBytes:Da,textToBase64:function(e,t=!1){return Ta(xa(e),t)},base64ToText:function(e){return Ia(Da(e))}},La={};Oa=La,Ma=function(e){return e=e||{},function(){var t={register:function(e,r,n){t[e]||(t[e]={});var o=t[e];o[r]||(o[r]=n)},exists:function(e,r){return!!t[e]&&!!t[e][r]}},r=function(){if("undefined"!=typeof document)try{throw new Error}catch(t){if(t.stack){var e=/\w+:\/\/(.+?\/)*.+\.js/.exec(t.stack);return e&&e.length>0?e[0]:null}}else if("undefined"!=typeof self)return self.location.href;return null}(),n="undefined"!=typeof Worker,o="function"==typeof importScripts&&self instanceof WorkerGlobalScope,a=!1,s="undefined"!=typeof ArrayBuffer,c=function(){try{return Object.defineProperty({},"oncomplete",{}),!0}catch(e){return!1}}(),l=!1,u=function(e,t,r,n,o){if(c){var a={};n&&(a.get=n),o&&(a.set=o),Object.defineProperty(e,t,a)}else e[t]=r},f={},d=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(t){for(t=t.replace(/-/g,"+").replace(/_/g,"/");t.length%4!=0;)t+="=";var r,n,o,a,i,s,c,l=[];for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),c=0;c<t.length;c+=4)r=e.indexOf(t.charAt(c))<<2|(a=e.indexOf(t.charAt(c+1)))>>4,n=(15&a)<<4|(i=e.indexOf(t.charAt(c+2)))>>2,o=(3&i)<<6|(s=e.indexOf(t.charAt(c+3))),l.push(r),64!==i&&l.push(n),64!==s&&l.push(o);return l}function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function n(e){return[e>>>24&255,e>>>16&255,e>>>8&255,255&e]}function o(e){if(!e)return[];if(e.pop)return e;if("ArrayBuffer"===r(e)?e=new Uint8Array(e):e.BYTES_PER_ELEMENT>1&&(e=new Uint8Array(e.buffer)),1===e.length)return[e[0]];if(e.length<65536)return Array.apply(null,e);for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}return{consoleLog:function(e){"console"in self&&"log"in console&&console.log(e)},toBase64:function(t,n){var a=r(t);if("Array"!==a&&"Uint8Array"!==a&&"ArrayBuffer"!==a)throw new Error("invalid input");var i,s,c,l,u,f,d,h,p="",g=o(t);for(n||(n=!1),h=0;h<g.length;h+=3)l=(i=g[h])>>2,u=(3&i)<<4|(s=g[h+1])>>4,f=(15&s)<<2|(c=g[h+2])>>6,d=63&c,isNaN(s)?f=d=64:isNaN(c)&&(d=64),p=p+e.charAt(l)+e.charAt(u)+e.charAt(f)+e.charAt(d);return n?p.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""):p},fromBase64:t,checkParam:function(e,t,n){if(!e)throw new Error(n);if(t&&r(e)!==t)throw new Error(n);return!0},getObjectType:r,bytesToHexString:function(e,t){var r="";void 0===t&&(t=!1);for(var n=0;n<e.length;n++){t&&n%4==0&&0!==n&&(r+="-");var o=e[n].toString(16).toUpperCase();1===o.length&&(r+="0"),r+=o}return r},bytesToInt32:function(e,t){return e[t=t||0]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},stringToBytes:function(e){for(var t=[],r=0,n=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>>6|192,t[n++]=63&o|128):o<55296||o>57343?(t[n++]=o>>>12|224,t[n++]=o>>>6&63|128,t[n++]=63&o|128):(o=1024*(o-55296)+(e.charCodeAt(++r)-56320)+65536,t[n++]=o>>>18|240,t[n++]=o>>>12&63|128,t[n++]=o>>>6&63|128,t[n++]=63&o|128)}return t},bytesToString:function(e){var t,r="";e=o(e);for(var n=0;n<e.length;){var a=e[n++];if((t=a<128?a:a<224?(a<<6)+e[n++]-12416:a<240?(a<<12)+(e[n++]<<6)+e[n++]-925824:(a<<18)+(e[n++]<<12)+(e[n++]<<6)+e[n++]-63447168)>65535){var i=Math.floor((t-65536)/1024)+55296,s=(t-65536)%1024+56320;r+=String.fromCharCode(i,s)}else r+=String.fromCharCode(t)}return r},unpackData:function(e,r,n){var o,a=t(e),i=[];if(isNaN(r))return a;for(o=0;o<a.length;o+=r)i.push(a.slice(o,o+r));if(n)for(o=0;o<i.length;o++)i[o]=(i[o][0]<<24)+(i[o][1]<<16)+(i[o][2]<<8)+i[o][3];return i},hexToBytesArray:function(e){e=e.replace(/\-/g,"");for(var t=[];e.length>=2;)t.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return t},int32ToBytes:n,int32ArrayToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t=t.concat(n(e[r]));return t},toArray:o,arraysEqual:function(e,t){var r=!0;e.length!==t.length&&(r=!1);for(var n=0;n<e.length;n++)e[n]!==t[n]&&(r=!1);return r},clone:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},xorVectors:function(e,t,r){for(var n=Math.min(e.length,t.length),o=(r=r||new Array(n),0);o<n;o+=1)r[o]=e[o]^t[o];return r},padEnd:function(e,t,r){for(;e.length<r;)e.push(t);return e},padFront:function(e,t,r){for(;e.length<r;)e.unshift(t);return e},getVector:function(e,t){isNaN(t)&&(t=0);for(var r=new Array(e),n=0;n<e;n+=1)r[n]=t;return r},verifyByteArray:function(e){if("Array"!==r(e))return!1;for(var t,n=0;n<e.length;n++)if(t=e[n],isNaN(t)||t<0||t>255)return!1;return!0}}}(),h=function(){var e={0:"CUSTOM",1:"BOOLEAN",2:"INTEGER",3:"BIT STRING",4:"OCTET STRING",5:"NULL",6:"OBJECT IDENTIFIER",16:"SEQUENCE",17:"SET",19:"PRINTABLE STRING",23:"UTCTime"};function t(e,r){var n=new Array(r+1).join(" ")+e.type+" ("+e.length+") "+bytesToHexString(e.data).substring(0,16)+"\n";if(!e.children)return n;for(var o=0;o<e.children.length;o++)n+=t(e.children[o],r+4)+"";return n}return{parse:function t(r,n){n=!!n;var o,a,i,s=e[31&r[0]],c=r[1],l=0,u=!!(32&r[0]);if(128&c)for(l=0,c=0;l<(127&r[1]);l++)c=(c<<8)+r[2+l];if(i=2+l,void 0===s||c>r.length)return null;var f=u?[]:{};if(f.type=s,f.header=i,f.data=r.slice(0,c+i),u||n)for("BIT STRING"===f.type&&0===r[i]&&l++,o=r.slice(i,f.data.length);o.length>0&&null!==(a=t(o));)f.push(a),o=o.slice(a.data.length);return f},encode:function(e){throw new Error("not implemented")},toString:function(e){return t(e,0)}}}(),p=function(){function e(e){return a&&o&&self.postMessage(e),e}return{jsCryptoRunner:function(r){r.data.workerid,r.data.operationType,r.data.operationSubType;var n=r.data.operationType,o=t[n][r.data.algorithm.name],a=r.data;if(!t.exists(n,r.data.algorithm.name))throw new Error("unregistered algorithm.");return a.operationSubType?e({type:a.operationSubType,result:o(a)}):e(o(a))},returnResult:e}}();o&&(self.onmessage=function(e){if(!a&&e.data.prngSeed){var t=e.data.prngSeed;return Y.init(t),a=!0,p.returnResult({initialized:!0})}!0===a&&p.jsCryptoRunner(e)});var g=function(){var e=d;function t(e){var t=e.algorithm.name.slice(0,3).toUpperCase();return"RSA"===t?"RSA":"ECD"===t?"EC":"oct"}function r(e){return e.hash.name.substring(e.hash.name.indexOf("-")+1)}var n={HMAC:function(e){return"HS"+r(e)},"AES-CBC":function(e){return"A"+e.length.toString()+"CBC"},"AES-GCM":function(e){return"A"+e.length.toString()+"GCM"},"RSAES-PKCS1-V1_5":function(e){return"RSA1_5"},"RSASSA-PKCS1-V1_5":function(e){return"RS"+r(e)},"RSA-OAEP":function(e){return"SHA-1"===e.hash.name.toUpperCase()?"RSA-OAEP":"RSA-OAEP-"+r(e)},"RSA-PSS":function(e){return"PS"+r(e)},ECDSA:function(e){return"EC-"+e.namedCurve.substring(e.namedCurve.indexOf("-")+1)}};return{keyToJwkOld:function(r,n){var o={};if(o.kty=t(r),o.extractable=r.extractable,n.pop)o.k=e.toBase64(n,!0);else for(var a in n)n[a].pop&&(o[a]=e.toBase64(n[a],!0));return r.algorithm.namedCurve&&(o.crv=r.algorithm.namedCurve),function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return 0===t[t.length-1]&&t.pop(),t}(JSON.stringify(o,null,"\t"))},keyToJwk:function(r,o){var a={};if(a.kty=t(r),a.ext=r.extractable,n[r.algorithm.name.toUpperCase()]&&(a.alg=n[r.algorithm.name.toUpperCase()](r.algorithm)),a.key_ops=r.usages,o.pop)a.k=e.toBase64(o,!0);else for(var i in o)o[i].pop&&"key_ops"!==i&&(a[i]=e.toBase64(o[i],!0));return r.algorithm.namedCurve&&(a.crv=r.algorithm.namedCurve),a},jwkToKey:function(t,r,n){for(var o=JSON.parse(JSON.stringify(t)),a=0;a<n.length;a+=1){var i=o[n[a]];i&&(o[n[a]]=e.fromBase64(i))}return o}}}(),m=m||function(){for(var e=24,t=Math.floor(3),r=16777215,n=16777216,o=1/n,a=[1,256],i=2;i<=t;i++)a[i]=256*a[i-1];var s=[0],c=[1];function l(e){var t,r=null;if(arguments.length&&"number"!=typeof arguments[0]){if("object"==typeof arguments[0])for(r=new Array(e.length),t=0;t<e.length;t+=1)r[t]=e[t]}else for(r=new Array(e),t=0;t<e;t+=1)r[t]=0;return r}function u(e,t,r,n,o){for(;o-- >0;)r[n+o]=e[t+o]}function f(e){var t,r=0;for(t=0;t<e.length;t+=1)r|=e[t];return!r}function d(e){var r=Math.floor((e.length+t-1)/t),o=new Array(r);o[0]=0;for(var i=0,s=0,c=0,l=e.length-1;l>=0;l--)i+=a[c++]*(255&e[l]),a[c]===n&&(c=0,o[s++]=i,i=0);for(0!==i&&(o[s]=i);null==o[--r];)o[r]=0;return o}function h(t,r){if(void 0===r)if(t<=1)r=1;else{var o=Math.log(t)/Math.LN2;r=Math.ceil(o/e)}for(var a=[];t>0;)a.push(t%n),t=Math.floor(t/n);for(;a.length<r;)a.push(0);return a}function p(e){for(var t=e.length-1;t>=0;t--)if(void 0!==e[t]&&0!==e[t])return t;return 0===e[0]?-1:0}function g(e,t){var r,n,o=0;for(n=0;n<Math.max(e.length,t.length);n++)o=(r=~~e[n]-~~t[n])+(o&-!r);return o}function y(e,t,r){var n=p(e);if(e.length=t||n+1,r)for(;++n<e.length;)e[n]=0;return e.length<=0&&(e[0]=0,e.length=1),e}function v(t,n,o,a){if(void 0===o)o=1;else if(o>=e||o<0)throw new Error("bit count must be smaller than DIGIT_BITS and positive in shiftLeft");void 0===a&&(a=t.length);var i=e-o;n[a]=t[a-1]>>>e-o||n[a];for(var s=a-1;s>0;s--)n[s]=(t[s]<<o|t[s-1]>>>i)&r;n[0]=t[0]<<o&r}function w(t,n,o){var a=t,i=n;n.length<t.length&&(a=n,i=t);var s,c=a.length,l=0;for(s=0;s<c;s+=1)l+=a[s]+i[s],o[s]=l&r,l>>=e;for(s=c;s<i.length;s+=1)l+=i[s],o[s]=l&r,l>>=e;return o.length=i.length,0!==l&&(o[s]=l&r),l}function k(t,n,o){var a=n.length;if(t.length<n.length&&(a=p(n)+1,t.length<a))throw new Error("Subtrahend is longer than minuend, not supported.");var i,s=0;for(i=0;i<a;i+=1)s+=t[i]-n[i],o[i]=s&r,s>>=e;for(;i<t.length;)s+=t[i],o[i++]=s&r,s>>=e;return s}function b(e,t,n){t="number"==typeof t?[t]:t;var a,i,s,c,l,u,f,d,h=e.length,p=t.length;for(a=0;a<h+p;a+=1)n[a]=0;a=0,c=0;for(var g=0;a<p;){for(c=Math.min(c+31,p);a<c;a++)for(d=t[a],i=0;i<h;i++)n[a+i]+=e[i]*d;for(l=0,s=g;s<a+h;s++)f=(u=n[s]+l)&r,n[s]=f,l=(u-f)*o;n[s]=l,g+=31}return n.length=h+p,n}function B(t,o,a,i,s,c){var l,f,d,h,g,m,w,k=p(t)+1,b=p(o)+1;if(k<b)return u(t,0,i,0,t.length),i.length=t.length,y(i),a[0]=0,void(a.length=1);if(0===b||1===b&&0===o[b-1])throw new Error("Division by zero.");if(1===b){for(g=o[0],f=0,w=k-1;w>=0;w--)h=f*n+t[w],a[w]=h/g&r,f=h-a[w]*g&r;return a.length=k,y(a),i[0]=f,void(i.length=1)}var B=23-function(t){for(var r=0,n=0;n<e;n++)r=Math.max(r,-(t>>>n&1)&n);return r}(o[b-1]),_=s||[];_.length=b,v(o,_,B,b);var E=c||[];for(E.length=k,v(t,E,B,k),E[k]=E[k]||0,a.length=k-b+1,i.length=b,w=k-b;w>=0;w--){for(l=Math.floor((E[w+b]*n+E[w+b-1])/_[b-1]),f=E[w+b]*n+E[w+b-1]-l*_[b-1];(l>=n||l*_[b-2]>f*n+E[w+b-2])&&(l-=1,(f+=_[b-1])<n););for(d=0,m=0;m<b;m++)h=l*_[m],g=E[m+w]-d-(h&r),E[m+w]=g&r,d=Math.floor(h/n)-Math.floor(g/n);if(g=E[w+b]-d,E[w+b]=g&r,a[w]=l&r,g<0){for(a[w]=a[w]-1,d=0,m=0;m<b;m++)g=E[m+w]+_[m]+d,E[m+w]=g&r,d=g>>e;E[w+b]=E[w+b]+d&r}}for(m=0;m<b;m++)i[m]=(E[m]>>>B|E[m+1]<<e-B)&r;y(a),y(i)}function _(e,t,r,n,o){var a;if(f(e))return u(t,0,o,0,t.length),o.length=t.length,0;if(f(t))return u(e,0,o,0,e.length),o.length=e.length,0;g(e,t)<0?(a=e.slice(0),u(t,0,o,0,t.length),o.length=t.length):(a=t.slice(0),u(e,0,o,0,e.length),o.length=e.length),y(o),y(a);var i,s,c=new Array(o.length),l=new Array(o.length),d=new Array(o.length),h=void 0!==n;h&&((i=new Array(o.length))[0]=1,i.length=1,n[0]=0,n.length=1);var p=new Array(o.length),m=void 0!==r;m&&((s=new Array(o.length))[0]=0,s.length=1,r[0]=1,r.length=1);for(var v,k=-1,_=r,E=n,C=o;!f(a);)B(o,a,c,l,p,d),m&&(b(c,s,p),w(p,r,p),y(p),v=r,r=s,s=p,p=v),h&&(b(c,i,d),w(d,n,d),y(d),v=n,n=i,i=d,d=v),v=o,o=a,a=l,l=v,k++;return m&&(u(r,0,_,0,r.length),_.length=r.length),h&&(u(n,0,E,0,n.length),E.length=n.length),u(o,0,C,0,o.length),C.length=o.length,k}function E(e,t,r,n){if(n=n||[],0===g(t,s))n[0]=1;else if(0===g(t,c))u(e,0,n,0,e.length),n.length=e.length;else{var o=new C(r);y(e,o.s,!0),o.modExp(e,t,n),n.length=r.length}return n}function C(t,n){function a(t){for(var n=1,o=2,a=3,i=a&t,s=2;s<=e;s+=1)o<i&&(n+=o),o<<=1,i=t*n&(a=a<<1|1);return 1+(~n&r)}function i(e,t,n,a){for(var i,s,u,f,d,h,p,g,y=(a=a||this).m,v=y.length,w=a.mPrime,k=a.m0,b=0,B=0,_=l(v+2);b<v;){for(B=Math.min(v,B+16);b<B;){for(i=~~t[b],u=((s=_[0]+e[0]*i)&r)*w&r,_[1]+=(k*u+s)*o|0,f=1,d=0;f<v;d=f,f+=1)_[d]=_[f]+y[f]*u+e[f]*i;_[d]=_[f],_[f]=0,b++}for(g=0,f=0;f<v;f++)p=(h=_[f]+g)&r,_[f]=p,g=(h-p)*o;_[f]=g}for(b=0;b<v;b+=1)n[b]=_[b];n.length=v;var E=+(m.compareDigits(_,y)>0);m.subtract(n,y,a.temp2),c(E,n,a.temp2)}function s(e,t,r){var n,o,a,i,s;for(n=0;n<e[0].length;n++)r[n]=0;for(o=0;o<e.length;o++)for(i=e[o],a=-(t===o),s=0;s<i.length;s++)r[s]=r[s]|i[s]&a}function c(e,t,r){for(var n=-e,o=~n,a=0;a<t.length;a++)t[a]=t[a]&o|r[a]&n}var u=(n=n||function(e){var t=e.length,r=e[0],n={m:e,mPrime:a(r),m0:r,temp1:l(2*t+1),temp2:l(2*t+1)},o=l(2*e.length);o[o.length]=1,n.mu=[],B(o,e,n.mu,[]);var s=l(2*t+1),c=l(t+1),u=l(2*t+1),f=l(2*t+1),d=c;d[t]=1,B(d,e,s,c,u,f),n.rModM=y(c,t,!0);var h=l(2*t+1),p=h;return p[2*t]=1,B(p,e,s,h,u,f),n.rSquaredModm=y(h,t,!0),n.rCubedModm=l(t),i(h,h,n.rCubedModm,n),n}(t)).m,f=n.mu,d=n.m0,h=u.length,p=l(h+1).slice(0,h);p[0]=1;var v=n.mPrime,w=n.rModM,_=n.rSquaredModm,E=n.rCubedModm,C=l(2*h+1),A=l(2*h+1),S=new Array(4);return S[0]=w,S[1]=new Array(h),S[2]=new Array(h),S[3]=new Array(h),{m:u,m0:d,mPrime:v,mu:f,rSquaredModm:_,s:h,rModM:w,rCubedModm:E,one:p,temp1:C,temp2:A,convertToMontgomeryForm:function(e){if(e.length<this.s){e.length=this.s;for(var t=0;t<this.s;t++)e[t]=isNaN(e[t])?0:e[t]}var r=l(e.length);for(this.montgomeryMultiply(e,this.rSquaredModm,r),t=0;t<this.s;t+=1)e[t]=r[t]},convertToStandardForm:function(e){this.montgomeryMultiply(e,this.one,this.temp1);for(var t=0;t<this.s;t+=1)e[t]=this.temp1[t]},montgomeryMultiply:i,modExp:function(t,r,n,o){o=!!o;var a,i,c=function(t){var r,n,o=2,a=t*e;n=4+3*Math.ceil(a/2)+1;do{o++,r=n,n=Math.pow(2,o)+Math.ceil(a/o)*(o+1)+1}while(n<r);return o-1}(r.length),l=function(t,r){var n,o=t.length,a=(new Array(o*e),0),i=0,s=0,c=0,l=new Array(Math.ceil(o*e/r));for(s=0,l[0]=0;a<o;a++)for(i=0,n=t[a];i<e;i++,n>>>=1)s===r&&(l[++c]=0,s=0),l[c]+=(1&n)<<s++;return l}(r,c).reverse(),u=this.rModM.slice(0),f=Math.pow(2,c),d=S;for(d.length=f,d[0]=this.rModM,a=1;a<f;a++)d[a]=[],b(d[a-1],t,d[a]),this.reduce(d[a]);var h,p=[];for(a=0;a<l.length;a++){for(i=0;i<c;i++)this.montgomeryMultiply(u,u,u);h=l[a],o?p=d[h]:s(d,h,p),this.montgomeryMultiply(u,p,u)}return this.montgomeryMultiply(u,this.one,n),n},reduce:function(e,t){var r,n,o,a,i,s,l=this.m.length,f=[];for(t=t||e,r=[],b(e.slice(l-1),this.mu,r),n=r.slice(l+1),o=e.slice(0,l+1),b(n,u,a=[]),a=a.slice(0,l+1),o[l+1]=g(o,a)>>>31,i=0;i<t.length;i++)t[i]=0;k(o,a,t),s=+(g(t,u)>0),m.subtract(t,u,f),c(s,t,f),y(t)},ctx:n}}return{DIGIT_BITS:e,DIGIT_NUM_BYTES:t,DIGIT_MASK:r,DIGIT_BASE:n,DIGIT_MAX:16777215,Zero:s,One:c,normalizeDigitArray:y,bytesToDigits:d,stringToDigits:function(e,t){e=e.replace(/^\s+|\s+$/g,"");var r=[0],n=[0];t=t||10;for(var o=0;o<e.length;o+=1){var a=parseInt(e[o],t);if(isNaN(a))throw new Error("Failed to convert string to integer in radix "+t.toString());b(r,t,n),w(n,[a],r),y(r)}return r},digitsToString:function(e,t){if(n<=(t=t||10))throw new Error("DIGIT_BASE is smaller than RADIX; cannot convert.");var r,o=e.length,a=[],i=[],s=[],c=[],l=[],u=[],f="",d="0";for(l[0]=t;Math.floor(n/l[0])>=t;)l[0]=l[0]*t,d=d.concat("0");for(r=0;r<o;r+=1)u[r]=e[r];for(;;){var h=!0;for(r=0;r<u.length;r+=1)if(0!==u[r]){h=!1;break}if(h)break;B(u,l,a,i,s,c),y(a,u.length,!0);var p=i[0].toString(t);f=d.substring(0,d.length-p.length)+p+f;var g=u;u=a,a=g}for(;0!==f.length&&"0"===f[0];)f=f.substring(1,f.length);return 0===f.length&&(f="0"),f},intToDigits:h,digitsToBytes:function(e,r,n){var o,a,i,s=[0];for(void 0===r&&(r=!0),o=0;o<e.length;o+=1)for(i=e[o],a=0;a<t;a+=1)s[o*t+a]=255&i,i=Math.floor(i/256);if(s.reverse(),void 0===n&&(n=1),r)for(;s.length>n&&0===s[0];)s.shift();return s},isZero:f,isEven:function(e){return 0==(1&e[0])},shiftRight:function(t,n,o,a){if(void 0===o)o=1;else if(o>=e||o<0)throw new Error("Invalid bit count for shiftRight");void 0===a&&(a=t.length);for(var i=a-1,s=e-o,c=0;c<i;c++)n[c]=(t[c+1]<<s|t[c]>>>o)&r;n[i]=t[i]>>>o},shiftLeft:v,compareDigits:g,bitLength:function(e){for(var t=0,r=0;t<e.length;){if(0===r)for(var n=7;n>=0&&0===r;){var o=1<<n;(e[t]&o)===o&&(r=n+1),n--}else r+=8;t+=1}return r},fixedWindowRecode:function(e,t,r){e=e.slice();for(var n=[],o=Math.pow(2,t),a=Math.pow(2,t-1),i=0;i<r;i++)n[i]=e[0]%o-a,e[0]=e[0]-n[i],m.shiftRight(e,e,t-1);return n[i]=e[0],n},IntegerGroup:function(t){var n=d(t),o=n.length,a=h(0,o),i=h(1,o),s=l(o),c=l(o);function u(e,t){return{m_digits:e,m_group:t,equals:function(e){return 0===g(this.m_digits,e.m_digits)&&this.m_group.equals(this.m_group,e.m_group)}}}return{m_modulus:n,m_digitWidth:o,montmul:new C(n),createElementFromInteger:function(e){return u(h(e,this.m_digitWidth),this)},createElementFromBytes:function(e){var t=d(e);if(m.compareDigits(t,this.m_modulus)>=0)throw new Error("The number provided is not an element of this group");return y(t,this.m_digitWidth,!0),u(t,this)},createElementFromDigits:function(e){return m.normalizeDigitArray(e,this.m_digitWidth,!0),u(e,this)},equals:function(e){return 0===g(this.m_modulus,e.m_modulus)},add:function(t,n,o){var a,i=this.m_digitWidth,s=o.m_digits;m.add(t.m_digits,n.m_digits,s);var c=(g(s,this.m_modulus)>>>31)-1&r,l=0;for(a=0;a<i;a+=1)l=s[a]-(this.m_modulus[a]&c)+l,s[a]=l&r,l>>=e;s.length=i},subtract:function(t,n,o){var a,i=this.m_digitWidth,s=o.m_digits,c=m.subtract(t.m_digits,n.m_digits,o.m_digits);if(-1===c)for(c=0,a=0;a<i;a+=1)c+=s[a]+this.m_modulus[a],s[a]=c&r,c>>=e},multiply:function(e,t,r){return m.modMul(e.m_digits,t.m_digits,this.m_modulus,r.m_digits,s,c)},inverse:function(e,t){m.modInv(e.m_digits,this.m_modulus,t.m_digits)},modexp:function(e,t,r){if(r=r||u([],this),0===g(t,a))r.m_digits=h(1,this.m_digitWidth);else if(0===g(t,i)){for(var n=0;n<e.m_digits.length;n++)r.m_digits[n]=e.m_digits[n];r.m_digits.length=e.m_digits.length}else this.montmul.modExp(e.m_digits,t,r.m_digits),r.m_digits.length=this.montmul.s;return r}}},add:w,subtract:k,multiply:b,divRem:B,reduce:function(e,t,r,n,o){return B(e,t,[],r,n,o),r},modInv:function(e,t,r,n){var o=new Array(t.length),a=new Array(t.length),i=new Array(t.length),s=_(e,t,a,o,i);return r=r||[],0!==g(i,c)?(r[0]=NaN,r.length=1):(1==(1&s)?k(t,o,r):(u(o,0,r,0,o.length),r.length=o.length),n?y(r,t.length,!0):y(r)),r},modInvCT:function(e,t,r,n){var o=[];return r=r||[],k(t,[2],o),E(e,o,t,r),y(r),r},modExp:E,modMul:function(e,t,r,n,o,a){var i=[];return b(e,t,i),B(i,r,i,n,o,a),n},MontgomeryMultiplier:C,gcd:function(e,t,r){var n=e,o=t;return g(e,t)>0&&(n=t,o=e),_(n,o,void 0,void 0,r),y(r)},sequenceEqual:function(e,t){for(var r=e.length===t.length,n=0;n<Math.min(e.length,t.length);n+=1)e[n]!==t[n]&&(r=!1);return r},swapEndianness:function(e){return e.reverse()},computeBitArray:function(e){for(var t=l(8*e.length),r=0,n=e.length-1;n>=0;){for(var o=0;o<8;){var a=1<<o,i=(e[n]&a)===a?1:0,s=8*(e.length-n-1)+o;1===i&&(r=s+1),t[s]=i,o+=1}n--}return t.slice(0,r)}}}(),y=y||function(){var e=m.bytesToDigits;function t(e){var t,r=null;if(arguments.length&&"number"!=typeof arguments[0]){if("object"==typeof arguments[0])for(r=[],t=0;t<e.length;t+=1)r[t]=e[t]}else for(r=[],t=0;t<e;t+=1)r[t]=0;return r}var r=function(e,t,r,o,a,i){var s=e.length;return{p:e,a:t,b:r,order:o,generator:n(this,!1,a,i,null,!1),allocatePointStorage:function(){return n(this,!1,m.intToDigits(0,s),m.intToDigits(0,s))},createPointAtInfinity:function(){return n(this,!0,m.intToDigits(0,s),m.intToDigits(0,s))}}},n=function(e,r,o,a,i,s){var l;return void 0===i&&(i=null),void 0===s&&(s=!1),u(l={equals:function(e){return function(e){return!(!e||(!l.isInfinity||!e.isInfinity)&&(null===l.z&&null!==e.z||null!==l.z&&null===e.z||(null===l.z?0!==m.compareDigits(l.x,e.x)||0!==m.compareDigits(l.y,e.y)||l.isInMontgomeryForm!==e.isInMontgomeryForm:0!==m.compareDigits(l.x,e.x)||0!==m.compareDigits(l.y,e.y)||0!==m.compareDigits(l.z,e.z)||l.isInMontgomeryForm!==e.isInMontgomeryForm)))}(e)},copy:function(e){!function(e,t){if(t.curve=e.curve,t.x=e.x.slice(),t.y=e.y.slice(),null!==e.z?t.z=e.z.slice():t.z=null,c||(t.isAffine=e.isAffine),t.isInMontgomeryForm=e.isInMontgomeryForm,t.isInfinity=e.isInfinity,!t.equals(e))throw new Error("Instances should be equal.")}(this,e)},clone:function(){return e=n(l.curve,l.isInfinity,t(l.x),t(l.y),l.z?t(l.z):null,l.isInMontgomeryForm),l.ta&&(e.ta=t(l.ta)),l.tb&&(e.tb=t(l.tb)),e;var e}},"curve",e,(function(){return e}),(function(t){e=t})),u(l,"x",o,(function(){return o}),(function(e){o=e})),u(l,"y",a,(function(){return a}),(function(e){a=e})),u(l,"z",i,(function(){return i}),(function(e){i=e})),u(l,"isInMontgomeryForm",s,(function(){return s}),(function(e){s=e})),u(l,"isInfinity",r,(function(){return r}),(function(e){r=e})),u(l,"isAffine",null===i,(function(){return null===i})),l},o=function(e){var r=1===e.type,n=e.p.length,o=m.MontgomeryMultiplier(e.p),a=e.a.slice();o.convertToMontgomeryForm(a);var s=m.isZero(e.a),l=m.One,u=t(n);u[0]=1,o.convertToMontgomeryForm(u);var f=m.IntegerGroup(m.digitsToBytes(o.m),!0),d=t(n),h=t(n),p=t(n),g=t(n),y=t(n),v=t(n),w=t(n),k=t(n),b=t(n),B=t(n),_=t(n),E=t(n);function C(e,t,r){var n=f.createElementFromInteger(0);n.m_digits=r,f.subtract(f.createElementFromDigits(e),f.createElementFromDigits(t),n)}function A(e,t,r){var n=f.createElementFromInteger(0);n.m_digits=r,f.add(f.createElementFromDigits(e),f.createElementFromDigits(t),n)}function S(t,r){var n=t.length,o=e.p;if(1==(1&t[0])){for(var a=0,i=0;i<n;i+=1)a+=t[i]+o[i],r[i]=a&m.DIGIT_MASK,a>>>=m.DIGIT_BITS;a<<=m.DIGIT_BITS-1,m.shiftRight(r,r),r[n-1]|=a}else m.shiftRight(t,r)}function P(e,t,r){o.montgomeryMultiply(e,t,r)}function R(e,t){o.montgomeryMultiply(e,e,t)}function x(e,t){var r=t.clone();if(L(r),!K(r))throw new Error("Invalid Parameter");var n=t.clone();H(n);var o,a=[t.clone()],i=n.clone(),s=n.clone();I(n,s),U(s);for(var c=1;c<Math.pow(2,e-2);c++)D(i,s,i),U(o=i.clone()),a[c]=o;return a}function I(e,t){if(void 0===e)throw new Error("point undefined");if(void 0===t)throw new Error("outputPoint undefined");if(e.isAffine)throw new Error("Given point was in Affine form. Use convertToJacobian() first.");if(!e.isInMontgomeryForm)throw new Error("Given point must be in Montgomery form. Use montgomeryize() first.");s?function(e,t){if(e.isInfinity)t.isInfinity=!0;else{R(e.y,g),R(e.x,y),A(y,y,d),A(d,y,y),P(e.x,g,v),R(g,d),S(y,h),R(h,g),P(e.y,e.z,b);for(var r=0;r<b.length;r+=1)t.z[r]=b[r];C(g,v,t.x),C(t.x,v,t.x),C(v,t.x,y),P(h,y,p),C(p,d,t.y),t.isInfinity=!1,t.isInMontgomeryForm=!0}}(e,t):function(e,t){e.isInfinity?t.isInfinity=!0:(R(e.z,h),P(e.z,e.y,y),A(e.x,h,p),C(e.x,h,h),t.z=y.slice(),P(h,p,g),S(g,p),A(g,p,h),R(e.y,p),R(h,y),P(e.x,p,g),C(y,g,y),C(y,g,t.x),C(g,t.x,y),R(p,g),P(h,y,p),C(p,g,t.y),t.isInfinity=!1,t.isInMontgomeryForm=!0)}(e,t)}function T(e,t,r){if(e.isInfinity)return t.copy(r),void this.convertToJacobianForm(r);if(t.isInfinity)e.copy(r);else{if(R(e.z,v),P(e.z,v,w),P(t.x,v,y),P(t.y,w,v),C(y,e.x,h),C(v,e.y,p),m.isZero(h))return m.isZero(p)?(I(e,r),void D(r,t,r)):(r.x=e.x.slice(0),r.y=e.y.slice(0),void(r.z=e.z.slice(0)));if(R(p,y),R(h,w),P(w,e.x,v),P(h,w,d),C(y,v,g),C(g,v,g),P(e.z,h,y),C(g,v,g),P(d,e.y,w),C(g,d,g),m.isZero(g)){for(i=0;i<r.x.length;i++)r.x[i]=0,r.y[i]=0,r.z[i]=0;r.y[0]=1}else A(w,w,h),P(y,g,r.z),P(p,g,y),R(g,d),A(h,y,h),P(d,v,y),R(h,k),P(d,g,v),C(k,y,r.x),C(r.x,y,r.x),C(r.x,v,r.x),C(r.x,y,g),P(v,w,d),P(h,g,y),C(y,d,r.y),r.isInfinity=!1,r.isInMontgomeryForm=!0}}function D(e,t,r){if(null===e)throw new Error("jacobianPoint");if(null===t)throw new Error("affinePoint");if(null===r)throw new Error("outputPoint");if(e.curve!==t.curve||e.curve!==r.curve)throw new Error("All points must be from the same curve object.");if(e.isAffine)throw new Error("Given jacobianPoint was in Affine form. Use ConvertToJacobian()                     before calling DoubleJacobianAddAffinePoints().");if(!t.isAffine)throw new Error("Given affinePoint was in Jacobian form. Use ConvertToAffine() before                      calling DoubleJacobianAddAffinePoints().");if(r.isAffine)throw new Error("Given jacobianPoint was in Jacobian form. Use ConvertToJacobian() before                      calling DoubleJacobianAddAffinePoints().");if(!e.isInMontgomeryForm)throw new Error("Jacobian point must be in Montgomery form");if(!t.isInMontgomeryForm)throw new Error("Affine point must be in Montgomery form");if(e.isInfinity)return t.copy(r),void this.convertToJacobianForm(r);if(t.isInfinity)e.copy(r);else{var o;for(R(e.z,h),P(h,e.z,p),P(h,t.x,g),P(p,t.y,y),C(g,e.x,h),C(y,e.y,p),o=0;o<h.length;o+=1)if(0!==h[o]){P(e.z,h,d);for(var a=0;a<n;a+=1)r.z[a]=d[a];return R(h,g),P(g,h,y),P(g,e.x,v),A(v,v,h),R(p,r.x),C(r.x,h,r.x),C(r.x,y,r.x),C(v,r.x,g),P(p,g,v),P(e.y,y,w),C(v,w,r.y),r.isInfinity=!1,void(r.isInMontgomeryForm=!0)}for(o=0;o<p.length;o+=1)if(0!==p[o])return r.isInfinity=!0,void(r.isInMontgomeryForm=!0);t.copy(r),this.convertToJacobianForm(r),this.double(r,r),r.isInMontgomeryForm=!0}}function O(t,r,o,a){if(r.isInfinity||m.isZero(t))o.isInfinity=!0;else{if(m.compareDigits(t,e.order)>=0)throw new Error("The scalar k must be in the range 1 <= k < order.");if(t=t.slice(),1===r.curve.type){var i=void 0!==r.ta;i||j(r),function(e,t,r,o){if(!z(t))throw new Error("Invalid Parameter");var a=t.curve.rbits;o=void 0===o||o;var i,s,c=n<=8?5:6,l=Math.floor((a+(c-2))/(c-1));e=e.slice();var u=t.clone();j(u),o&&(V(u,u),V(u,u));var f=F(1<<c-2,u),d=1&e[0],h=[];for(C(t.curve.order,e,h),i=0;i<e.length;i++)e[i]=d-1&(e[i]^h[i])^e[i];var p=m.fixedWindowRecode(e,c,l),g=Math.floor(Math.abs(p[l])-1)/2,y=f[g];for(u.x=y.x.slice(),u.y=y.y.slice(),u.z=y.z.slice(),i=l-1;i>=0;i--){for(s=0;s<c-1;s++)V(u,u);var v=W(f,g=Math.floor((Math.abs(p[i])-1)/2)),w=-(p[i]>>>31);C(t.curve.p,v.x,h);for(var k=0;k<v.x.length;k++)v.x[k]=v.x[k]&~w|h[k]&w;for(C(t.curve.p,v.td,h),k=0;k<v.td.length;k++)v.td[k]=v.td[k]&~w|h[k]&w;Y(v,u,u)}for(C(t.curve.p,u.x,h),i=0;i<u.x.length;i++)u.x[i]=d-1&(u.x[i]^h[i])^u.x[i];J(u),r.x=u.x.slice(),r.y=u.y.slice()}(t,r,o,a),i||J(r)}else{var s=r.isInMontgomeryForm,c=o.isInMontgomeryForm,l=o.isAffine;s||N(r),c||N(o),function(e,t,r){var o=t.clone();if(L(o),!K(o))throw new Error("Invalid Parameters.");var a=1&e[0],i=[];for(C(t.curve.order,e,i),p=0;p<e.length;p++)e[p]=a-1&(e[p]^i[p])^e[p];var s=n<=8?5:6,c=t.curve.p.length*m.DIGIT_BITS,l=Math.ceil(c/(s-1)),u=m.fixedWindowRecode(e,s,l),f=x(s,t),d=Math.floor(Math.abs(u[l])-1)/2,h=f[d].clone();H(h);for(var p=l-1;p>=0;p--){for(var g=0;g<s-2;g++)I(h,h);var y=M(f,d=Math.floor((Math.abs(u[p])-1)/2));C(y.curve.p,y.y,i);for(var v=-(u[p]>>>31),w=0;w<y.y.length;w++)y.y[w]=y.y[w]&~v|i[w]&v;T(h,y,h)}for(C(t.curve.p,h.y,i),p=0;p<h.y.length;p++)h.y[p]=a-1&(h.y[p]^i[p])^h.y[p];h.copy(r)}(t,r,o),l&&U(o),s||L(r),c||L(o)}}}function M(e,t){for(var r,n,o=0;o<e.length;o++)r=+(o===t),n=[n,e[o].clone()][r];return n}function N(e){if(e.isInMontgomeryForm)throw new Error("The given point is already in Montgomery form.");e.isInfinity||(o.convertToMontgomeryForm(e.x),o.convertToMontgomeryForm(e.y),null!==e.z&&o.convertToMontgomeryForm(e.z),void 0!==e.ta&&(o.convertToMontgomeryForm(e.ta),o.convertToMontgomeryForm(e.tb))),e.isInMontgomeryForm=!0}function L(e){if(!e.isInMontgomeryForm)throw new Error("The given point is not in montgomery form.");e.isInfinity||(o.convertToStandardForm(e.x),o.convertToStandardForm(e.y),null!==e.z&&o.convertToStandardForm(e.z),void 0!==e.ta&&(o.convertToStandardForm(e.ta),o.convertToStandardForm(e.tb))),e.isInMontgomeryForm=!1}function U(t){if(t.isInfinity)return t.z=null,void(c||(t.isAffine=!0));if(m.modInv(t.z,e.p,E,!0),t.isInMontgomeryForm){P(E,o.rCubedModm,_);var r=E;E=_,_=r}R(E,B),P(t.x,B,_);for(var a=0;a<n;a+=1)t.x[a]=_[a];P(t.y,B,_),P(_,E,t.y),t.z=null,delete t.ta,delete t.tb,c||(t.isAffine=!0)}function H(e){if(!e.isAffine)throw new Error("The given point is not in Affine form.");c||(e.isAffine=!1);var r,n,o=e.isInMontgomeryForm?u:l;for(r=t(o.length),n=0;n<o.length;n+=1)r[n]=o[n];e.z=r}function K(e){return!e.isInfinity&&(m.modMul(e.y,e.y,e.curve.p,h),m.modMul(e.x,e.x,e.curve.p,p),m.modMul(e.x,p,e.curve.p,g),A(g,e.curve.b,p),m.modMul(e.x,e.curve.a,e.curve.p,g),A(p,g,p),C(h,p,h),!1!==m.isZero(h))}function z(e){return e.ta&&J(e=e.clone()),m.modMul(e.y,e.y,e.curve.p,g),m.modMul(e.x,e.x,e.curve.p,p),m.add(p,g,h),m.reduce(y,e.curve.p,y),m.modMul(p,g,e.curve.p,y),m.modMul(e.curve.d,y,e.curve.p,g),m.add(g,[1],p),m.reduce(p,e.curve.p,p),m.subtract(h,p,h),!1!==m.isZero(h)||(m.reduce(h,e.curve.p,h),!1!==m.isZero(h))}function F(e,t){var r=t.clone(),n=r.clone(),o=[];o[0]=Z(t),V(r,r),n=Z(r),r=t.clone();for(var a=1;a<e;a++)Y(n,r,r),o[a]=Z(r);return o}function j(e){e.ta=e.x.slice(),e.tb=e.y.slice(),e.z=[1]}function W(e,t){for(var r=(t+1)%e.length,n=0;n<e.length;n++){var o={x:e[r].x.slice(),y:e[r].y.slice(),z:e[r].z.slice(),td:e[r].td.slice()};r=(r+1)%e.length}return o}function J(t){m.modInv(t.z,e.p,E,!0),m.modMul(t.x,E,e.p,t.x),m.modMul(t.y,E,e.p,t.y),delete t.ta,delete t.tb,t.z=null}function V(e,t){if(void 0===e.ta)throw new Error("Point should be in Extended Projective form.");m.modMul(e.x,e.x,e.curve.p,d),m.modMul(e.y,e.y,e.curve.p,h),m.modMul(e.z,e.z,e.curve.p,e.ta),C(h,d,t.tb),A(d,h,d),A(e.ta,e.ta,e.ta),A(e.y,e.y,e.y),C(e.ta,d,h),m.modMul(e.x,e.y,e.curve.p,t.ta),m.modMul(d,t.tb,e.curve.p,t.y),m.modMul(h,t.ta,e.curve.p,t.x),m.modMul(d,h,e.curve.p,t.z)}function Z(e){var t=e.curve,r=t.p,n={x:e.x.slice(),y:e.y.slice(),z:e.z.slice(),td:[],curve:e.curve};return m.modMul(e.ta,e.tb,r,B),m.modMul(B,t.d,r,n.td),n}function Y(e,t,r){var n=m,o=t.curve.p;h=[],p=[],g=[],n.modMul(t.z,e.z,o,g),n.modMul(t.ta,t.tb,o,h),A(t.x,t.y,t.ta),n.modMul(h,e.td,o,p),A(e.x,e.y,t.tb),C(g,p,h),A(g,p,g),n.modMul(t.ta,t.tb,o,p),n.modMul(t.x,e.x,o,t.z),n.modMul(t.y,e.y,o,t.x),C(p,t.z,p),C(t.x,t.z,r.ta),C(p,t.x,r.tb),n.modMul(r.ta,g,o,r.y),n.modMul(r.tb,h,o,r.x),n.modMul(g,h,o,r.z)}var q={convertToMontgomeryForm:N,convertToStandardForm:L,convertToAffineForm:U,convertToJacobianForm:H,generatePrecomputationTable:function(e,t){return x(e,t)}};return r?(q.double=V,q.add=function(e,t,r){if(void 0===e.ta)throw new Error("Point1 should be in Extended Projective form.");if(void 0===t.ta)throw new Error("Point2 should be in Extended Projective form.");Y(Z(e),t,r)},q.scalarMultiply=O,q.normalize=J,q.convertToExtendedProjective=j,q.convertTedToWeierstrass=function(e,t){var r=e.curve.a.slice(),n=e.curve.d.slice(),o=e.curve.p,a=m.modMul,i=m.modInv;a(r,h=[5],o,p),C(p,n,p),a(n,h,o,g),C(r,g,h),a(e.y,h,o,g),A(g,p,p),C(h=[1],e.y,g),a(h=[12],g,o,y),i(y,o,y,!0),a(e.x,g,o,h),A(h,h,g),A(g,g,g),i(g,o,g,!0),a(y,p,o,t.x),h=[1],A(e.y,h,h),C(r,n,p),a(h,p,o,y),a(y,g,o,t.y)},q.convertWeierstrassToTed=function(e,t){var r=t.curve.a.slice(),n=t.curve.d.slice(),o=t.curve.p,a=m.modMul,i=m.modInv;A(e.x,e.x,h),A(e.x,h,h),A(h,h,h),C(h,r,p),C(p,n,p),A(e.y,e.y,g),A(e.y,g,g),A(g,g,g),i(g,o,g,!0),a(p,g,o,t.x),A(h,h,h),A(h,n,p),A(h,r,h),A(r,r,g),C(p,g,p),C(p,g,p),C(p,r,p),A(n,n,g),C(h,g,h),C(h,g,h),C(h,n,h),i(h,o,h,!0),a(h,p,o,t.y)},q.validatePoint=z,q.generatePrecomputationTable=function(e,t){return F(e,t)}):(q.double=I,q.mixedDoubleAdd=T,q.mixedAdd=D,q.scalarMultiply=O,q.negate=function(e,t){e!==t&&e.copy(t),C(e.curve.p,e.y,t.y)},q.validatePoint=K),q},a={},s=function(t){var n=a[t.toUpperCase()];if(!n)throw new Error(t+" Unsupported curve.");if(0===n.type)return function(t){var n=new r(e(t.p),e(t.a),e(t.b),e(t.order),e(t.gx),e(t.gy));return n.type=t.type,n.name=t.name,n.generator.curve=n,n}(n);if(1===n.type)return function(t){var n=new r(e(t.p),e(t.a),e(t.d),e(t.order),e(t.gx),e(t.gy));return n.type=t.type,1===n.type&&(n.d=n.b.slice(),delete n.b),n.rbits=t.info[2],n.name=t.name,n.generator.curve=n,n}(n);throw new Error(t+" Unsupported curve type.")};return{createCurve:s,curves:a,sec1EncodingFp:function(){return{encodePoint:function(e){if(!e)throw new Error("point");if(!e.isAffine)throw new Error("Point must be in affine form.");if(e.isInMontgomeryForm)throw new Error("Point must not be in Montgomery form.");if(e.isInfinity)return t(1);var r=m.digitsToBytes(e.x),n=m.digitsToBytes(e.y),o=m.digitsToBytes(e.curve.p).length;if(o<r.length||o<n.length)throw new Error("Point coordinate(s) are bigger than the field order.");var a=t(2*o+1);a[0]=4;for(var i=o-r.length,s=0;s<r.length;s++)a[s+1+i]=r[s];for(i=o-n.length,s=0;s<n.length;s++)a[o+s+1+i]=n[s];return a},decodePoint:function(e,r){if(e.length<1)throw new Error("Byte array must have non-zero length");var o=m.digitsToBytes(r.p).length;if(0===e[0]&&1===e.length)return r.createPointAtInfinity();if(4===e[0]&&e.length===1+2*o){for(var a=t(o),i=t(o),s=0;s<o;s++)a[s]=e[s+1],i[s]=e[o+s+1];var c=m.bytesToDigits(a),l=m.bytesToDigits(i);return n(r,!1,c,l)}throw new Error("Unsupported encoding format")}}},validatePoint:function(t,r,a,i){var c=s(t),l=new n(c,!1,e(r),e(a),i&&e(i),!1);return new o(c).validatePoint(l)},EllipticCurvePointFp:n,EllipticCurveOperatorFp:o,ModularSquareRootSolver:function(e){var t=e,r=[];if(void 0===e)throw new Error("modulus");if(m.isEven(e))throw new Error("Only odd moduli are supported");var n=m.MontgomeryMultiplier(t);t[0]%4==3?(m.add(t,m.One,r),m.shiftRight(r,r,2)):r=null;var o=new Array(t.length),a=new Array(t.length);return{squareRoot:function(e){if(null!==r)return function(e){var t=m.intToDigits(0,16);n.modExp(e,r,t);var o=[0];return m.modMul(t,t,n.m,o),0!==m.compareDigits(e,o)?null:t}(e);throw new Error("GeneralCase not supported.")},jacobiSymbol:function(e){var r,n;r=e.slice(),n=t.slice(),m.reduce(r,n,r,o,a);for(var i=1;!m.isZero(r);){for(;m.isEven(r);){m.shiftRight(r,r);var s=7&n[0];3!==s&&5!==s||(i=-i)}var c=r;r=n,n=c;var l=3&r[0],u=3&n[0];3===l&&3===u&&(i=-i),m.reduce(r,n,r,o,a)}return 0===m.compareDigits(n,m.One)?i:0}}}}}();void 0!==y&&(y.curves["P-256"]={name:"P-256",type:0,p:[255,255,255,255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255],a:[255,255,255,255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,252],b:[90,198,53,216,170,58,147,231,179,235,189,85,118,152,134,188,101,29,6,176,204,83,176,246,59,206,60,62,39,210,96,75],order:[255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,188,230,250,173,167,23,158,132,243,185,202,194,252,99,37,81],gx:[107,23,209,242,225,44,66,71,248,188,230,229,99,164,64,242,119,3,125,129,45,235,51,160,244,161,57,69,216,152,194,150],gy:[79,227,66,226,254,26,127,155,142,231,235,74,124,15,158,22,43,206,51,87,107,49,94,206,203,182,64,104,55,191,81,245],cf:1},y.curves["P-384"]={name:"P-384",type:0,p:[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,255,255,0,0,0,0,0,0,0,0,255,255,255,255],a:[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,255,255,0,0,0,0,0,0,0,0,255,255,255,252],b:[179,49,47,167,226,62,231,228,152,142,5,107,227,248,45,25,24,29,156,110,254,129,65,18,3,20,8,143,80,19,135,90,198,86,57,141,138,46,209,157,42,133,200,237,211,236,42,239],order:[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,199,99,77,129,244,55,45,223,88,26,13,178,72,176,167,122,236,236,25,106,204,197,41,115],gx:[170,135,202,34,190,139,5,55,142,177,199,30,243,32,173,116,110,29,59,98,139,167,155,152,89,247,65,224,130,84,42,56,85,2,242,93,191,85,41,108,58,84,94,56,114,118,10,183],gy:[54,23,222,74,150,38,44,111,93,158,152,191,146,146,220,41,248,244,29,189,40,154,20,124,233,218,49,19,181,240,184,192,10,96,177,206,29,126,129,157,122,67,29,124,144,234,14,95],cf:1},y.curves["P-521"]={name:"P-521",type:0,p:[1,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],a:[1,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,252],b:[0,81,149,62,185,97,142,28,154,31,146,154,33,160,182,133,64,238,162,218,114,91,153,179,21,243,184,180,137,145,142,241,9,225,86,25,57,81,236,126,147,123,22,82,192,189,59,177,191,7,53,115,223,136,61,44,52,241,239,69,31,212,107,80,63,0],order:[1,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,250,81,134,135,131,191,47,150,107,127,204,1,72,247,9,165,208,59,181,201,184,137,156,71,174,187,111,183,30,145,56,100,9],gx:[0,198,133,142,6,183,4,4,233,205,158,62,203,102,35,149,180,66,156,100,129,57,5,63,181,33,248,40,175,96,107,77,61,186,161,75,94,119,239,231,89,40,254,29,193,39,162,255,168,222,51,72,179,193,133,106,66,155,249,126,126,49,194,229,189,102],gy:[1,24,57,41,106,120,154,59,192,4,92,138,95,180,44,125,27,217,152,245,68,73,87,155,68,104,23,175,189,23,39,62,102,44,151,238,114,153,94,244,38,64,197,80,185,1,63,173,7,97,53,60,112,134,162,114,194,64,136,190,148,118,159,209,102,80],cf:1}),void 0!==y&&(y.curves["BN-254"]={name:"BN-254",type:0,p:[37,35,100,130,64,0,0,1,186,52,77,128,0,0,0,8,97,33,0,0,0,0,0,19,167,0,0,0,0,0,0,19],a:[0],b:[2],order:[37,35,100,130,64,0,0,1,186,52,77,128,0,0,0,7,255,159,128,0,0,0,0,16,161,0,0,0,0,0,0,13],gx:[37,35,100,130,64,0,0,1,186,52,77,128,0,0,0,8,97,33,0,0,0,0,0,19,167,0,0,0,0,0,0,18],gy:[1],cf:1});var v={info:["numsp256d1",256,256,256],type:0,p:[67,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[64,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),b:[129,85,2].reverse(),order:[37,168,81,71,41,32,171,32,96,92,38,234,117,130,60,228,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),gx:[177,172,26,178,30,238,82,188,58,199,212,3,9,155,87,131,9,203,66,79,160,149,122,41,97,219,170,90,182,214,158,188].reverse(),gy:[159,222,132,33,203,185,181,128,187,15,49,21,209,195,85,201,53,224,4,126,247,139,68,115,166,182,153,51,241,192,143,208].reverse(),cf:1},w={info:["numsp256t1",256,255,256],name:"numsp256t1",type:1,p:[67,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[1],d:[85,195,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),order:[245,74,221,238,144,177,71,26,155,67,89,47,165,90,149,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64].reverse(),gx:[218,19,237,46,144,192,222,160,134,53,8,227,14,138,57,12,214,155,32,105,95,61,30,205,125,35,234,106,251,20,117,138].reverse(),gy:[230,137,138,121,231,22,166,47,211,110,133,16,216,97,95,113,16,128,75,166,217,101,150,206,199,37,217,217,159,62,213,68].reverse(),cf:4},k={info:["numsp384d1",384,384,384],name:"numsp384d1",type:0,p:[195,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[192,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),b:[187,119,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),order:[185,97,14,123,246,129,77,96,122,226,55,76,61,157,218,190,129,104,93,235,30,175,30,214,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),gx:[42,21,152,32,4,186,156,235,123,196,97,15,16,237,46,82,66,199,108,42,27,41,189,243,244,249,129,251,205,193,37,2,166,241,5,65,34,202,128,72,28,24,111,177,240,86,121,117].reverse(),gy:[22,7,24,102,236,184,116,92,38,173,244,191,219,180,214,188,126,131,26,18,125,131,32,185,156,115,127,248,119,105,4,176,126,207,132,5,48,61,227,215,56,142,155,225,104,227,222,172].reverse(),cf:1},b={info:["numsp384t1",384,382,384],name:"numsp384t1",type:1,p:[195,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[1],d:[159,209,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),order:[125,137,163,230,196,220,185,32,121,200,53,171,90,85,228,97,207,225,107,180,28,26,71,226,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,63].reverse(),gx:[222,107,32,108,228,64,213,80,19,148,69,101,177,146,242,111,64,99,49,243,168,255,99,87,0,76,190,229,70,244,11,179,181,93,229,154,18,162,182,192,108,38,169,69,251,17,177,97].reverse(),gy:[146,147,114,240,225,3,141,157,220,72,236,70,249,176,114,0,75,150,69,246,247,152,15,131,86,95,66,241,116,130,173,22,215,13,177,35,164,177,56,135,176,238,166,185,103,62,152,130].reverse(),cf:4},B={info:["numsp512d1",512,512,512],name:"numsp512d1",type:0,p:[199,253,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[196,253,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),b:[155,217,1].reverse(),order:[93,85,51,4,57,63,21,206,67,210,124,96,54,139,86,59,198,189,208,151,237,88,194,79,27,131,231,148,251,164,60,91,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),gx:[87,174,171,140,149,135,130,220,226,93,111,125,19,96,93,29,131,21,86,37,134,66,121,147,158,53,107,7,81,161,33,80,249,217,6,83,194,224,6,69,133,246,1,181,59,216,202,152,82,59,61,160,2,112,43,218,147,10,29,20,71,52,192,58].reverse(),gy:[166,39,53,56,96,135,160,35,233,15,253,76,30,92,43,207,2,86,90,178,64,168,33,193,233,237,14,139,218,21,132,162,20,79,209,123,12,38,75,143,140,187,188,171,222,219,151,75,0,177,235,99,220,238,14,206,179,86,173,41,202,84,58,148].reverse(),cf:4},_={info:["numsp512t1",512,510,512],name:"numsp512t1",type:1,p:[199,253,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[1].reverse(),d:[239,203,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),order:[109,212,238,27,245,140,70,103,255,236,239,109,120,5,70,42,245,134,182,112,201,216,63,158,186,145,207,47,109,99,240,180,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,63].reverse(),gx:[254,87,236,153,41,171,185,197,21,240,196,124,66,37,229,15,173,4,137,86,146,201,189,120,15,115,70,238,78,193,33,70,71,129,59,39,190,126,161,39,130,163,196,77,159,231,209,47,51,197,211,136,120,203,24,122,156,182,141,18,109,49,142,223].reverse(),gy:[225,245,226,193,192,222,109,50,31,208,241,155,138,211,102,2,253,193,236,42,134,6,26,96,98,53,150,233,242,83,202,32,65,131,158,144,149,107,43,169,34,157,37,216,38,247,118,228,110,37,42,168,119,245,176,152,113,202,73,157,243,191,9,109].reverse(),cf:4};void 0!==y&&(y.curves.NUMSP256D1=v,y.curves.NUMSP384D1=k,y.curves.NUMSP512D1=B,y.curves.NUMSP256T1=w,y.curves.NUMSP384T1=b,y.curves.NUMSP512T1=_);var E=function(e,t,r,n,o,a,i){var s=d,c=r.slice(),l=new Array(o),u=[],f=0;function h(e){for(var t=Math.floor(e.length/o),r=0;r<t;r++)a(e,r,c,n,l);return f+=t,e.slice(t*o)}function p(){if(0!==h(function(e){var t=o-e.length%o;t<=o/8&&(t+=o);var r=s.getVector(t);r[0]=128;for(var n=8*(e.length+f*o),a=1;a<=8;a++)r[t-a]=n%256,n=Math.floor(n/256);return e.concat(r)}(u)).length)throw new Error("buffer.length !== 0");var e=function(){for(var e=[],t=0;t<c.length;t++)e=e.concat(s.int32ToBytes(c[t]));return e.length=i/8,e}();return u=[],c=r.slice(),f=0,e}return{name:e,computeHash:function(e){return u=h(e),p()},process:function(e){(u=u.concat(e)).length>=o&&(u=h(u))},finish:p,der:t,hashLen:i,maxMessageSize:4294967295}},C=function(){function e(e,r,n,o,a){var i,s,c,l,u=4294967295,f=n[0],d=n[1],h=n[2],p=n[3],g=n[4];for(s=0;s<16;s++)a[s]=t.bytesToInt32(e,64*r+4*s);for(i=16;i<80;i++)l=a[i-3]^a[i-8]^a[i-14]^a[i-16],a[i]=l<<1|l>>>31;for(s=0;s<80;s++)c=f<<5|f>>>27,c+=s>=60?d^h^p:s>=40?d&h^d&p^h&p:s>=20?d^h^p:d&h^~d&p,c+=g+o[s]+a[s],g=p,p=h,h=d<<30|d>>>2,d=f,f=c;return n[0]+=f&u,n[1]+=d&u,n[2]+=h&u,n[3]+=p&u,n[4]+=g&u,n}var t=d,r=t.unpackData,n=r("Z0UjAe/Nq4mYutz+EDJUdsPS4fA=",4,1),o=r("WoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroY8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdY",4,1),a=r("MCEwCQYFKw4DAhoFAAQU");return{sha1:function(){return E("SHA-1",a,n,o,64,e,160)}}}();void 0!==t&&(C.instances={},C.getInstance=function(e){return C.instances[e]||(C.instances[e]=C.sha1())},C.deleteInstance=function(e){C.instances[e]=null,delete C.instances[e]},C.hash=function(e){if("process"!==e.operationSubType)return"finish"===e.operationSubType?C.sha1.finish():C.sha1().computeHash(e.buffer);C.sha1.process(e.buffer)},t.register("digest","SHA-1",C.hash)),f["SHA-1"]=C.sha1;var A=function(){var e=d;function t(t,r,n,o,a){var i,s,c,l,u,f=n[0],d=n[1],h=n[2],p=n[3],g=n[4],m=n[5],y=n[6],v=n[7];for(s=0;s<16;s++)a[s]=e.bytesToInt32(t,64*r+4*s);for(i=16;i<64;i++)l=a[i-15],u=a[i-2],a[i]=((u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10)+a[i-7]+((l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3)+a[i-16],a[i]=4294967295&a[i];for(s=0;s<64;s++)p+=c=v+((g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&m^~g&y)+o[s]+a[s],c+=((f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10))+(f&(d^h)^d&h),v=y,y=m,m=g,g=p,p=h,h=d,d=f,f=c;return n[0]=n[0]+f>>>0,n[1]=n[1]+d>>>0,n[2]=n[2]+h>>>0,n[3]=n[3]+p>>>0,n[4]=n[4]+g>>>0,n[5]=n[5]+m>>>0,n[6]=n[6]+y>>>0,n[7]=n[7]+v>>>0,n}var r,n,o,a,i,s=e.unpackData;return n=s("wQWe2DZ81QcwcN0X9w5ZOf/ACzFoWBURZPmPp776T6Q",4,1),o=s("agnmZ7tnroU8bvNypU/1OlEOUn+bBWiMH4PZq1vgzRk",4,1),r=s("QoovmHE3RJG1wPvP6bXbpTlWwltZ8RHxkj+CpKscXtXYB6qYEoNbASQxhb5VDH3Dcr5ddIDesf6b3AanwZvxdOSbacHvvkeGD8GdxiQMocwt6SxvSnSEqlywqdx2+YjamD5RUqgxxm2wAyfIv1l/x8bgC/PVp5FHBspjURQpKWcntwqFLhshOE0sbfxTOA0TZQpzVHZqCruBwskuknIshaK/6KGoGmZLwkuLcMdsUaPRkugZ1pkGJPQONYUQaqBwGaTBFh43bAgnSHdMNLC8tTkcDLNO2KpKW5zKT2gub/N0j4LueKVjb4TIeBSMxwIIkL7/+qRQbOu++aP3xnF48g",4,1),a=s("MC0wDQYJYIZIAWUDBAIEBQAEHA"),i=s("MDEwDQYJYIZIAWUDBAIBBQAEIA"),{sha224:function(){return E("SHA-224",a,n,r,64,t,224)},sha256:function(){return E("SHA-256",i,o,r,64,t,256)}}}();void 0!==t&&(A.instance224=A.instance224||A.sha224(),A.instance256=A.instance256||A.sha256(),A.instances={},A.getInstance224=function(e){return A.instances[e]||(A.instances[e]=A.sha224())},A.getInstance256=function(e){return A.instances[e]||(A.instances[e]=A.sha256())},A.deleteInstance=function(e){A.instances[e]=null,delete A.instances[e]},A.hash256=function(e){if("process"===e.operationSubType)return A.getInstance256(e.workerid).process(e.buffer),null;if("finish"===e.operationSubType){var t=A.getInstance256(e.workerid).finish();return A.deleteInstance(e.workerid),t}if("abort"!==e.operationSubType)return A.instance256.computeHash(e.buffer);A.deleteInstance(e.workerid)},A.hash224=function(e){if("process"!==e.operationSubType){if("finish"===e.operationSubType&&A.getInstance224(e.workerid).finish(),"abort"!==e.operationSubType)return A.instance224.computeHash(e.buffer);msrcryptoSha224.deleteInstance(e.workerid)}else A.getInstance224(e.workerid).process(e.buffer)},t.register("digest","SHA-224",A.hash224),t.register("digest","SHA-256",A.hash256)),f["SHA-224"]=A.sha224,f["SHA-256"]=A.sha256;var S=function(){function e(e,t,r,n,o){var a=t+n|0,i=a>>>0<n>>>0;o[0]=e+r+i|0,o[1]=a}function t(t,r,n,o,a){var i,s,c,l,u,f,d,h,p,g=[],m=[],y=[],v=n[0],w=n[1],k=n[2],b=n[3],B=n[4],_=n[5],E=n[6],C=n[7],A=n[8],S=n[9],P=n[10],R=n[11],x=n[12],I=n[13],T=n[14],D=n[15];for(i=0;i<32;i++)p=128*r+4*i,a[i]=t.slice(p,p+4),a[i]=a[i][0]<<24|a[i][1]<<16|a[i][2]<<8|a[i][3];for(i=32;i<160;i+=2)c=((d=a[i-30])>>>1|(h=a[i-29])<<31)^(d>>>8|h<<24)^d>>>7,l=(h>>>1|d<<31)^(h>>>8|d<<24)^(h>>>7|d<<25),e(u=((d=a[i-4])>>>19|(h=a[i-3])<<13)^(h>>>29|d<<3)^d>>>6,f=(h>>>19|d<<13)^(d>>>29|h<<3)^(h>>>6|d<<26),a[i-14],a[i-13],g),e(c,l,g[0],g[1],g),e(a[i-32],a[i-31],g[0],g[1],g),a[i]=g[0],a[i+1]=g[1];for(s=0;s<160;s+=2)u=A&P^x&~A,f=S&R^I&~S,e(T,D,c=(A>>>14|S<<18)^(A>>>18|S<<14)^(S>>>9|A<<23),l=(S>>>14|A<<18)^(S>>>18|A<<14)^(A>>>9|S<<23),g),e(u,f,o[s],o[s+1],m),e(g[0],g[1],a[s],a[s+1],y),e(m[0],m[1],y[0],y[1],y),e(y[0],y[1],E,C,g),E=g[0],C=g[1],f=w&(b^_)^b&_,u=v&(k^B)^k&B,e(y[0],y[1],c=(v>>>28|w<<4)^(w>>>2|v<<30)^(w>>>7|v<<25),l=(w>>>28|v<<4)^(v>>>2|w<<30)^(v>>>7|w<<25),g),e(u,f,c=g[0],l=g[1],g),T=x,D=I,x=P,I=R,P=A,R=S,A=E,S=C,E=B,C=_,B=k,_=b,k=v,b=w,v=c=g[0],w=l=g[1];return e(n[0],n[1],v,w,g),n[0]=g[0],n[1]=g[1],e(n[2],n[3],k,b,g),n[2]=g[0],n[3]=g[1],e(n[4],n[5],B,_,g),n[4]=g[0],n[5]=g[1],e(n[6],n[7],E,C,g),n[6]=g[0],n[7]=g[1],e(n[8],n[9],A,S,g),n[8]=g[0],n[9]=g[1],e(n[10],n[11],P,R,g),n[10]=g[0],n[11]=g[1],e(n[12],n[13],x,I,g),n[12]=g[0],n[13]=g[1],e(n[14],n[15],T,D,g),n[14]=g[0],n[15]=g[1],n}var r,n,o,a,i,s,c,l=d.unpackData;return r=l("y7udXcEFnthimikqNnzVB5FZAVowcN0XFS/s2PcOWTlnMyZn/8ALMY60SodoWBUR2wwuDWT5j6dHtUgdvvpPpA==",4,1),n=l("agnmZ/O8yQi7Z66FhMqnOzxu83L+lPgrpU/1Ol8dNvFRDlJ/reaC0ZsFaIwrPmwfH4PZq/tBvWtb4M0ZE34heQ",4,1),o=l("QoovmNcoriJxN0SRI+9lzbXA+8/sTTsv6bXbpYGJ27w5VsJb80i1OFnxEfG2BdAZkj+CpK8ZT5urHF7V2m2BGNgHqpijAwJCEoNbAUVwb74kMYW+TuSyjFUMfcPV/7Ticr5ddPJ7iW+A3rH+OxaWsZvcBqclxxI1wZvxdM9pJpTkm2nBnvFK0u++R4Y4TyXjD8GdxouM1bUkDKHMd6ycZS3pLG9ZKwJ1SnSEqm6m5INcsKncvUH71Hb5iNqDEVO1mD5RUu5m36uoMcZtLbQyELADJ8iY+yE/v1l/x77vDuTG4AvzPaiPwtWnkUeTCqclBspjUeADgm8UKSlnCg5ucCe3CoVG0i/8LhshOFwmySZNLG38WsQq7VM4DROdlbPfZQpzVIuvY952agq7PHeyqIHCyS5H7a7mknIshRSCNTuiv+ihTPEDZKgaZku8QjABwkuLcND4l5HHbFGjBlS+MNGS6BnW71IY1pkGJFVlqRD0DjWFV3EgKhBqoHAyu9G4GaTBFrjS0MgeN2wIUUGrUydId0zfjuuZNLC8teGbSKg5HAyzxclaY07YqkrjQYrLW5zKT3dj43NoLm/z1rK4o3SPgu5d77L8eKVjb0MXL2CEyHgUofCrcozHAggaZDnskL7/+iNjHiikUGzr3oK96b75o/eyxnkVxnF48uNyUyvKJz7O6iZhnNGGuMchwMIH6tp91s3g6x71fU9/7m7ReAbwZ6pyF2+6CmN9xaLImKYRP5gEvvkNrhtxCzUTHEcbKNt39SMEfYQyyqt7QMckkzyevgoVyb68Qx1nxJwQDUxMxdS+yz5Ctll/KZz8ZX4qX8tvqzrW+uxsRBmMSkdYFw==",4,1),a=l("MEEwDQYJYIZIAWUDBAICBQAEMA"),i=l("MFEwDQYJYIZIAWUDBAIDBQAEQA"),s=l("MC0wDQYJYIZIAWUDBAIFBQAEHA"),c=l("MDEwDQYJYIZIAWUDBAIGBQAEIA"),{sha384:function(){return E("SHA-384",a,r,o,128,t,384)},sha512:function(){return E("SHA-512",i,n,o,128,t,512)},sha512_224:function(){return E("SHA-512.224",s,n,o,128,t,224)},sha512_256:function(){return E("SHA-512.256",c,n,o,128,t,256)}}}();void 0!==t&&(S.instances={},S.getInstance384=function(e){return S.instances[e]||(S.instances[e]=S.sha384())},S.getInstance512=function(e){return S.instances[e]||(S.instances[e]=S.sha512())},S.deleteInstance=function(e){S.instances[e]=null,delete S.instances[e]},S.hash384=function(e){if("process"!==e.operationSubType)return"finish"===e.operationSubType?S.sha384.finish():S.sha384().computeHash(e.buffer);S.sha384.process(e.buffer)},S.hash512=function(e){if("process"!==e.operationSubType)return"finish"===e.operationSubType?S.sha512.finish():S.sha512().computeHash(e.buffer);S.sha512.process(e.buffer)},t.register("digest","SHA-384",S.hash384),t.register("digest","SHA-512",S.hash512)),f["SHA-384"]=S.sha384,f["SHA-512"]=S.sha512;var P=function(e,t){var r,n,o,a,i,s={384:128,512:128}[t.name.replace(/SHA-/,"")]||64,c=e.length===s?e:e.length>s?u(t.computeHash(e),s):u(e,s);function l(e,t){for(var r=new Array(e),n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function u(e,t){for(var r=e.slice(),n=e.length;n<t;n++)r.push(0);return r}function f(e){i?t.process(e):(i=a.concat(e),t.process(i))}function d(){var e=t.finish(),r=o.concat(e);return t.computeHash(r)}function h(){e=null,t=null,c=null}r=new Array(s),n=new Array(s);for(var p=0;p<s;p++)r[p]=54,n[p]=92;return a=l(c,r),o=l(c,n),{computeHmac:function(e,t,r){f(e);var n=d();return h(),n},process:function(e,t,r){return f(e),null},finish:function(e,t){var r=d();return h(),r}}};if(void 0!==t){var R={};P.signHmac=function(e){var t,r=e.keyHandle.algorithm.hash.name.toUpperCase(),n=f[r](),o=e.workerid;return R[o]||(R[o]=P(e.keyData,n)),"process"===e.operationSubType?(R[o].process(e.buffer),null):"finish"===e.operationSubType?(t=R[o].finish(),R[o]=null,t):(t=R[o].computeHmac(e.buffer),R[o]=null,t)},P.verifyHmac=function(e){var t,r=e.keyHandle.algorithm.hash.name.toUpperCase(),n=f[r](),o=e.workerid;return R[o]||(R[o]=P(e.keyData,n)),"process"===e.operationSubType?(R[o].process(e.buffer),null):"finish"===e.operationSubType?(t=R[o].finish(),t=d.arraysEqual(t,e.signature),R[o]=null,t):(t=R[o].computeHmac(e.buffer),t=d.arraysEqual(t,e.signature),R[o]=null,t)},P.generateKey=function(e){var t=e.algorithm.length;return t||(t={"SHA-1":64,"SHA-224":64,"SHA-256":64,"SHA-384":128,"SHA-512":128}[e.algorithm.hash.name.toUpperCase()]),{type:"keyGeneration",keyData:Y.getBytes(t),keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:e.usages,type:"secret"}}},P.importKey=function(e){var t;if(e.keyData.length,"jwk"===e.format)(t=g.jwkToKey(e.keyData,e.algorithm,["k"])).alg=t.alg.replace("HS","SHA-");else{if("raw"!==e.format)throw new Error("unsupported import format");t={k:d.toArray(e.keyData)}}return{type:"keyImport",keyData:t.k,keyHandle:{algorithm:{name:"HMAC",hash:{name:e.algorithm.hash.name}},extractable:e.extractable||t.extractable,usages:e.usages,type:"secret"}}},P.exportKey=function(e){if("jwk"===e.format)return{type:"keyExport",keyHandle:g.keyToJwk(e.keyHandle,e.keyData)};if("raw"===e.format)return{type:"keyExport",keyHandle:e.keyData};throw new Error("unsupported export format")},t.register("importKey","HMAC",P.importKey),t.register("exportKey","HMAC",P.exportKey),t.register("generateKey","HMAC",P.generateKey),t.register("sign","HMAC",P.signHmac),t.register("verify","HMAC",P.verifyHmac)}var x,I,T,D,O,M,N,L,U,H,K={aes:function(e){var t,r,n,o;switch(x||(x=d.unpackData("AAIEBggKDA4QEhQWGBocHiAiJCYoKiwuMDI0Njg6PD5AQkRGSEpMTlBSVFZYWlxeYGJkZmhqbG5wcnR2eHp8foCChIaIioyOkJKUlpianJ6goqSmqKqsrrCytLa4ury+wMLExsjKzM7Q0tTW2Nrc3uDi5Obo6uzu8PL09vj6/P4bGR8dExEXFQsJDw0DAQcFOzk/PTMxNzUrKS8tIyEnJVtZX11TUVdVS0lPTUNBR0V7eX99c3F3dWtpb21jYWdlm5mfnZORl5WLiY+Ng4GHhbu5v72zsbe1q6mvraOhp6Xb2d/d09HX1cvJz83DwcfF+/n//fPx9/Xr6e/t4+Hn5QADBgUMDwoJGBseHRQXEhEwMzY1PD86OSgrLi0kJyIhYGNmZWxvaml4e359dHdycVBTVlVcX1pZSEtOTURHQkHAw8bFzM/Kydjb3t3U19LR8PP29fz/+vno6+7t5Ofi4aCjpqWsr6qpuLu+vbS3srGQk5aVnJ+amYiLjo2Eh4KBm5idnpeUkZKDgIWGj4yJiquora6npKGis7C1tr+8ubr7+P3+9/Tx8uPg5ebv7Onqy8jNzsfEwcLT0NXW39zZ2ltYXV5XVFFSQ0BFRk9MSUpraG1uZ2RhYnNwdXZ/fHl6Ozg9Pjc0MTIjICUmLywpKgsIDQ4HBAECExAVFh8cGRoADhwSODYkKnB+bGJIRlRa4O788tjWxMqQnoyCqKa0utvVx8nj7f/xq6W3uZOdj4E7NScpAw0fEUtFV1lzfW9hraOxv5WbiYfd08HP5ev5901DUV91e2lnPTMhLwULGRd2eGpkTkBSXAYIGhQ+MCIslpiKhK6gsrzm6Pr03tDCzEFPXVN5d2VrMT8tIwkHFRuhr72zmZeFi9HfzcPp5/X7mpSGiKKsvrDq5Pb40tzOwHp0ZmhCTF5QCgQWGDI8LiDs4vD+1NrIxpySgI6kqri2DAIQHjQ6KCZ8cmBuREpYVjc5KyUPARMdR0lbVX9xY23X2cvF7+Hz/aepu7WfkYONAA0aFzQ5LiNoZXJ/XFFGS9Ddysfk6f7zuLWir4yBlpu7tqGsj4KVmNPeycTn6v3wa2ZxfF9SRUgDDhkUNzotIG1gd3pZVENOBQgfEjE8Kya9sKeqiYSTntXYz8Lh7Pv21tvMweLv+PW+s6SpioeQnQYLHBEyPyglbmN0eVpXQE3a18DN7uP0+bK/qKWGi5yRCgcQHT4zJClib3h1VltMQWFse3ZVWE9CCQQTHj0wJyqxvKumhYifktnUw87t4Pf6t7qtoIOOmZTf0sXI6+bx/GdqfXBTXklEDwIVGDs2ISwMARYbODUiL2RpfnNQXUpH3NHGy+jl8v+0ua6jgI2alwALFh0sJzoxWFNORXR/Ymmwu6atnJeKgejj/vXEz9LZe3BtZldcQUojKDU+DwQZEsvA3dbn7PH6k5iFjr+0qaL2/eDr2tHMx66luLOCiZSfRk1QW2phfHceFQgDMjkkL42Gm5Chqre81d7DyPny7+Q9NisgERoHDGVuc3hJQl9U9/zh6tvQzcavpLmyg4iVnkdMUVprYH12HxQJAjM4JS6Mh5qRoKu2vdTfwsn48+7lPDcqIRAbBg1kb3J5SENeVQEKFxwtJjswWVJPRHV+Y2ixuqesnZaLgOni//TFztPYenFsZ1ZdQEsiKTQ/DgUYE8rB3Nfm7fD7kpmEj761qKMACRIbJC02P0hBWlNsZX53kJmCi7S9pq/Y0crD/PXu5zsyKSAfFg0Ec3phaFdeRUyrormwj4adlOPq8fjHztXcdn9kbVJbQEk+NywlGhMIAebv9P3Cy9DZrqe8tYqDmJFNRF9WaWB7cgUMFx4hKDM63dTPxvnw6+KVnIeOsbijquzl/vfIwdrTpK22v4CJkpt8dW5nWFFKQzQ9Ji8QGQIL197FzPP64eiflo2Eu7KpoEdOVVxjanF4DwYdFCsiOTCak4iBvrespdLbwMn2/+TtCgMYES4nPDVCS1BZZm90faGos7qFjJee6eD78s3E39YxOCMqFRwHDnlwa2JdVE9GY3x3e/Jrb8UwAWcr/terdsqCyX36WUfwrdSir5ykcsC3/ZMmNj/3zDSl5fFx2DEVBMcjwxiWBZoHEoDi6yeydQmDLBobblqgUjvWsynjL4RT0QDtIPyxW2rLvjlKTFjP0O+q+0NNM4VF+QJ/UDyfqFGjQI+SnTj1vLbaIRD/89LNDBPsX5dEF8Snfj1kXRlzYIFP3CIqkIhG7rgU3l4L2+AyOgpJBiRcwtOsYpGV5HnnyDdtjdVOqWxW9Opleq4IunglLhymtMbo3XQfS72LinA+tWZIA/YOYTVXuYbBHZ7h+JgRadmOlJseh+nOVSjfjKGJDb/mQmhBmS0PsFS7FlIJatUwNqU4v0CjnoHz1/t84zmCmy//hzSOQ0TE3unLVHuUMqbCIz3uTJULQvrDTgguoWYo2SSydluiSW2L0SVy+PZkhmiYFtSkXMxdZbaSbHBIUP3tudpeFUZXp42dhJDYqwCMvNMK9+RYBbizRQbQLB6Pyj8PAsGvvQMBE4prOpERQU9n3OqX8s/O8LTmc5asdCLnrTWF4vk36Bx1325H8RpxHSnFiW+3Yg6qGL4b/FY+S8bSeSCa28D+eM1a9B/dqDOIB8cxsRIQWSeA7F9gUX+pGbVKDS3lep+TyZzvoOA7Ta4q9bDI67s8g1OZYRcrBH66d9Ym4WkUY1UhDH2NAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuNAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuNAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuNAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuNAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuN",256,!1),I=x[0],T=x[1],D=x[2],O=x[3],M=x[4],N=x[5],L=x[6],U=x[7],H=x[8]),t=8*e.length){case 128:case 192:case 256:break;default:throw new Error("Unsupported keyLength")}n=6+(r=t/32);var a=function(e){var t=e[1];e[1]=e[5],e[5]=e[9],e[9]=e[13],e[13]=t,t=e[2],e[2]=e[10],e[10]=t,t=e[6],e[6]=e[14],e[14]=t,t=e[15],e[15]=e[11],e[11]=e[7],e[7]=e[3],e[3]=t},i=function(e){var t=e[13];e[13]=e[9],e[9]=e[5],e[5]=e[1],e[1]=t,t=e[10],e[10]=e[2],e[2]=t,t=e[14],e[14]=e[6],e[6]=t,t=e[3],e[3]=e[7],e[7]=e[11],e[11]=e[15],e[15]=t},s=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],i=e[5],s=e[6],c=e[7],l=e[8],u=e[9],f=e[10],d=e[11],h=e[12],p=e[13],g=e[14],m=e[15];e[0]=I[t]^T[r]^n^o,e[1]=t^I[r]^T[n]^o,e[2]=t^r^I[n]^T[o],e[3]=T[t]^r^n^I[o],e[4]=I[a]^T[i]^s^c,e[5]=a^I[i]^T[s]^c,e[6]=a^i^I[s]^T[c],e[7]=T[a]^i^s^I[c],e[8]=I[l]^T[u]^f^d,e[9]=l^I[u]^T[f]^d,e[10]=l^u^I[f]^T[d],e[11]=T[l]^u^f^I[d],e[12]=I[h]^T[p]^g^m,e[13]=h^I[p]^T[g]^m,e[14]=h^p^I[g]^T[m],e[15]=T[h]^p^g^I[m]},c=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],i=e[5],s=e[6],c=e[7],l=e[8],u=e[9],f=e[10],d=e[11],h=e[12],p=e[13],g=e[14],m=e[15];e[0]=D[t]^M[r]^O[n]^N[o],e[1]=N[t]^D[r]^M[n]^O[o],e[2]=O[t]^N[r]^D[n]^M[o],e[3]=M[t]^O[r]^N[n]^D[o],e[4]=D[a]^M[i]^O[s]^N[c],e[5]=N[a]^D[i]^M[s]^O[c],e[6]=O[a]^N[i]^D[s]^M[c],e[7]=M[a]^O[i]^N[s]^D[c],e[8]=D[l]^M[u]^O[f]^N[d],e[9]=N[l]^D[u]^M[f]^O[d],e[10]=O[l]^N[u]^D[f]^M[d],e[11]=M[l]^O[u]^N[f]^D[d],e[12]=D[h]^M[p]^O[g]^N[m],e[13]=N[h]^D[p]^M[g]^O[m],e[14]=O[h]^N[p]^D[g]^M[m],e[15]=M[h]^O[p]^N[g]^D[m]},l=function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},u=function(e,t,r){for(var n=0;n<e.length;n+=1)e[n]^=t[n+r]},f=function(e){for(var t=0;t<e.length;t+=1)e[t]=L[e[t]]},h=function(e){for(var t=0;t<e.length;t+=1)e[t]=U[e[t]]},p=function(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]};return o=function(e){for(var t,o,a,i,s,c,u,d=[],h=0;h<4*r;)d.push(e[h++]);for(h=r;h<4*(n+1);){if(t=p(d,h-1),h%r==0){var g=[H[h/r],0,0,0];u=void 0,u=(c=t)[0],c[0]=c[1],c[1]=c[2],c[2]=c[3],c[3]=u,f(t),t=l(t,g)}else r>6&&h%r==4&&f(t);var m=l(p(d,h-r),t);a=m,s=0,(o=d)[4*(i=h)]=a[4*s],o[4*i+1]=a[4*s+1],o[4*i+2]=a[4*s+2],o[4*i+3]=a[4*s+3],h+=1}return d}(e),{encrypt:function(e){var t,r=e;for(u(r,o,0),t=1;t<=n-1;t+=1)f(r),a(r),s(r),u(r,o,4*t*4);return f(r),a(r),u(r,o,4*n*4),r},decrypt:function(e){var t,r=e;for(u(r,o,4*n*4),t=n-1;t>=1;t-=1)i(r),h(r),u(r,o,4*t*4),c(r);return i(r),h(r),u(r,o,0),r},clear:function(){},keyLength:t,blockSize:128}}},z=z||{};z.pkcsv7=function(e){return{pad:function(t){var r=t[t.length-1>=0?t.length-1:0],n=r.length;if(n===e){var o,a=[];for(o=0;o<e;o+=1)a.push(e);t.push(a)}else for(var i=e-n&255;r.length!==e;)r.push(i)},unpad:function(t){var r=!0;t.length%e!=0&&(r=!1);for(var n=t.slice(-e),o=n[n.length-1],a=0;a<e;a++){var i=e-a<=o,s=n[a]===o;r=(!i||s)&&r}var c=r?o:0;return t.length-=c,r}}};var F=function(e){var t=e.blockSize/8,r=z.pkcsv7(t),n=function(e){var t,r,n=[];for(t=0;t<e.length;t+=1){var o=e[t];for(r=0;r<o.length;r+=1)n.push(o[r])}return n};function o(e){var r=[];c=c.concat(e);for(var n=Math.floor(c.length/t),o=0;o<n;o++)r.push(c.slice(o*t,(o+1)*t));return c=c.slice(n*t),r}function a(t){for(var r,n=[],o=0;o<t.length;o++)r=d.xorVectors(s,t[o]),n.push(e.encrypt(r)),s=n[o];return n}function i(){c=[],l=[],s=null}var s,c=[],l=[];return{init:function(e){if(e.length!==t)throw new Error("Invalid iv size");s=e.slice()},encrypt:function(e){var t=a(o(e));return l=l.concat(n(t)),this.finishEncrypt()},processEncrypt:function(e){return n(a(o(e)))},finishEncrypt:function(){var e=1===c.length?[[c[0]]]:[c];r.pad(e);var t=l.concat(n(a(e)));return i(),t},decrypt:function(e){return this.processDecrypt(e),this.finishDecrypt()},processDecrypt:function(t){var r=function(t){for(var r,n,o=[],a=0;a<t.length;a+=1)r=t[a].slice(0,t[a].length),n=e.decrypt(r),o.push(d.xorVectors(s,n)),s=t[a];return o}(o(t));l=l.concat(n(r))},finishDecrypt:function(){var e=l;return r.unpad(e),i(),e}}};if(void 0!==t){var j={};F.workerEncrypt=function(e){var t,r=e.workerid;return j[r]||(j[r]=F(K.aes(e.keyData)),j[r].init(e.algorithm.iv)),"process"===e.operationSubType?j[r].processEncrypt(e.buffer):"finish"===e.operationSubType?(t=j[r].finishEncrypt(),j[r]=null,t):(t=j[r].encrypt(e.buffer),j[r]=null,t)},F.workerDecrypt=function(e){var t,r=e.workerid;if(j[r]||(j[r]=F(K.aes(e.keyData)),j[r].init(e.algorithm.iv)),"process"!==e.operationSubType)return"finish"===e.operationSubType?(t=j[r].finishDecrypt(),j[r]=null,t):(t=j[r].decrypt(e.buffer),j[r]=null,t);j[r].processDecrypt(e.buffer)},F.generateKey=function(e){if(e.algorithm.length%8!=0)throw new Error;return{type:"keyGeneration",keyData:Y.getBytes(Math.floor(e.algorithm.length/8)),keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:e.usages,type:"secret"}}},F.importKey=function(e){var t,r=8*e.keyData.length;if("jwk"===e.format)t=g.jwkToKey(e.keyData,e.algorithm,["k"]);else{if("raw"!==e.format)throw new Error("unsupported import format");if(128!==r&&192!==r&&256!==r)throw new Error("invalid key length (should be 128, 192, or 256 bits)");t={k:d.toArray(e.keyData)}}return e.algorithm.length=8*t.k.length,{keyData:t.k,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||t.extractable,usages:e.usages,type:"secret"},type:"keyImport"}},F.exportKey=function(e){if("jwk"===e.format)return{type:"keyExport",keyHandle:g.keyToJwk(e.keyHandle,e.keyData)};if("raw"===e.format)return{type:"keyExport",keyHandle:e.keyData};throw new Error("unsupported export format")},t.register("importKey","AES-CBC",F.importKey),t.register("exportKey","AES-CBC",F.exportKey),t.register("generateKey","AES-CBC",F.generateKey),t.register("encrypt","AES-CBC",F.workerEncrypt),t.register("decrypt","AES-CBC",F.workerDecrypt)}var W=function(e){var t,r,n,o,a,i,s=d,c=[],l=e.encrypt(s.getVector(16)),u=s.getVector(16),f=[],h=[],p=0;function g(e,t){for(var r,n=Math.floor(t.length/16),o=0;o<n;o++)r=t.slice(16*o,16*o+16),u=y(s.xorVectors(u,r),e);return f=t.slice(16*n),u}function m(){var e=16*Math.ceil(p/16)-p,t=b(8*r.length),n=b(8*p),o=f.concat(s.getVector(e)).concat(t).concat(n);return g(l,o)}function y(e,t){var r,n,o,a,i,c,l=s.getVector(16),u=t.slice(0);for(o=0;o<128;o++){for(r=255&(a=e,i=o,c=void 0,c=Math.floor(i/8),-(a[c]>>7-i%8&1)),n=0;n<16;n++)l[n]=l[n]^u[n]&r;r=255&-(1&u[15]),v(u),u[0]^=225&r}return l}function v(e){for(var t=e.length-1;t>0;t--)e[t]=(1&e[t-1])<<7|e[t]>>>1;return e[0]=e[0]>>>1,e}function w(e){for(var t=256,r=1;r<=4;r++)t=(t>>>8)+e[e.length-r],e[e.length-r]=255&t;return e}function k(t,r){var n,o=Math.ceil(r.length/16),a=[];i!==t&&(i=t.slice());for(var c=0;c<o;c++){n=r.slice(16*c,16*c+16);var l=e.encrypt(i.slice());a=a.concat(s.xorVectors(n,l)),i=w(i)}return a}function b(e){return[0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]}function B(){p=0,c=[],h=[],u=s.getVector(16),f=[],i=t=r=null}return{init:function(e,i,c){if(r=i||[],(n=isNaN(c)?128:c)%8!=0)throw new Error("DataError");if(12===(t=e).length)o=t.concat([0,0,0,1]);else{var f=16*Math.ceil(t.length/16)-t.length;o=g(l,t.concat(s.getVector(f+8)).concat(b(8*t.length))),u=s.getVector(16)}var d,h;a=w(o.slice()),g(l,(d=r,h=16*Math.ceil(r.length/16)-r.length,d.concat(s.getVector(h))))},encrypt:function(e){p=e.length;var t=k(a,e);g(l,t);var r=m(),i=k(o,r).slice(0,n/8);return B(),t.slice().concat(i)},decrypt:function(e,t){p=e.length;var r=k(a,e);g(l,e);var i=m(),c=k(o,i).slice(0,n/8);return B(),s.arraysEqual(c,t)?r:null},processEncrypt:function(e){var t=(c=c.concat(e)).slice(0,16*Math.floor(c.length/16));p+=t.length,c=c.slice(t.length);var r=k(i||a,t);h=h.concat(r),g(l,r)},processDecrypt:function(e){var t=(c=c.concat(e)).slice(0,16*Math.floor((c.length-n/8)/16));p+=t.length,c=c.slice(t.length);var r=k(i||a,t);h=h.concat(r),g(l,t)},finishEncrypt:function(){var e=k(i,c);h=h.concat(e),p+=c.length;var t=m(),r=k(o,t).slice(0,n/8),a=h.slice().concat(r);return B(),a},finishDecrypt:function(){var e=Math.floor(n/8),t=c.slice(-e);c=c.slice(0,c.length-e);var r=k(i,c);h=h.concat(r),p+=c.length;var a=m(),l=k(o,a).slice(0,n/8),u=h.slice();return B(),s.arraysEqual(l,t)?u:null}}};if(void 0!==t){var J={};W.encrypt=function(e){var t,r=e.workerid;if(J[r]||(J[r]=W(K.aes(e.keyData)),J[r].init(e.algorithm.iv,e.algorithm.additionalData,e.algorithm.tagLength)),"process"!==e.operationSubType)return"finish"===e.operationSubType?(t=J[r].finishEncrypt(),J[r]=null,t):(t=J[r].encrypt(e.buffer),J[r]=null,t);J[r].processEncrypt(e.buffer)},W.decrypt=function(e){var t,r=e.workerid;if(J[r]||(J[r]=W(K.aes(e.keyData)),J[r].init(e.algorithm.iv,e.algorithm.additionalData,e.algorithm.tagLength)),"process"!==e.operationSubType){if("finish"===e.operationSubType){if(t=J[r].finishDecrypt(),J[r]=null,null===t)throw new Error("OperationError");return t}var n=e.algorithm.tagLength?Math.floor(e.algorithm.tagLength/8):16,o=e.buffer.slice(0,e.buffer.length-n),a=e.buffer.slice(-n);if(t=J[r].decrypt(o,a),J[r]=null,null===t)throw new Error("OperationError");return t}J[r].processDecrypt(e.buffer)},W.generateKey=function(e){if(e.algorithm.length%8!=0)throw new Error;return{type:"keyGeneration",keyData:Y.getBytes(Math.floor(e.algorithm.length/8)),keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:e.usages,type:"secret"}}},W.importKey=function(e){var t,r=8*e.keyData.length;if("jwk"===e.format)t=g.jwkToKey(e.keyData,e.algorithm,["k"]);else{if("raw"!==e.format)throw new Error("unsupported import format");if(128!==r&&192!==r&&256!==r)throw new Error("invalid key length (should be 128, 192, or 256 bits)");t={k:d.toArray(e.keyData)}}return{type:"keyImport",keyData:t.k,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||t.extractable,usages:e.usages,type:"secret"}}},W.exportKey=function(e){if("jwk"===e.format)return{type:"keyExport",keyHandle:g.keyToJwk(e.keyHandle,e.keyData)};if("raw"===e.format)return{type:"keyExport",keyHandle:e.keyData};throw new Error("unsupported export format")},t.register("importKey","AES-GCM",W.importKey),t.register("exportKey","AES-GCM",W.exportKey),t.register("generateKey","AES-GCM",W.generateKey),t.register("encrypt","AES-GCM",W.encrypt),t.register("decrypt","AES-GCM",W.decrypt)}function V(){if(!(this instanceof V))throw new Error("create MsrcryptoPrng object with new keyword");var e,t,r,n,o=!1,a=1,i=Math.pow(2,48);function s(e){var t;for(t=e.length-1;t>=0&&(e[t]+=1,e[t]>=256&&(e[t]=0),!e[t]);t-=1);}function c(){e=d.getVector(32),t=d.getVector(16),r=32,n=48,a=1}function l(e,t){if((t=t||[0]).length>n)throw new Error("Incorrect entropy or additionalEntropy length");t=t.concat(d.getVector(n-t.length)),e=e.concat(d.getVector((n-e.length%n)%n));for(var r=0;r<e.length;r+=n)u(d.xorVectors(e.slice(r,r+n),t));a=1}function u(o){for(var a=[],i=new K.aes(e);a.length<n;){s(t);var c=t.slice(0,16),l=i.encrypt(c);a=a.concat(l)}a=d.xorVectors(a,o),e=a.slice(0,r),t=a.slice(r)}function f(r,o){if(r>=65536)throw new Error("too much random requested");if(a>i)throw new Error("Reseeding is required");if(o&&o.length>0){for(;o.length<n;)o=o.concat(d.getVector(n-o.length));u(o)}else o=d.getVector(n);for(var c=[],l=new K.aes(e);c.length<r;){s(t);var f=t.slice(0,t.length),h=l.encrypt(f);c=c.concat(h)}return c=c.slice(0,r),u(o),a+=1,c}return c(),{reseed:l,getBytes:function(e,t){if(!o)throw new Error("can't get randomness before initialization");return f(e,t)},getNonZeroBytes:function(e,t){if(!o)throw new Error("can't get randomness before initialization");for(var r,n=[];n.length<e;){r=f(e,t);for(var a=0;a<r.length;a+=1)0!==r[a]&&n.push(r[a])}return n.slice(0,e)},init:function(e,t){if(e.length<n)throw new Error("Initial entropy length too short");c(),l(e,t),o=!0}}}var Z,Y=new V,q=function(){var e=[],t=[];function r(r){var n,o=t.length;for(n=0;n<o;n++)if((t[n]+r)%e[n]==0)return!1;return!0}function n(r){var n,o,a,i,s,c,l=r.length-1,u=m.DIGIT_BASE,f=r[l];for(0===e.length&&(e=function(e){var t,r,n=new Array(e+1),o=[],a=0|Math.sqrt(e);for(t=3;t<=a;t+=2)for(r=t*t;r<=e;r+=2*t)n[r]=0;for(t=3;t<=e;t+=2)0!==n[t]&&o.push(t);return o}(16384)),c=e.length,t=new Array(c),n=0;n<c;n++){for(o=l,f<(s=e[n])?(a=f,o--):a=0;o>=0;)a=(i=a*u+r[o--])-(i/s|0)*s;t[n]=a}}function o(e,t){var r=e,n=[];m.subtract(r,[1],n);var o=function(e){var t,r=0,n=0;if(m.isZero(e))return 0;for(r=0;0===e[r];r++);for(n=0,t=2;e[r]%t==0;t*=2,n++);return r*m.DIGIT_BITS+n}(n),i=[];m.shiftRight(n,i,o);for(var s,c=function(e){var t=0,r=0,n=0;if(m.isZero(e))return 0;for(t=e.length-1;0===e[t];t--);for(n=1<<(r=m.DIGIT_BITS-1);r>0&&0==(e[t]&n);n>>>=1,r--);return t*m.DIGIT_BITS+r}(r),l=m.MontgomeryMultiplier(r),u=1;u<=t;u++){var f=!1;do{s=a(c)}while(m.compareDigits(s,n)>=0);var d=[];if(l.modExp(s,i,d,!0),0!==m.compareDigits(d,[1])&&0!==m.compareDigits(d,n)){for(var h=1;h<o;h++){if(l.montgomeryMultiply(d,d,d),0===m.compareDigits(d,n)){f=!0;break}if(0===m.compareDigits(d,[1]))return!1}if(!1===f)return!1}}return!0}function a(e){var t=Math.ceil(e/8),r=Y.getBytes(t);return r[0]|=128,r[r.length-1]|=1,m.bytesToDigits(r)}return{generatePrime:function(e){var t=a(e),i=0,s=[];for(n(t);;){if(r(i)&&(m.add(t,[i],s),!0===o(s,6)))return s;i+=2}}}}(),G=function(e){var t=d,r=e.hasOwnProperty("n")&&e.hasOwnProperty("d"),n=e.hasOwnProperty("p")&&e.hasOwnProperty("q"),o=e.n.length;function a(e){var r=m.digitsToBytes(e);return t.padFront(r,0,o),r}function i(e,t,r){var n=m.bytesToDigits(t),o=m.IntegerGroup(r),a=o.createElementFromBytes(e);return o.modexp(a,n).m_digits}return{encrypt:function(t){return a(i(t,e.e,e.n))},decrypt:function(t){if(n)return function(t){var r=m.bytesToDigits,n=e.p,o=e.q,i=e.dp,s=e.dq,c=e.qi,l=r(n),u=r(o),f=new Array(l.length+u.length),d=new Array(l.length+1),h=new Array(u.length+1),p=r(t),g=m.MontgomeryMultiplier,y=new g(e.ctxp?void 0:l,e.ctxp),v=new g(e.ctxq?void 0:u,e.ctxq);y.reduce(p,f),y.modExp(f,r(i),d),v.reduce(p,f),v.modExp(f,r(s),h);var w=m.subtract(d,h,f);return 0!==w&&m.subtract(h,d,f),m.modMul(f,r(c),l,p),0!==w&&m.subtract(l,p,p),m.multiply(p,u,f),m.add(h,f,d),a(d)}(t);if(r)return function(t){return a(i(t,e.d,e.n))}(t);throw new Error("missing private key")}}},$=function(e,t,r){var n,o,a,i=[],s=r.hashLen/8;for(a=0;a<=Math.floor(t/s);a+=1)n=[a>>>24&255,a>>>16&255,a>>>8&255,255&a],o=r.computeHash(e.concat(n)),i=i.concat(o);return i.slice(0,t)};(Z=Z||{}).oaep=function(e,t){var r=d,n=Y,o=e.n.length;if(null===t)throw new Error("must supply hashFunction");return{pad:function(e,a){return function(e,a){var i,s,c,l,u,f,d,h,p;if(e.length>o-t.hashLen/8*2-2)throw new Error("Message too long.");return null==a&&(a=[]),i=t.computeHash(a),s=o-e.length-2*i.length-2,c=r.getVector(s),l=i.concat(c,[1],e),u=n.getBytes(i.length),f=$(u,o-i.length-1,t),d=r.xorVectors(l,f),h=$(d,i.length,t),p=r.xorVectors(u,h),[0].concat(p).concat(d).slice()}(e,a)},unpad:function(e,n){return function(e,n){var a,i,s,c,l,u,f,d,h=0,p=0===e[0];for(n||(n=[]),a=t.computeHash(n),i=e.slice(1,a.length+1),s=e.slice(a.length+1),c=$(s,a.length,t),l=r.xorVectors(i,c),u=$(l,o-a.length-1,t),d=(f=r.xorVectors(s,u)).slice(0,a.length),p=p&&r.arraysEqual(a,d),f=f.slice(a.length);!f[h++];);return{valid:p,data:f.slice(h)}}(e,n)}}},(Z=Z||{}).pkcs1Encrypt=function(e){var t=Y,r=e.n.length;return{pad:function(e){return function(e){var n;if(e.length>r-11)throw new Error("message too long");return n=t.getNonZeroBytes(r-e.length-3),[0,2].concat(n,[0],e)}(e)},unpad:function(e){return function(e){var t,r=function(e){for(var t=0===e[0]&&2===e[1],r=2;r<10;r++)t=t&&!!e[r];return t}(e),n=0;for(t=1;t<e.length;t+=1)n=n||+!e[t]&&t+1;return n=-r&&n,{data:e.slice(n),valid:r}}(e)}}},Z.pkcs1Sign=function(e,t){var r=d,n=e.n.length;function o(e){var o,a,i;if(a=t.computeHash(e.slice()),i=(o=t.der.concat(a)).length,n<i+11)throw new Error("intended encoded message length too short");return[0,1].concat(r.getVector(n-i-3,255),[0],o)}return{sign:function(e){return o(e)},verify:function(e,t){var n=o(t);return r.arraysEqual(e,n)}}},(Z=Z||{}).pss=function(e,t){var r=d,n=Y;return{sign:function(o,a,i){return function(o,a,i){var s=m.bitLength(e.n)-1,c=Math.ceil(s/8),l=t.computeHash(o);if(a=i?i.length:null==a?l.length:a,c<l.length+a+2)throw new Error("encoding error");i=i||n.getBytes(a);for(var u=[0,0,0,0,0,0,0,0].concat(l,i),f=t.computeHash(u),d=r.getVector(c-i.length-f.length-2).concat([1],i),h=$(f,c-f.length-1,t),p=r.xorVectors(d,h),g=0,y=0;y<8-(8*c-s);y++)g+=1<<y;return p[0]&=g,p.concat(f,[188])}(o,a,i)},verify:function(n,o,a){return function(n,o,a){var i=m.bitLength(e.n)-1,s=Math.ceil(i/8),c=t.computeHash(o),l=c.length;if(s<l+(a=null==a?l:a)+2)return!1;var u=n.slice(0,s-l-1),f=n.slice(u.length,u.length+l),d=$(f,s-l-1,t),h=r.xorVectors(u,d);h[0]&=255>>>8-(8*s-i);for(var p=0;p<s-l-a-2;p++)if(0!==h[p])return!1;if(1!==h[s-l-a-2])return!1;var g=h.slice(h.length-a),y=[0,0,0,0,0,0,0,0].concat(c,g),v=t.computeHash(y);return r.arraysEqual(v,f)}(n,o,a)}}};var Q=function(e,t,r){var n=G(e);if(!t)throw new Error("padding mode");function o(){if(!r||!r.computeHash)throw new Error("missing hash function")}var a,i=null,s=null;switch(t){case"RSAES-PKCS1-V1_5":a=Z.pkcs1Encrypt(e);break;case"RSASSA-PKCS1-V1_5":o(),a=Z.pkcs1Sign(e,r);break;case"RSA-OAEP":o(),a=Z.oaep(e,r);break;case"RSA-PSS":o(),a=Z.pss(e,r);break;case"raw":a={pad:function(e){return e},unpad:function(e){return e}};break;default:throw new Error("invalid mode")}return a&&(i=a.pad||a.sign,s=a.unpad||a.verify),{encrypt:function(e,t){var r;return r=null!==i?i(e,t):e.slice(),n.encrypt(r)},decrypt:function(e,t){var r=n.decrypt(e);if(null!==s){if(!1===(r=s(r,t)).valid)throw new Error("OperationError");r=r.data}else r=r.slice(0);return r},signData:function(e,t,r){return n.decrypt(i(e,t,r))},verifySignature:function(e,t,r){var o=n.encrypt(e);return s(o,t,r)},generateKeyPair:function(e){genRsaKeyFromRandom(e)},mode:t}};void 0!==t&&(Q.sign=function(e){var t=e.keyHandle.algorithm.hash.name,r=f[t.toUpperCase()](),n=e.algorithm.saltLength,o=e.algorithm.salt;return Q(e.keyData,e.algorithm.name,r).signData(e.buffer,n,o)},Q.verify=function(e){var t=e.keyHandle.algorithm.hash.name,r=f[t.toUpperCase()](),n=e.algorithm.saltLength;return Q(e.keyData,e.algorithm.name,r).verifySignature(e.signature,e.buffer,n)},Q.workerEncrypt=function(e){var t,r,n;switch(e.algorithm.name){case"RSAES-PKCS1-V1_5":t=Q(e.keyData,e.algorithm.name).encrypt(e.buffer);break;case"RSA-OAEP":if(!(n=e.keyHandle.algorithm.hash.name))throw new Error("unsupported hash algorithm");r=f[n.toUpperCase()](),t=Q(e.keyData,e.algorithm.name,r).encrypt(e.buffer);break;default:throw new Error("unsupported algorithm")}return t},Q.workerDecrypt=function(e){var t,r;switch(e.algorithm.name){case"RSAES-PKCS1-V1_5":t=Q(e.keyData,e.algorithm.name).decrypt(e.buffer);break;case"RSA-OAEP":var n=e.keyHandle.algorithm.hash.name;if(!n)throw new Error("unsupported hash algorithm");r=f[n.toUpperCase()](),t=Q(e.keyData,e.algorithm.name,r).decrypt(e.buffer);break;default:throw new Error("unsupported algorithm")}return t},Q.importKey=function(e){var t;if("jwk"===e.format)(t=g.jwkToKey(e.keyData,e.algorithm,["n","e","d","q","p","dq","dp","qi"])).d&&(t.ctxp=new m.MontgomeryMultiplier(m.bytesToDigits(t.p)).ctx,t.ctxq=new m.MontgomeryMultiplier(m.bytesToDigits(t.q)).ctx);else{if("spki"!==e.format)throw new Error("unsupported key import format.");var r=h.parse(e.keyData);if(null==r)throw new Error("invalid key data.");var n=r[1],o=h.parse(n.data.slice(n.header+1),!0);if(null==o)throw new Error("invalid key data.");var a=o[0],i=o[1];if("INTEGER"!==a.type||"INTEGER"!==i.type)throw new Error("invalid key data.");a=a.data.slice(a.header),i=i.data.slice(i.header),0===a[0]&&128&a[1]&&(a=a.slice(1)),0===i[0]&&128&i[1]&&(i=i.slice(1)),t={n:a,e:i}}return{type:"keyImport",keyData:t,keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:e.usages,type:t.d||t.dq?"private":"public"}}},Q.exportKey=function(e){return{type:"keyExport",keyHandle:g.keyToJwk(e.keyHandle,e.keyData)}},Q.genRsaKeyFromRandom=function(e,t){var r=t?m.bytesToDigits(t):[65537];do{var n=q.generatePrime(e/2),o=q.generatePrime(e/2);if(m.compareDigits(o,n)>0){var a=n;n=o,o=a}var i=[];m.multiply(n,o,i);var s=[];m.subtract(n,[1],s);var c=[];m.subtract(o,[1],c);var l=[];m.multiply(s,c,l);var u=[];m.gcd(r,l,u);var f=0===m.compareDigits(u,m.One)}while(!f);var d=[];m.modInv(r,l,d);var h=[];m.reduce(d,s,h);var p=[];m.reduce(d,c,p);var g=[];m.modInv(o,n,g);var y=m.digitsToBytes;return{privateKey:{n:y(i),e:y(r),d:y(d),p:y(n),q:y(o),dp:y(h),dq:y(p),qi:y(g)},publicKey:{n:y(i),e:y(r)}}},Q.generateKeyPair=function(e){if(void 0===e.algorithm.modulusLength)throw new Error("missing modulusLength");var t,r=m.bytesToDigits;switch(e.algorithm.modulusLength){case 1024:case 2048:case 4096:t=Q.genRsaKeyFromRandom(e.algorithm.modulusLength,e.algorithm.publicExponent);break;default:throw new Error("invalid modulusLength")}var n=t.privateKey;n.ctxp=new m.MontgomeryMultiplier(r(n.p)).ctx,n.ctxq=new m.MontgomeryMultiplier(r(n.q)).ctx;var o,a,i=e.algorithm.name;return i.slice(i.indexOf("-")+1).toUpperCase(),"RSASSA-PKCS1-V1_5"===i||"RSA-PSS"===i?(o=["verify"],a=["sign"]):(o=["encrypt"],a=["decrypt"]),{type:"keyGeneration",keyPair:{publicKey:{keyData:t.publicKey,keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:o,type:"public"}},privateKey:{keyData:t.privateKey,keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:a,type:"private"}}}}},t.register("sign","RSASSA-PKCS1-V1_5",Q.sign),t.register("sign","RSA-PSS",Q.sign),t.register("verify","RSASSA-PKCS1-V1_5",Q.verify),t.register("verify","RSA-PSS",Q.verify),t.register("encrypt","RSAES-PKCS1-V1_5",Q.workerEncrypt),t.register("decrypt","RSAES-PKCS1-V1_5",Q.workerDecrypt),t.register("encrypt","RSA-OAEP",Q.workerEncrypt),t.register("decrypt","RSA-OAEP",Q.workerDecrypt),t.register("importKey","RSA-OAEP",Q.importKey),t.register("importKey","RSAES-PKCS1-V1_5",Q.importKey),t.register("importKey","RSASSA-PKCS1-V1_5",Q.importKey),t.register("importKey","RSA-PSS",Q.importKey),t.register("exportKey","RSA-OAEP",Q.exportKey),t.register("exportKey","RSAES-PKCS1-V1_5",Q.exportKey),t.register("exportKey","RSASSA-PKCS1-V1_5",Q.exportKey),t.register("exportKey","RSA-PSS",Q.exportKey),t.register("generateKey","RSA-OAEP",Q.generateKeyPair),t.register("generateKey","RSAES-PKCS1-V1_5",Q.generateKeyPair),t.register("generateKey","RSASSA-PKCS1-V1_5",Q.generateKeyPair),t.register("generateKey","RSA-PSS",Q.generateKeyPair));var X={deriveBits:function(e){for(var t=e.algorithm.hash.name,r=f[t.toUpperCase()](),n=e.algorithm,o=ie.toArray(n.algorithmId).concat(ie.toArray(n.partyUInfo),ie.toArray(n.partyVInfo),ie.toArray(n.publicInfo)||[],ie.toArray(n.privateInfo)||[]),a=Math.ceil(e.length/r.hashLen),i=1,s=e.keyData.concat(o),c=[],l=0;l<a;l++){var u=ie.int32ToBytes(i++).concat(s),d=r.computeHash(u);c=c.concat(d)}return c.slice(0,e.length/8)}};void 0!==t&&(X.importKey=function(e){var t;if("raw"!==e.format)throw new Error("unsupported import format");if(t=d.toArray(e.keyData),!1!==e.extractable)throw new Error("only extractable=false is supported.");return{type:"keyImport",keyData:t,keyHandle:{algorithm:{name:"CONCAT"},extractable:!1,usages:e.usages,type:"secret"}}},t.register("deriveBits","CONCAT",X.deriveBits),t.register("importKey","CONCAT",X.importKey));var ee={deriveBits:function(e){var t,r,n=e.algorithm,o=e.keyData,a=e.length,i=n.iterations,s=Array.apply(null,n.salt),c=Math.ceil(a/8),l=[];switch(n.hash.name.toUpperCase()){case"SHA-1":t=20;break;case"SHA-256":t=32;break;case"SHA-384":t=48;break;case"SHA-512":t=64;break;default:throw new Error("Unsupported hash algorithm")}r=Math.ceil(c/t);var u=P.importKey({format:"raw",keyData:o,algorithm:{name:"HMAC",hash:n.hash}}),f={algorithm:n,keyHandle:u.keyHandle,keyData:u.keyData,workerid:0,buffer:null};function d(e,r,n){for(var o=[],a=e.concat([n>>>24&255,n>>>16&255,n>>>8&255,255&n]),i=0;i<r;i++){f.buffer=a,a=P.signHmac(f);for(var s=0;s<t;s++)o[s]=~~o[s]^a[s]}return o}for(var h=1;h<=r;h++)l=l.concat(d(s,i,h));return l.length=c,l}};void 0!==t&&(ee.importKey=function(e){var t;if("raw"!==e.format)throw new Error("unsupported import format");if(t=d.toArray(e.keyData),!1!==e.extractable)throw new Error("only extractable=false is supported.");return{type:"keyImport",keyData:t,keyHandle:{algorithm:{name:"PBKDF2"},extractable:!1,usages:e.usages,type:"secret"}}},t.register("deriveBits","PBKDF2",ee.deriveBits),t.register("importKey","PBKDF2",ee.importKey));var te={deriveBits:function(e){var t,r,n,o=e.algorithm,a=e.keyData,i=e.length,s=o.salt,c=Math.ceil(i/8),l=[],u=d.toArray(o.info),f=[];switch(o.hash.name.toUpperCase()){case"SHA-1":t=20;break;case"SHA-256":t=32;break;case"SHA-384":t=48;break;case"SHA-512":t=64;break;default:throw new Error("Unsupported hash algorithm.")}if(null==o.salt)throw new Error("HkdfParams: salt: Missing required property.");if(null==o.info)throw new Error("HkdfParams: info: Missing required property.");if(i%8!=0)throw new Error("The length provided for HKDF is not a multiple of 8 bits.");if(c>255*t)throw new Error("The length provided for HKDF is too large.");for(0===s.length&&(s=d.getVector(t)),(n={workerid:0,keyHandle:{algorithm:o},keyData:s,buffer:a}).keyData=P.signHmac(n),r=0;r<Math.ceil(c/t);r++)n.buffer=f.concat(u).concat([1+r]),f=P.signHmac(n),l=l.concat(f);return l.slice(0,c)}};void 0!==t&&(te.importKey=function(e){var t;if("raw"!==e.format)throw new Error("unsupported import format");if(t=d.toArray(e.keyData),!1!==e.extractable)throw new Error("only extractable=false is supported.");return{type:"keyImport",keyData:t,keyHandle:{algorithm:{name:"HKDF"},extractable:!1,usages:e.usages,type:"secret"}}},t.register("deriveBits","HKDF",te.deriveBits),t.register("importKey","HKDF",te.importKey));var re={deriveBits:function(e){var t,r,n,o=e.algorithm,a=e.keyData,i=e.length,s=o.label,c=o.context,l=Math.ceil(i/8),u=[];switch(o.hash.name.toUpperCase()){case"SHA-1":t=20;break;case"SHA-256":t=32;break;case"SHA-384":t=48;break;case"SHA-512":t=64;break;default:throw new Error("Unsupported hash algorithm.")}if(null==o.label)throw new Error("HkdfCtrParams: label: Missing required property.");if(null==o.context)throw new Error("HkdfCtrParams: context: Missing required property.");if(i%8!=0)throw new Error("The length provided for HKDF-CTR is not a multiple of 8 bits.");if(l>255*t)throw new Error("The length provided for HKDF-CTR is too large.");n={workerid:0,keyHandle:{algorithm:o},keyData:a,buffer:a};var f=s.concat([0],c,ie.int32ToBytes(i));for(r=1;r<=Math.ceil(l/t);r++)n.buffer=ie.int32ToBytes(r).concat(f),u=u.concat(P.signHmac(n));return u.slice(0,l)}};void 0!==t&&(re.importKey=function(e){var t;if("raw"!==e.format)throw new Error("unsupported import format");if(t=d.toArray(e.keyData),!1!==e.extractable)throw new Error("only extractable=false is supported.");return{type:"keyImport",keyData:t,keyHandle:{algorithm:{name:"HKDF-CTR"},extractable:!1,usages:e.usages,type:"secret"}}},t.register("deriveBits","HKDF-CTR",re.deriveBits),t.register("importKey","HKDF-CTR",re.importKey));var ne=function(e){var t=m.bytesToDigits,r=m.digitsToBytes,n=e,o=new y.EllipticCurveOperatorFp(e);return{generateKey:function(t){var a=[],i=Y.getBytes(e.order.length*m.DIGIT_NUM_BYTES);m.reduce(m.bytesToDigits(i),n.order,a);var s=n.allocatePointStorage();return o.scalarMultiply(a,n.generator,s),{privateKey:{x:r(s.x),y:r(s.y),d:r(a)},publicKey:{x:r(s.x),y:r(s.y)}}},deriveBits:function(e,r,a){var i=new y.EllipticCurvePointFp(n,!1,t(r.x),t(r.y),null,!1),s=n.allocatePointStorage();o.convertToJacobianForm(s),o.convertToMontgomeryForm(s),o.scalarMultiply(t(e.d),i,s),o.convertToAffineForm(s),o.convertToStandardForm(s);var c=m.digitsToBytes(s.x,!0,r.x.length);if(a&&8*c.length<a)throw new Error("DataError");var l=a%8,u=0===l?255:65280>>>l;return(c=a?c.slice(0,Math.ceil(a/8)):c)[c.length-1]=c[c.length-1]&u,c},computePublicKey:function(e){n.generator.isInMontgomeryForm||o.convertToMontgomeryForm(n.generator);var a=n.allocatePointStorage();return o.convertToJacobianForm(a),o.convertToMontgomeryForm(a),o.scalarMultiply(t(e),n.generator,a),{x:r(a.x),y:r(a.y)}}}};void 0!==t&&(ne.deriveBits=function(e){var t=y.createCurve(e.algorithm.namedCurve.toUpperCase()),r=e.keyData,n=e.additionalKeyData;return ne(t).deriveBits(r,n,e.length)},ne.deriveKey=function(e){throw new Error("not supported")},ne.generateKey=function(e){var t=y.createCurve(e.algorithm.namedCurve.toUpperCase()),r=ne(t).generateKey();return{type:"keyPairGeneration",keyPair:{publicKey:{keyData:r.publicKey,keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:[],type:"public"}},privateKey:{keyData:r.privateKey,keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:e.usages,type:"private"}}}}},ne.importKey=function(e){if("raw"===e.format){var t=e.keyData;if(4!==t[0])throw new Error("DataError");var r=~~((t.length-1)/2),n=e.algorithm.namedCurve.toUpperCase(),o=t.slice(1,r+1),a=t.slice(r+1);if(!1===y.validatePoint(n,o,a))throw new Error("DataError");return{type:"keyImport",keyData:{x:o,y:a},keyHandle:{algorithm:e.algorithm,extractable:e.extractable||i.extractable,usages:e.usages,type:"public"}}}if("jwk"===e.format){var i=g.jwkToKey(e.keyData,e.algorithm,["x","y","d","crv"]);if(i.d&&(!i.x||!i.y)){var s=y.createCurve(e.algorithm.namedCurve.toUpperCase()),c=ne(s).computePublicKey(i.d);i.x=c.x,i.y=c.y}if(!1===y.validatePoint(e.algorithm.namedCurve.toUpperCase(),i.x,i.y))throw new Error("DataError");return{type:"keyImport",keyData:i,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||i.extractable,usages:e.usages,type:i.d?"private":"public"}}}},ne.exportKey=function(e){if("raw"===e.format&&"public"===e.keyHandle.type)return{type:"keyExport",keyHandle:[4].concat(e.keyData.x,e.keyData.y)};if("jwk"===e.format)return{type:"keyExport",keyHandle:g.keyToJwk(e.keyHandle,e.keyData)};throw new Error("unsupported export format.")},t.register("importKey","ECDH",ne.importKey),t.register("exportKey","ECDH",ne.exportKey),t.register("generateKey","ECDH",ne.generateKey),t.register("deriveBits","ECDH",ne.deriveBits),t.register("deriveKey","ECDH",ne.deriveKey));var oe,ae=function(e){var t=m.bytesToDigits,r=m.digitsToBytes,n=new y.EllipticCurveOperatorFp(e),o=r(e.order).length,a=1===e.type;function i(t){var r=e.allocatePointStorage();return n.scalarMultiply(t,e.generator,r),{publicKey:r,privateKey:t}}function s(t){var r=[];return t||(t=Y.getBytes(e.order.length*m.DIGIT_NUM_BYTES)),m.reduce(m.bytesToDigits(t),e.order,r),i(r)}function c(r){r.length>o&&(r.length=o);var n=t(r);if(a){var i=8-e.rbits%8;m.shiftRight(n,n,i)}return m.reduce(n,e.order,n),n}return{createKey:function(e){return i(t(e))},generateKey:s,sign:function(n,a,i){i||(i=s());var l=i.publicKey.x,u=i.privateKey,f=t(n.d),h=c(a.slice()),p=[],g=[];m.reduce(l,e.order,l),m.modMul(l,f,e.order,p),m.add(p,h,p),m.reduce(p,e.order,p),m.modInvCT(u,e.order,g),m.modMul(p,g,e.order,p);var y=d.padFront(r(l,!0,o),0,o),v=d.padFront(r(p,!0,o),0,o);return y.concat(v)},verify:function(r,o,i){var s=Math.floor(o.length/2),l=t(o.slice(0,s)),u=t(o.slice(s)),f=c(i.slice()),d=[],h=[],p=new y.EllipticCurvePointFp(e,!1,t(r.x),t(r.y),null,!1);m.modInv(u,e.order,u),m.modMul(f,u,e.order,d),m.modMul(l,u,e.order,h);var g=e.allocatePointStorage(),v=e.allocatePointStorage();return a?(m.add(d,d,d),m.add(d,d,d),m.reduce(d,e.order,d),n.scalarMultiply(d,e.generator,g,!1),n.scalarMultiply(h,p,v,!1),n.convertToExtendedProjective(g),n.convertToExtendedProjective(v),n.add(v,g,g),n.normalize(g)):(n.scalarMultiply(d,e.generator,g),n.scalarMultiply(h,p,v),n.convertToJacobianForm(g),n.convertToMontgomeryForm(g),n.convertToMontgomeryForm(v),n.mixedAdd(g,v,g),n.convertToAffineForm(g),n.convertToStandardForm(g)),!g.isInfinity&&(m.reduce(g.x,e.order,g.x),0===m.compareDigits(g.x,l))}}};void 0!==t&&(ae.sign=function(e){d.checkParam(e.algorithm.hash,"Object","algorithm.hash"),d.checkParam(e.algorithm.hash.name,"String","algorithm.hash.name"),d.checkParam(e.keyHandle.algorithm.namedCurve,"String","p.keyHandle.algorithm.namedCurve");var t=e.algorithm.hash.name,r=y.createCurve(e.keyHandle.algorithm.namedCurve.toUpperCase()),n=f[t.toUpperCase()]().computeHash(e.buffer);return ae(r).sign(e.keyData,n)},ae.verify=function(e){var t=e.algorithm.hash.name,r=y.createCurve(e.keyHandle.algorithm.namedCurve.toUpperCase()),n=f[t.toUpperCase()]().computeHash(e.buffer);return ae(r).verify(e.keyData,e.signature,n)},ae.generateKey=function(e){var t=y.createCurve(e.algorithm.namedCurve.toUpperCase()),r=ae(t).generateKey(),n=m.digitsToBytes,o=n(r.publicKey.x),a=n(r.publicKey.y),i=n(r.privateKey);return{type:"keyPairGeneration",keyPair:{publicKey:{keyData:{x:o,y:a},keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:["verify"],type:"public"}},privateKey:{keyData:{x:o,y:a,d:i},keyHandle:{algorithm:e.algorithm,extractable:e.extractable,usages:["sign"],type:"private"}}}}},ae.importKey=function(e){if("raw"===e.format){var t=e.keyData;if(4!==t[0])throw new Error("DataError");var r=~~((t.length-1)/2),n=e.algorithm.namedCurve.toUpperCase(),o=t.slice(1,r+1),a=t.slice(r+1);if(!1===y.validatePoint(n,o,a))throw new Error("DataError");return{type:"keyImport",keyData:{x:o,y:a},keyHandle:{algorithm:e.algorithm,extractable:e.extractable||i.extractable,usages:e.usages,type:"public"}}}if("jwk"===e.format){var i=g.jwkToKey(e.keyData,e.algorithm,["x","y","d","crv"]);if(i.d&&(!i.x||!i.y)){var s=ae.curves[e.algorithm.namedCurve](),c=ae(s).computePublicKey(i.d);i.x=c.x,i.y=c.y}if(!1===y.validatePoint(e.algorithm.namedCurve.toUpperCase(),i.x,i.y))throw new Error("DataError");return{type:"keyImport",keyData:i,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||i.extractable,usages:e.usages,type:i.d?"private":"public"}}}},ae.exportKey=function(e){if("raw"===e.format&&"public"===e.keyHandle.type)return{type:"keyExport",keyHandle:[4].concat(e.keyData.x,e.keyData.y)};if("jwk"===e.format)return{type:"keyExport",keyHandle:g.keyToJwk(e.keyHandle,e.keyData)};throw new Error("unsupported export format.")},t.register("sign","ECDSA",ae.sign),t.register("verify","ECDSA",ae.verify),t.register("generateKey","ECDSA",ae.generateKey),t.register("importKey","ECDSA",ae.importKey),t.register("exportKey","ECDSA",ae.exportKey));var ie=d;oe=function(){function e(){var e;return{postMessage:function(t){try{t.workerid=this.id,e=p.jsCryptoRunner({data:t})}catch(e){return void this.onerror({data:e,type:"error"})}this.onmessage({data:e})},onmessage:null,onerror:null,terminate:function(){}}}function o(e){var t,r,n;return{dispatchEvent:function(o){"error"!==o.type?"process"!==o.data.type&&"finish"!==o.data.type?(this.result=e(o.data),r.apply(t,[this.result])):e(o.data.result,!0):n&&n.apply(t,[o])},promise:t=new Promise((function(e,t){r=e,n=t})),result:null}}function a(e){var t=[],r=o((function(e,r){var n;if(e=e&&(n=e,s&&n.pop?new Uint8Array(n).buffer:n),!r)return e;t.resolve(e)}));return r.stream=e.algorithm.stream,t.add=function(e){var r,n,o=new Promise((function(e,t){r=e,n=t}));return o.label=e,t.push({resolve:r,reject:n,promise:o}),o},t.resolve=function(e){var r=t.shift();r.resolve.apply(r.promise,[e])},r.process=function(r){return e.operationSubType="process",e.buffer=ie.toArray(r),c.continueJob(this,ie.clone(e)),t.add("process")},r.finish=function(){return e.operationSubType="finish",e.buffer=[],c.continueJob(this,ie.clone(e)),t.add("finish")},r.abort=function(){c.abortJob(this)},r.algorithm=e.algorithm||null,r.key=e.keyHandle||null,r}var i=[];i.add=function(e,t){i.push({keyHandle:e,keyData:t})},i.remove=function(e){for(var t=0;t<i.length;t+=1)if(i[t].keyHandle===e)return void(i=i.splice(t,1))},i.lookup=function(e){for(var t=0;t<i.length;t+=1)if(i[t].keyHandle===e)return i[t].keyData;return null};var c=function(){var t=[],o=[],a=0,i=0,s=[],c="undefined"==typeof setImmediate?setTimeout:setImmediate;function u(){s.shift()()}var f=n?"available":"unavailable";function d(){!function(e){for(var r=t.length-1;r>=0;r-=1)t[r].isWebWorker===e&&(t[r].terminate(),t.splice(r,1))}(!l);for(var e=0;e<t.length;e++)if(!t[e].busy)return t[e];return null}function h(e){for(var r=0;r<t.length;r++)if(t[r]===e)return e.terminate(),void t.splice(r,1)}function p(e){for(var r=0;r<t.length;r++)if(t[r].operation===e)return t[r];return null}function g(e,t){o.push({operation:e,data:t,id:a++})}function m(e){if(e.busy=!1,l)if(o.length>0){var r,n=o.shift();if(w(n.operation,n.data),"process"===n.data.operationSubType){for(r=0;r<o.length;r++)n.operation===o[r].operation&&w(o[r].operation,o[r].data);for(r=o.length-1;r>=0;r--)n.operation===o[r].operation&&o.splice(r,1)}}else(function(){for(var e=0,r=0;r<t.length;r++)t[r].busy||(e+=1);return e})()>2&&h(e)}function y(n){var a;if("pending"===f)throw new Error("Creating new worker while workerstatus=pending");if("ready"===f)try{(a=new Worker(r)).postMessage({prngSeed:Y.getBytes(48)}),a.isWebWorker=!0}catch(t){l=!1,f="failed",a.terminate(),(a=e()).isWebWorker=!1}else(a=e()).isWebWorker=!1;return a.operation=n,a.id=i++,a.busy=!1,a.onmessage=function(e){if(!0!==e.data.initialized){var t=a.operation;e.target||(e.target={data:a.data});for(var r=0;r<o.length;r++)if(o[r].operation===a.operation){var n=o[r];return o.splice(r,1),void k(a,n.data)}e.data.hasOwnProperty("type")&&"process"===e.data.type||m(a),t.dispatchEvent(e)}},a.onerror=function(e){var t=a.operation;m(a),t.dispatchEvent(e)},function(e){t.push(e)}(a),a}function v(e,r){var n=null;if("pending"!==f)if(n=d(),l&&null===n&&t.length>=12)g(e,r);else{if(null===n&&(n=y(e)),null===n)throw g(e,r),new Error("could not create new worker");n.operation=e,n.busy=!0,r.workerid=n.id,k(n,r)}else g(e,r)}function w(e,t){var r=p(e);r?k(r,t):v(e,t)}function k(e,t){if(t.workerid=e.id,l)e.postMessage(t);else{var r=(o=t,function(){return e.postMessage(o)});n=r,s.push(n),c(u,0)}var n,o}return{runJob:v,continueJob:w,abortJob:function(e){var t=p(e);t&&h(t)},useWebWorkers:function(e){if("unavailable"!==f){if(!(!0===e&&"ready"===f||!1===e&&"available"===f)){if(!1===e&&"ready"===f)return l=!1,f="available",void ie.consoleLog("web workers disabled.");if("pending"!==f){f="pending";var t=new Worker(r);t.addEventListener("message",n,!1),t.addEventListener("error",n,!1),t.postMessage({prngSeed:Y.getBytes(48)})}}}else ie.consoleLog("web workers not available in this browser.");function n(e){var r=!(!e.data||!0!==e.data.initialized);if(t.removeEventListener("message",n,!1),t.removeEventListener("error",n,!1),t.terminate(),f=r?"ready":"failed",l=r,ie.consoleLog("web worker initialization "+(r?"succeeded. Now using web workers.":"failed. running synchronously."+(e.message||""))),o.length>0){var a=o.shift();v(a.operation,a.data)}}}}}(),u=[{name:"algorithm",type:"Object",required:!0},{name:"keyHandle",type:"Object",required:!0},{name:"buffer",type:"Array",required:!1},{name:"signature",type:"Array",required:!0},{name:"format",type:"String",required:!0},{name:"keyData",type:"Object",required:!0},{name:"extractable",type:"Boolean",required:!1},{name:"usages",type:"Array",required:!1},{name:"derivedKeyType",type:"Object",required:!0},{name:"length",type:"Number",required:!1},{name:"extractable",type:"Boolean",required:!0},{name:"usages",type:"Array",required:!0},{name:"keyData",type:"Array",required:!0}],f={encrypt:[0,1,2],decrypt:[0,1,2],sign:[0,1,2],verify:[0,1,3,2],digest:[0,2],generateKey:[0,6,7],importKeyRaw:[4,12,0,10,11],importKeyJwk:[4,5,0,10,11],exportKey:[0,4,1,6,7],deriveKey:[0,1,8,6,7],deriveBits:[0,1,9],wrapKey:[1,1,0],unwrapKey:[2,0,1,6,7]};function h(e){var t=i.lookup(e);if(!t)throw new Error("key not found");return t}function g(e,r,n){var s=function(e,t){var r,n,o,a,i={operationType:e};for("importKey"!==e||"raw"!==t[0]&&"spki"!==t[0]||(e="importKeyRaw"),"importKey"===e&&"jwk"===t[0]&&(e="importKeyJwk"),r=f[e],a=0;a<r.length;a+=1)if(n=u[r[a]],null!=(o=t[a])){if(o.subarray&&(o=ie.toArray(o)),"ArrayBuffer"===ie.getObjectType(o)&&(o=ie.toArray(o)),d.getObjectType(o)!==n.type)throw new Error(n.name);"algorithm"===n.name&&(o.name=o.name.toUpperCase(),o.iv&&(o.iv=ie.toArray(o.iv)),o.publicExponent&&(o.publicExponent=ie.toArray(o.publicExponent)),o.salt&&(o.salt=ie.toArray(o.salt)),o.additionalData&&(o.additionalData=ie.toArray(o.additionalData)),o.hash&&!o.hash.name&&"String"===ie.getObjectType(o.hash)&&(o.hash={name:o.hash})),i.hasOwnProperty(n.name)?i[n.name+"1"]=o:i[n.name]=o}else if(n.required)throw new Error(n.name);return i}(e,r);!function(e,r){if(!t.exists(e,r))throw new Error("unsupported algorithm")}(e,s.algorithm.name),s.keyHandle&&(s.keyData=h(s.keyHandle)),s.keyHandle1&&(s.keyData1=h(s.keyHandle1)),s.algorithm&&s.algorithm.public&&(s.additionalKeyData=h(s.algorithm.public));var l=n?o((function(e){var t,r;switch(e.type){case"keyGeneration":case"keyImport":case"keyDerive":return e.keyPair?(i.add(e.keyPair.publicKey.keyHandle,e.keyPair.publicKey.keyData),i.add(e.keyPair.privateKey.keyHandle,e.keyPair.privateKey.keyData),{publicKey:e.keyPair.publicKey.keyHandle,privateKey:e.keyPair.privateKey.keyHandle}):(i.add(e.keyHandle,e.keyData),e.keyHandle);case"keyExport":return e.keyHandle;case"keyPairGeneration":return r=e.keyPair.privateKey,t=e.keyPair.publicKey,i.add(t.keyHandle,t.keyData),i.add(r.keyHandle,r.keyData),{publicKey:t.keyHandle,privateKey:r.keyHandle};default:throw new Error("Unknown key operation")}})):a(s);return(n||s.buffer||"deriveBits"===e||"wrapKey"===e)&&c.runJob(l,s),l.stream?Promise.resolve(function(e){return{process:function(t){return e.process(t)},finish:function(){return e.finish()},abort:function(){return e.abort()}}}(l)):l.promise}var m={encrypt:function(e,t,r){return g("encrypt",arguments,0)},decrypt:function(e,t,r){return g("decrypt",arguments,0)},sign:function(e,t,r){return g("sign",arguments,0)},verify:function(e,t,r,n){return g("verify",arguments,0)},digest:function(e,t){return g("digest",arguments,0)},generateKey:function(e,t,r){return g("generateKey",arguments,1)},deriveKey:function(e,t,r,n,o){var a=this.deriveBits,i=this.importKey;return new Promise((function(s,c){var l;switch(r.name.toUpperCase()){case"AES-CBC":case"AES-GCM":l=r.length;break;case"HMAC":l=r.length||{"SHA-1":512,"SHA-224":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[r.hash.name.toUpperCase()];break;default:return void c(new Error("No Supported"))}a(e,t,l).then((function(e){return i("raw",e,r,n,o)})).then((function(e){s(e)})).catch((function(e){c(e)}))}))},deriveBits:function(e,t,r){return g("deriveBits",arguments,0)},importKey:function(e,t,r,n,o){return g("importKey",arguments,1)},exportKey:function(e,t){return g("exportKey",[t.algorithm,e,t],1)},wrapKey:function(e,t,r,n){var o=this.encrypt,a=this.exportKey;return new Promise((function(i,s){!1===t.extractable||t.usages.indexOf("wrapKey")<0||r.algorithm.name.toUpperCase()!==n.name?s(new Error("InvalidAccessError")):a(e,t).then((function(t){return o(n,r,"jwk"===e?ie.stringToBytes(JSON.stringify(t,null,0)):t)})).then((function(e){i(e)})).catch((function(e){s(e)}))}))},unwrapKey:function(e,t,r,n,o,a,i){var s=this.decrypt,c=this.importKey;return new Promise((function(l,u){r.usages.indexOf("unwrapKey")<0||r.algorithm.name.toUpperCase()!==n.name?u(new Error("InvalidAccessError")):s(n,r,t).then((function(t){return c(e,"jwk"===e?JSON.parse(ie.bytesToString(t)):t,o,a,i)})).then((function(e){l(e)})).catch((function(e){u(e)}))}))}};return{publicMethods:m,internalMethods:{useWebWorkers:c.useWebWorkers}}}();var se,ce=(se=d,{wrapKey:function(e){var t=Q(e.keyData1,e.keyHandle1.algorithm.name,f["SHA-1"])(),r=g.keyToJwkOld(e.keyHandle,e.keyData),n={alg:e.keyHandle1.algorithm.name.toUpperCase(),enc:"A128GCM"},o=se.toBase64(JSON.stringify(n),!0),a=Y.getBytes(32),i=t.encrypt(a),s=se.toBase64(i,!0),c=Y.getBytes(12),l=se.toBase64(c,!0),u=o.concat(".",s,".",l),d=W(K.aes(a));d.init(c,se.stringToBytes(u),128);var h=d.encrypt(r),p=h.slice(-16),m={recipients:[{header:o,encrypted_key:s,integrity_value:se.toBase64(p,!0)}],initialization_vector:l,ciphertext:se.toBase64(h.slice(0,h.length-p.length),!0)};return se.stringToBytes(JSON.stringify(m))},unwrapKey:function(e){var t=se.fromBase64,r=JSON.parse(String.fromCharCode.apply(null,e.buffer)),n=(se.fromBase64(r.recipients[0].header),t(r.recipients[0].encrypted_key)),o=t(r.recipients[0].integrity_value),a=t(r.initialization_vector),i=t(r.ciphertext),s=f["SHA-1"](),c=Q(e.keyData,e.keyHandle.algorithm.name,s).decrypt(n),l=r.recipients[0].header.concat(".",r.recipients[0].encrypted_key,".",r.initialization_vector),u=W(K.aes(c));u.init(a,se.stringToBytes(l),128);var d=u.decrypt(i,o),h=g.jwkToKey(d,e.algorithm,["k"]);return{type:"keyImport",keyData:h.k,keyHandle:{algorithm:{name:e.algorithm.name},extractable:e.extractable||h.extractable,usages:e.usages,type:"secret"}}}});void 0!==t&&(t.register("wrapKey","AES-GCM",ce.wrapKey),t.register("unwrapKey","AES-CBC",ce.unwrapKey));var le,ue={subtle:oe?oe.publicMethods:null,getRandomValues:function(e){var t,r=Y.getBytes(e.length);for(t=0;t<e.length;t+=1)e[t]=r[t];return e},initPrng:function(e){var t=Object.prototype.toString.call(e);if("[object Array]"!==t&&"[object Uint8Array]"!==t)throw new Error("entropyData must be a Array or Uint8Array");le&&le.reseed(e),Y.reseed(le.read(48))},toBase64:function(e,t){return d.toBase64(e,t)},fromBase64:function(e){return d.fromBase64(e)},textToBytes:function(e){return d.stringToBytes(e)},bytesToText:function(e){return d.bytesToString(e)},asn1:h,url:r,version:"1.6.4",useWebWorkers:function(e){return oe?oe.internalMethods.useWebWorkers(e):null}};(le=le||new function(e){var t=[],r=new V,n=!1,o=!1,a=e;function i(){var i,s=["Cookie","RedirectUri","ETag","x-ms-client-antiforgery-id","x-ms-client-request-id","x-ms-client-session-id","SubscriptionPool"],u=[];for(i=0;i<48;i+=1)u[i]=Math.floor(256*Math.random());var f=a.crypto||a.msCrypto;if(f&&"function"==typeof f.getRandomValues&&e.Uint8Array){var h=new e.Uint8Array(48);f.getRandomValues(h),u=u.concat(Array.apply(null,h)),o=!0}if("undefined"!=typeof XMLHttpRequest){var p=new XMLHttpRequest;for(i=0;i<s.length;i+=1)try{var g=p.getResponseHeader(s[i]);if(g){var m=d.stringToBytes(g);u=u.concat(m)}}catch(e){}}!o&&c&&(u=u.concat(t.splice(0,t.length)),l.startCollectors()),n?r.reseed(u):r.init(u),n=!0}function s(e){for(var r=0;r<e.length;++r)t.push(e[r]);t.length>=128&&l.stopCollectors()}var c=e&&e.addEventListener||"undefined"!=typeof document&&document.attachEvent,l={startCollectors:function(){if(!this.collectorsRegistered){if(e.addEventListener)e.addEventListener("mousemove",this.MouseEventCallBack,!0),e.addEventListener("load",this.LoadTimeCallBack,!0);else{if(!document.attachEvent)throw new Error("Can't attach events for entropy collection");document.attachEvent("onmousemove",this.MouseEventCallBack),document.attachEvent("onload",this.LoadTimeCallBack)}this.collectorsRegistered=1}},stopCollectors:function(){this.collectorsRegistered&&(e.removeEventListener?(e.removeEventListener("mousemove",this.MouseEventCallBack,1),e.removeEventListener("load",this.LoadTimeCallBack,1)):e.detachEvent&&(e.detachEvent("onmousemove",this.MouseEventCallBack),e.detachEvent("onload",this.LoadTimeCallBack)),this.collectorsRegistered=0)},MouseEventCallBack:function(e){var t=(new Date).valueOf(),r=e.x||e.clientX||e.offsetX||0,n=e.y||e.clientY||e.offsetY||0;s([255&t,t>>8&255,t>>16&255,t>>24&255,255&r,r>>8&255,255&n,n>>8&255])},LoadTimeCallBack:function(){var e=(new Date).valueOf();s([255&e,e>>8&255,e>>16&255,e>>24&255])}};return{init:function(){if(i(),!o&&c)try{l.startCollectors()}catch(e){}},reseed:function(e){r.reseed(e)},read:function(e){if(!n)throw new Error("Entropy pool is not initialized.");var t=r.getBytes(e);return i(),t}}}(e)).init();var fe=le.read(48);return Y.init(fe),ue}()},"function"==typeof define&&define.amd?define([],(function(){return Oa.msrCrypto=Ma(Oa)})):"object"==typeof La?La=Ma(Oa):Oa.msrCrypto=Ma(Oa),"undefined"==typeof Promise&&(La.Promise=function(){var e=function(t,r){if(!(this instanceof e))throw new Error("use 'new' keyword with Promise constructor");var n=null,o=null,a=[],i=[],s=[],c=[];function l(e){var t,r;for(r=0;r<a.length;r+=1)(t=a[r](e))&&t.then?(t.then(c[r]),s[r]&&t.catch(s[r])):c[r]&&c[r](t);n={result:e}}function u(e){var t,r;for(r=0;r<i.length;r+=1)(t=i[r](e))&&t.then?t.then(c[r],s[r]):c[r]&&c[r](t);o={result:e}}this.then=function(t,r){var l;return n?(l=t(n.result))&&l.then?l:e.resolve(l):o?(l=r?r(o.result):o.result)&&l.then?l:e.resolve(l):(a.push(t),r&&i.push(r),new e((function(e,t){c.push(e),s.push(t)})))},this.catch=function(t){var r;return o?(r=t(o.result))&&r.then?r:e.resolve(r):(i.push(t),new e((function(e,t){c.push(e),s.push(t)})))},t(l,u)};return e.all=function(t){var r=[],n=0;function o(e,o){return function(a){r[e]=a,(n+=1)===t.length&&o(r)}}return new e((function(r,n){var a;function i(e){n(e)}for(a=0;a<t.length;a+=1)t[a].then?(t[a].then(o(a,r)),t[a].catch(i)):e.resolve(t[a]).then(o(a,r))}))},e.race=function(t){var r=!1;function n(e){return function(t){r||(r=!0,e(t))}}return new e((function(e,r){for(var o=0;o<t.length;o+=1)t[o].then(n(e),n(r))}))},e.reject=function(t){return new e((function(e,r){r(t)}))},e.resolve=function(t){return new e((function(e,r){e(t)}))},e}());const Ua=function(){const e=void 0;let r;try{r=e("crypto")}catch{}const n="undefined"==typeof crypto?void 0:crypto;let o;o=r?.webcrypto?r.webcrypto.subtle:r?e("./crypto.node.js"):n?.subtle?n.subtle:t(La).subtle;return o}();const Ha="EC",Ka="sig",za="ES256",Fa="P-256";async function ja(e,t=!1,r){const{log:n}=r,o=r.errors?.length??0;if(!Pa.is.object(e))return n.fatal("key param is not an object",an.PARAMETER_INVALID),!1;if("kty"in e&&"string"==typeof e.kty&&e.kty===Ha||n.error(`key.kty is not equal to '${Ha}'`,an.JWK_INVALID_PROPERTY),"kid"in e&&Pa.is.base64url(e.kid)||n.error("key.kid is not base64url string",an.JWK_INVALID_PROPERTY),"use"in e&&"string"==typeof e.use&&e.use===Ka||n.error(`key.use is not equal to '${Ka}'`,an.JWK_INVALID_PROPERTY),"alg"in e&&"string"==typeof e.alg&&e.alg===za||n.error(`key.alg is not equal to '${za}'`,an.JWK_INVALID_PROPERTY),"crv"in e&&"string"==typeof e.crv&&e.crv===Fa||n.error(`key.crv is not equal to '${Fa}'`,an.JWK_INVALID_PROPERTY),"x"in e&&Pa.is.base64url(e.x)||n.error("key.x is not base64url string",an.JWK_INVALID_PROPERTY),"y"in e&&Pa.is.base64url(e.y)||n.error("key.y is not base64url string",an.JWK_INVALID_PROPERTY),t&&("d"in e&&Pa.is.base64url(e.y)||n.error("key.d is not base64url string",an.JWK_INVALID_PROPERTY)),!t&&"d"in e&&n.error("key.d should not be in public key",an.JWK_INVALID_PROPERTY),"crlVersion"in e&&"number"!=typeof e.crlVersion&&n.error("optional key.crlVersion is not a number",an.JWK_INVALID_PROPERTY),"x5c"in e&&!Pa.is.stringArray(e.x5c)&&n.warn("optional key.x5c is not a string[]",an.JWK_INVALID_PROPERTY),o===(r.errors?.length??0)){const t=await Wa(e);t!==e.kid&&n.error(`key.kid has incorrect value ${e.kid}. Expected: ${t}`,an.JWK_INCORRECT_KID)}const a=`kty kid use alg crv x y ${t?"d ":""}crlVersion x5c`.split(" ");return Object.keys(e).filter((e=>!a.includes(e))).forEach((e=>n.warn(`Unexpected property '${e}' in JWK key.`,an.JWK_UNEXPECTED_PROPERTY))),o===(r.errors?.length??0)}async function Wa(e){const t={crv:"P-256",kty:"EC",x:e.x,y:e.y},r=Na.textToBytes(JSON.stringify(t));return await function(e){if(!Ua)throw new Error("Could not find crypto object");return Ua.digest({name:"SHA-256"},e).then((e=>{const t=new Uint8Array(e);return Na.bytesToBase64(t,!0)})).catch((e=>{throw e}))}(r).catch((e=>{throw e}))}var Ja={validate:{key:ja,keys:async function(e,t){const{log:r}=t,n=t.log.entries().length;if(!(e instanceof Array))return r.fatal("keys param is not an Array"),Promise.resolve(!1);for(const r of e)await ja(r,!1,t);return n===t.log.entries().length}},computeKid:Wa};const Va="DEF",Za="ES256";function Ya(e){const{log:t}=e;t.label="JWS.header";const r=e.jws.header;if(!Pa.is.object(r))return t.fatal("JWS header is not an Object.",an.JWS_HEADER_ERROR);"alg"in r?r.alg!==Za&&t.error(`Wrong value for JWS header property 'alg'; expected: 'ES256', actual: '${r.alg}'.`,an.JWS_HEADER_ERROR):t.error("JWS header missing 'alg' property.",an.JWS_HEADER_ERROR),"zip"in r?r.zip!==Va&&t.error(`Wrong value for JWS header property 'zip'; expected: 'DEF', actual: '${r.zip}'.`,an.JWS_HEADER_ERROR):t.error("JWS header missing 'zip' property.",an.JWS_HEADER_ERROR),"kid"in r?Pa.is.base64url(r.kid)||t.error("JWS header 'kid' property not encoded as base64url.",an.JWS_HEADER_ERROR):t.error("JWS header missing 'kid' property.",an.JWS_HEADER_ERROR);const n=["alg","zip","kid"];return Object.keys(r).filter((e=>!n.includes(e))).forEach((e=>t.warn(`Unexpected property '${e}' in JWS header.`))),e}var qa={encode:function(e){return e.log.label="JWS.header",Ya(e).log.isFatal||(e.flat.header=Na.textToBase64(JSON.stringify(e.jws.header),!0)),e},decode:function(e){const{log:t}=e;t.label="JWS.header";const r=e.flat.header;if(!Pa.is.base64url(r))return t.fatal("header parameter is not base64url",an.PARAMETER_INVALID),e;const n=Na.base64ToText(r);t.debug(`header json:\n ${n}`);try{e.jws.header=JSON.parse(n)}catch{t.fatal("header cannot be parsed as JSON",an.JWS_HEADER_DECODE_FAIL),e.jws.header=void 0}return e},validate:Ya,generate:async function(e){const{log:t}=e;t.label="JWS.Header";const{privateKey:r}=e.options;return r&&Ja.validate.key(r,!0,e)?(e.jws.header||(e.jws.header={zip:Va,alg:Za,kid:await Ja.computeKid(r)},e.flat.header=e.compact=e.qr=void 0),e):t.fatal("options.privateKey is required for header.kid generation and must be a JWK private key",an.JWS_HEADER_GENERATE_FAIL)}},Ga={},$a=Uint8Array,Qa=Uint16Array,Xa=Uint32Array,ei=new $a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ti=new $a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ri=new $a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ni=function(e,t){for(var r=new Qa(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var o=new Xa(r[30]);for(n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)o[a]=a-r[n]<<5|n;return[r,o]},oi=ni(ei,2),ai=oi[0],ii=oi[1];ai[28]=258,ii[258]=28;for(var si=ni(ti,0),ci=si[0],li=si[1],ui=new Qa(32768),fi=0;fi<32768;++fi){var di=(43690&fi)>>>1|(21845&fi)<<1;di=(61680&(di=(52428&di)>>>2|(13107&di)<<2))>>>4|(3855&di)<<4,ui[fi]=((65280&di)>>>8|(255&di)<<8)>>>1}var hi=function(e,t,r){for(var n=e.length,o=0,a=new Qa(t);o<n;++o)e[o]&&++a[e[o]-1];var i,s=new Qa(t);for(o=0;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(r){i=new Qa(1<<t);var c=15-t;for(o=0;o<n;++o)if(e[o])for(var l=o<<4|e[o],u=t-e[o],f=s[e[o]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)i[ui[f]>>>c]=l}else for(i=new Qa(n),o=0;o<n;++o)e[o]&&(i[o]=ui[s[e[o]-1]++]>>>15-e[o]);return i},pi=new $a(288);for(fi=0;fi<144;++fi)pi[fi]=8;for(fi=144;fi<256;++fi)pi[fi]=9;for(fi=256;fi<280;++fi)pi[fi]=7;for(fi=280;fi<288;++fi)pi[fi]=8;var gi=new $a(32);for(fi=0;fi<32;++fi)gi[fi]=5;var mi=hi(pi,9,0),yi=hi(pi,9,1),vi=hi(gi,5,0),wi=hi(gi,5,1),ki=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},bi=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},Bi=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},_i=function(e){return(e+7)/8|0},Ei=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var n=new(2==e.BYTES_PER_ELEMENT?Qa:4==e.BYTES_PER_ELEMENT?Xa:$a)(r-t);return n.set(e.subarray(t,r)),n},Ci=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ai=function(e,t,r){var n=new Error(t||Ci[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Ai),!r)throw n;return n},Si=function(e,t,r){var n=e.length;if(!n||r&&r.f&&!r.l)return t||new $a(0);var o=!t||r,a=!r||r.i;r||(r={}),t||(t=new $a(3*n));var i=function(e){var r=t.length;if(e>r){var n=new $a(Math.max(2*r,e));n.set(t),t=n}},s=r.f||0,c=r.p||0,l=r.b||0,u=r.l,f=r.d,d=r.m,h=r.n,p=8*n;do{if(!u){s=bi(e,c,1);var g=bi(e,c+1,3);if(c+=3,!g){var m=e[(S=_i(c)+4)-4]|e[S-3]<<8,y=S+m;if(y>n){a&&Ai(0);break}o&&i(l+m),t.set(e.subarray(S,y),l),r.b=l+=m,r.p=c=8*y,r.f=s;continue}if(1==g)u=yi,f=wi,d=9,h=5;else if(2==g){var v=bi(e,c,31)+257,w=bi(e,c+10,15)+4,k=v+bi(e,c+5,31)+1;c+=14;for(var b=new $a(k),B=new $a(19),_=0;_<w;++_)B[ri[_]]=bi(e,c+3*_,7);c+=3*w;var E=ki(B),C=(1<<E)-1,A=hi(B,E,1);for(_=0;_<k;){var S,P=A[bi(e,c,C)];if(c+=15&P,(S=P>>>4)<16)b[_++]=S;else{var R=0,x=0;for(16==S?(x=3+bi(e,c,3),c+=2,R=b[_-1]):17==S?(x=3+bi(e,c,7),c+=3):18==S&&(x=11+bi(e,c,127),c+=7);x--;)b[_++]=R}}var I=b.subarray(0,v),T=b.subarray(v);d=ki(I),h=ki(T),u=hi(I,d,1),f=hi(T,h,1)}else Ai(1);if(c>p){a&&Ai(0);break}}o&&i(l+131072);for(var D=(1<<d)-1,O=(1<<h)-1,M=c;;M=c){var N=(R=u[Bi(e,c)&D])>>>4;if((c+=15&R)>p){a&&Ai(0);break}if(R||Ai(2),N<256)t[l++]=N;else{if(256==N){M=c,u=null;break}var L=N-254;if(N>264){var U=ei[_=N-257];L=bi(e,c,(1<<U)-1)+ai[_],c+=U}var H=f[Bi(e,c)&O],K=H>>>4;H||Ai(3),c+=15&H;T=ci[K];if(K>3){U=ti[K];T+=Bi(e,c)&(1<<U)-1,c+=U}if(c>p){a&&Ai(0);break}o&&i(l+131072);for(var z=l+L;l<z;l+=4)t[l]=t[l-T],t[l+1]=t[l+1-T],t[l+2]=t[l+2-T],t[l+3]=t[l+3-T];l=z}}r.l=u,r.p=M,r.b=l,r.f=s,u&&(s=1,r.m=d,r.d=f,r.n=h)}while(!s);return l==t.length?t:Ei(t,0,l)},Pi=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},Ri=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},xi=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var o=r.length,a=r.slice();if(!o)return[Li,0];if(1==o){var i=new $a(r[0].s+1);return i[r[0].s]=1,[i,1]}r.sort((function(e,t){return e.f-t.f})),r.push({s:-1,f:25001});var s=r[0],c=r[1],l=0,u=1,f=2;for(r[0]={s:-1,f:s.f+c.f,l:s,r:c};u!=o-1;)s=r[r[l].f<r[f].f?l++:f++],c=r[l!=u&&r[l].f<r[f].f?l++:f++],r[u++]={s:-1,f:s.f+c.f,l:s,r:c};var d=a[0].s;for(n=1;n<o;++n)a[n].s>d&&(d=a[n].s);var h=new Qa(d+1),p=Ii(r[u-1],h,0);if(p>t){n=0;var g=0,m=p-t,y=1<<m;for(a.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));n<o;++n){var v=a[n].s;if(!(h[v]>t))break;g+=y-(1<<p-h[v]),h[v]=t}for(g>>>=m;g>0;){var w=a[n].s;h[w]<t?g-=1<<t-h[w]++-1:++n}for(;n>=0&&g;--n){var k=a[n].s;h[k]==t&&(--h[k],++g)}p=t}return[new $a(h),p]},Ii=function(e,t,r){return-1==e.s?Math.max(Ii(e.l,t,r+1),Ii(e.r,t,r+1)):t[e.s]=r},Ti=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Qa(++t),n=0,o=e[0],a=1,i=function(e){r[n++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(o),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(o);a=1,o=e[s]}return[r.subarray(0,n),t]},Di=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Oi=function(e,t,r){var n=r.length,o=_i(t+2);e[o]=255&n,e[o+1]=n>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var a=0;a<n;++a)e[o+a+4]=r[a];return 8*(o+4+n)},Mi=function(e,t,r,n,o,a,i,s,c,l,u){Pi(t,u++,r),++o[256];for(var f=xi(o,15),d=f[0],h=f[1],p=xi(a,15),g=p[0],m=p[1],y=Ti(d),v=y[0],w=y[1],k=Ti(g),b=k[0],B=k[1],_=new Qa(19),E=0;E<v.length;++E)_[31&v[E]]++;for(E=0;E<b.length;++E)_[31&b[E]]++;for(var C=xi(_,7),A=C[0],S=C[1],P=19;P>4&&!A[ri[P-1]];--P);var R,x,I,T,D=l+5<<3,O=Di(o,pi)+Di(a,gi)+i,M=Di(o,d)+Di(a,g)+i+14+3*P+Di(_,A)+(2*_[16]+3*_[17]+7*_[18]);if(D<=O&&D<=M)return Oi(t,u,e.subarray(c,c+l));if(Pi(t,u,1+(M<O)),u+=2,M<O){R=hi(d,h,0),x=d,I=hi(g,m,0),T=g;var N=hi(A,S,0);Pi(t,u,w-257),Pi(t,u+5,B-1),Pi(t,u+10,P-4),u+=14;for(E=0;E<P;++E)Pi(t,u+3*E,A[ri[E]]);u+=3*P;for(var L=[v,b],U=0;U<2;++U){var H=L[U];for(E=0;E<H.length;++E){var K=31&H[E];Pi(t,u,N[K]),u+=A[K],K>15&&(Pi(t,u,H[E]>>>5&127),u+=H[E]>>>12)}}}else R=mi,x=pi,I=vi,T=gi;for(E=0;E<s;++E)if(n[E]>255){K=n[E]>>>18&31;Ri(t,u,R[K+257]),u+=x[K+257],K>7&&(Pi(t,u,n[E]>>>23&31),u+=ei[K]);var z=31&n[E];Ri(t,u,I[z]),u+=T[z],z>3&&(Ri(t,u,n[E]>>>5&8191),u+=ti[z])}else Ri(t,u,R[n[E]]),u+=x[n[E]];return Ri(t,u,R[256]),u+x[256]},Ni=new Xa([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Li=new $a(0),Ui=function(e,t,r,n,o,a){var i=e.length,s=new $a(n+i+5*(1+Math.ceil(i/7e3))+o),c=s.subarray(n,s.length-o),l=0;if(!t||i<8)for(var u=0;u<=i;u+=65535){var f=u+65535;f>=i&&(c[l>>3]=a),l=Oi(c,l+1,e.subarray(u,f))}else{for(var d=Ni[t-1],h=d>>>13,p=8191&d,g=(1<<r)-1,m=new Qa(32768),y=new Qa(g+1),v=Math.ceil(r/3),w=2*v,k=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<w)&g},b=new Xa(25e3),B=new Qa(288),_=new Qa(32),E=0,C=0,A=(u=0,0),S=0,P=0;u<i;++u){var R=k(u),x=32767&u,I=y[R];if(m[x]=I,y[R]=x,S<=u){var T=i-u;if((E>7e3||A>24576)&&T>423){l=Mi(e,c,0,b,B,_,C,A,P,u-P,l),A=E=C=0,P=u;for(var D=0;D<286;++D)B[D]=0;for(D=0;D<30;++D)_[D]=0}var O=2,M=0,N=p,L=x-I&32767;if(T>2&&R==k(u-L))for(var U=Math.min(h,T)-1,H=Math.min(32767,u),K=Math.min(258,T);L<=H&&--N&&x!=I;){if(e[u+O]==e[u+O-L]){for(var z=0;z<K&&e[u+z]==e[u+z-L];++z);if(z>O){if(O=z,M=L,z>U)break;var F=Math.min(L,z-2),j=0;for(D=0;D<F;++D){var W=u-L+D+32768&32767,J=W-m[W]+32768&32767;J>j&&(j=J,I=W)}}}L+=(x=I)-(I=m[x])+32768&32767}if(M){b[A++]=268435456|ii[O]<<18|li[M];var V=31&ii[O],Z=31&li[M];C+=ei[V]+ti[Z],++B[257+V],++_[Z],S=u+O,++E}else b[A++]=e[u],++B[e[u]]}}l=Mi(e,c,a,b,B,_,C,A,P,u-P,l),!a&&7&l&&(l=Oi(c,l+1,Li))}return Ei(s,0,n+_i(l)+o)},Hi=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),Ki=function(){var e=-1;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=Hi[255&r^t[n]]^r>>>8;e=r},d:function(){return~e}}},zi=function(){var e=1,t=0;return{p:function(r){for(var n=e,o=t,a=0|r.length,i=0;i!=a;){for(var s=Math.min(i+2655,a);i<s;++i)o+=n+=r[i];n=(65535&n)+15*(n>>16),o=(65535&o)+15*(o>>16)}e=n,t=o},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},Fi=function(e,t,r,n,o){return Ui(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,n,!o)},ji=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},Wi=function(e,t,r){for(var n=e(),o=e.toString(),a=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/\s+/g,"").split(","),i=0;i<n.length;++i){var s=n[i],c=a[i];if("function"==typeof s){t+=";"+c+"=";var l=s.toString();if(s.prototype)if(-1!=l.indexOf("[native code]")){var u=l.indexOf(" ",8)+1;t+=l.slice(u,l.indexOf("(",u))}else for(var f in t+=l,s.prototype)t+=";"+c+".prototype."+f+"="+s.prototype[f].toString();else t+=l}else r[c]=s}return[t,r]},Ji=[],Vi=function(e,t,r,n){var o;if(!Ji[r]){for(var a="",i={},s=e.length-1,c=0;c<s;++c)a=(o=Wi(e[c],a,i))[0],i=o[1];Ji[r]=Wi(e[s],a,i)}var l=ji({},Ji[r][1]);return function(e,t,r,n,o){var a=new Worker(Ga[t]||(Ga[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,r=t.$e$;if(r){var n=new Error(r[0]);n.code=r[1],n.stack=r[2],o(n,null)}else o(null,t)},a.postMessage(r,n),a}(Ji[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,l,function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t}(l),n)},Zi=function(){return[$a,Qa,Xa,ei,ti,ri,ai,ci,yi,wi,ui,Ci,hi,ki,bi,Bi,_i,Ei,Ai,Si,ys,$i,Qi]},Yi=function(){return[$a,Qa,Xa,ei,ti,ri,ii,li,mi,pi,vi,gi,ui,Ni,Li,hi,Pi,Ri,xi,Ii,Ti,Di,Oi,Mi,_i,Ei,Ui,Fi,ps,$i]},qi=function(){return[is,ss]},Gi=function(){return[us]},$i=function(e){return postMessage(e,[e.buffer])},Qi=function(e){return e&&e.size&&new $a(e.size)},Xi=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},es=function(e,t,r,n,o){var a,i=Vi(e,n,o,(function(e,r){e?(i.terminate(),t.ondata.call(t,e)):(r[1]&&i.terminate(),t.ondata.call(t,e,r[0],r[1]))}));i.postMessage(r),t.push=function(e,r){t.ondata||Ai(5),a&&t.ondata(Ai(4,0,1),null,!!r),i.postMessage([e,a=r],[e.buffer])},t.terminate=function(){i.terminate()}},ts=function(e,t){return e[t]|e[t+1]<<8},rs=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},ns=function(e,t){return rs(e,t)+4294967296*rs(e,t+4)},os=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},as=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&os(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}},is=function(e){31==e[0]&&139==e[1]&&8==e[2]||Ai(6,"invalid gzip data");var t=e[3],r=10;4&t&&(r+=e[10]|2+(e[11]<<8));for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!e[r++]);return r+(2&t)},ss=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},cs=function(e){return 10+(e.filename&&e.filename.length+1||0)},ls=function(e,t){var r=t.level,n=0==r?0:r<6?1:9==r?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)},us=function(e){(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&Ai(6,"invalid zlib data"),32&e[1]&&Ai(6,"invalid zlib data: preset dictionaries not supported")};function fs(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var ds=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(Fi(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){this.ondata||Ai(5),this.d&&Ai(4),this.d=t,this.p(e,t||!1)},e}(),hs=function(e,t){es([Yi,function(){return[Xi,ds]}],this,fs.call(this,e,t),(function(e){var t=new ds(e.data);onmessage=Xi(t)}),6)};function ps(e,t){return Fi(e,t||{},0,0)}var gs=function(){function e(e){this.s={},this.p=new $a(0),this.ondata=e}return e.prototype.e=function(e){this.ondata||Ai(5),this.d&&Ai(4);var t=this.p.length,r=new $a(t+e.length);r.set(this.p),r.set(e,t),this.p=r},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=Si(this.p,this.o,this.s);this.ondata(Ei(r,t,this.s.b),this.d),this.o=Ei(r,this.s.b-32768),this.s.b=this.o.length,this.p=Ei(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),ms=function(e){this.ondata=e,es([Zi,function(){return[Xi,gs]}],this,0,(function(){var e=new gs;onmessage=Xi(e)}),7)};function ys(e,t){return Si(e,t)}!function(){function e(e,t){this.c=Ki(),this.l=0,this.v=1,ds.call(this,e,t)}e.prototype.push=function(e,t){ds.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=Fi(e,this.o,this.v&&cs(this.o),t&&8,!t);this.v&&(as(r,this.o),this.v=0),t&&(os(r,r.length-8,this.c.d()),os(r,r.length-4,this.l)),this.ondata(r,t)}}();var vs=function(){function e(e){this.v=1,gs.call(this,e)}return e.prototype.push=function(e,t){if(gs.prototype.e.call(this,e),this.v){var r=this.p.length>3?is(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}t&&(this.p.length<8&&Ai(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),gs.prototype.c.call(this,t)},e}(),ws=function(e){this.ondata=e,es([Zi,qi,function(){return[Xi,gs,vs]}],this,0,(function(){var e=new vs;onmessage=Xi(e)}),9)};!function(){function e(e,t){this.c=zi(),this.v=1,ds.call(this,e,t)}e.prototype.push=function(e,t){ds.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var r=Fi(e,this.o,this.v&&2,t&&4,!t);this.v&&(ls(r,this.o),this.v=0),t&&os(r,r.length-4,this.c.d()),this.ondata(r,t)}}();var ks=function(){function e(e){this.v=1,gs.call(this,e)}return e.prototype.push=function(e,t){if(gs.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}t&&(this.p.length<4&&Ai(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),gs.prototype.c.call(this,t)},e}(),bs=function(e){this.ondata=e,es([Zi,Gi,function(){return[Xi,gs,ks]}],this,0,(function(){var e=new ks;onmessage=Xi(e)}),11)};var Bs=function(){function e(e){this.G=vs,this.I=gs,this.Z=ks,this.ondata=e}return e.prototype.push=function(e,t){if(this.ondata||Ai(5),this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new $a(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var n=this,o=function(){n.ondata.apply(n,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(o):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(o):new this.Z(o),this.s.push(this.p,t),this.p=null}}},e}();!function(){function e(e){this.G=ws,this.I=ms,this.Z=bs,this.ondata=e}e.prototype.push=function(e,t){Bs.prototype.push.call(this,e,t)}}();var _s="undefined"!=typeof TextEncoder&&new TextEncoder,Es="undefined"!=typeof TextDecoder&&new TextDecoder,Cs=0;try{Es.decode(Li,{stream:!0}),Cs=1}catch(e){}var As=function(e){for(var t="",r=0;;){var n=e[r++],o=(n>127)+(n>223)+(n>239);if(r+o>e.length)return[t,Ei(e,r-1)];o?3==o?(n=((15&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,t+=String.fromCharCode(55296|n>>10,56320|1023&n)):t+=1&o?String.fromCharCode((31&n)<<6|63&e[r++]):String.fromCharCode((15&n)<<12|(63&e[r++])<<6|63&e[r++]):t+=String.fromCharCode(n)}};(function(){function e(e){this.ondata=e,Cs?this.t=new TextDecoder:this.p=Li}e.prototype.push=function(e,t){if(this.ondata||Ai(5),t=!!t,this.t)return this.ondata(this.t.decode(e,{stream:!0}),t),void(t&&(this.t.decode().length&&Ai(8),this.t=null));this.p||Ai(4);var r=new $a(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var n=As(r),o=n[0],a=n[1];t?(a.length&&Ai(8),this.p=null):this.p=a,this.ondata(o,t)}})(),function(){function e(e){this.ondata=e}e.prototype.push=function(e,t){this.ondata||Ai(5),this.d&&Ai(4),this.ondata(Ss(e),this.d=t||!1)}}();function Ss(e,t){if(t){for(var r=new $a(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}if(_s)return _s.encode(e);var o=e.length,a=new $a(e.length+(e.length>>1)),i=0,s=function(e){a[i++]=e};for(n=0;n<o;++n){if(i+5>a.length){var c=new $a(i+8+(o-n<<1));c.set(a),a=c}var l=e.charCodeAt(n);l<128||t?s(l):l<2048?(s(192|l>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++n))>>18),s(128|l>>12&63),s(128|l>>6&63),s(128|63&l)):(s(224|l>>12),s(128|l>>6&63),s(128|63&l))}return Ei(a,0,i)}function Ps(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}if(Es)return Es.decode(e);var o=As(e),a=o[0];return o[1].length&&Ai(8),a}var Rs=function(e){return 1==e?3:e<6?2:9==e?1:0},xs=function(e,t){for(;1!=ts(e,t);t+=4+ts(e,t+2));return[ns(e,t+12),ns(e,t+4),ns(e,t+20)]},Is=function(e){var t=0;if(e)for(var r in e){var n=e[r].length;n>65535&&Ai(9),t+=n+4}return t},Ts=function(e,t,r,n,o,a,i,s){var c=n.length,l=r.extra,u=s&&s.length,f=Is(l);os(e,t,null!=i?33639248:67324752),t+=4,null!=i&&(e[t++]=20,e[t++]=r.os),e[t]=20,t+=2,e[t++]=r.flag<<1|(null==a&&8),e[t++]=o&&8,e[t++]=255&r.compression,e[t++]=r.compression>>8;var d=new Date(null==r.mtime?Date.now():r.mtime),h=d.getFullYear()-1980;if((h<0||h>119)&&Ai(10),os(e,t,h<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>>1),t+=4,null!=a&&(os(e,t,r.crc),os(e,t+4,a),os(e,t+8,r.size)),os(e,t+12,c),os(e,t+14,f),t+=16,null!=i&&(os(e,t,u),os(e,t+6,r.attrs),os(e,t+10,i),t+=14),e.set(n,t),t+=c,f)for(var p in l){var g=l[p],m=g.length;os(e,t,+p),os(e,t+2,m),e.set(g,t+4),t+=4+m}return u&&(e.set(s,t),t+=u),t},Ds=function(e,t,r,n,o){os(e,t,101010256),os(e,t+8,r),os(e,t+10,r),os(e,t+12,n),os(e,t+16,o)},Os=function(){function e(e){this.filename=e,this.c=Ki(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){this.ondata||Ai(5),this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}();(function(){function e(e,t){var r=this;t||(t={}),Os.call(this,e),this.d=new ds(t,(function(e,t){r.ondata(null,e,t)})),this.compression=8,this.flag=Rs(t.level)}e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){Os.prototype.push.call(this,e,t)}})(),function(){function e(e,t){var r=this;t||(t={}),Os.call(this,e),this.d=new hs(t,(function(e,t,n){r.ondata(e,t,n)})),this.compression=8,this.flag=Rs(t.level),this.terminate=this.d.terminate}e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){Os.prototype.push.call(this,e,t)}}(),function(){function e(e){this.ondata=e,this.u=[],this.d=1}e.prototype.add=function(e){var t=this;if(this.ondata||Ai(5),2&this.d)this.ondata(Ai(4+8*(1&this.d),0,1),null,!1);else{var r=Ss(e.filename),n=r.length,o=e.comment,a=o&&Ss(o),i=n!=e.filename.length||a&&o.length!=a.length,s=n+Is(e.extra)+30;n>65535&&this.ondata(Ai(11,0,1),null,!1);var c=new $a(s);Ts(c,0,e,r,i);var l=[c],u=function(){for(var e=0,r=l;e<r.length;e++){var n=r[e];t.ondata(null,n,!1)}l=[]},f=this.d;this.d=0;var d=this.u.length,h=ji(e,{f:r,u:i,o:a,t:function(){e.terminate&&e.terminate()},r:function(){if(u(),f){var e=t.u[d+1];e?e.r():t.d=1}f=1}}),p=0;e.ondata=function(r,n,o){if(r)t.ondata(r,n,o),t.terminate();else if(p+=n.length,l.push(n),o){var a=new $a(16);os(a,0,134695760),os(a,4,e.crc),os(a,8,p),os(a,12,e.size),l.push(a),h.c=p,h.b=s+p+16,h.crc=e.crc,h.size=e.size,f&&h.r(),f=1}else f&&u()},this.u.push(h)}},e.prototype.end=function(){var e=this;2&this.d?this.ondata(Ai(4+8*(1&this.d),0,1),null,!0):(this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3)},e.prototype.e=function(){for(var e=0,t=0,r=0,n=0,o=this.u;n<o.length;n++){r+=46+(c=o[n]).f.length+Is(c.extra)+(c.o?c.o.length:0)}for(var a=new $a(r+22),i=0,s=this.u;i<s.length;i++){var c=s[i];Ts(a,e,c,c.f,c.u,c.c,t,c.o),e+=46+c.f.length+Is(c.extra)+(c.o?c.o.length:0),t+=c.b}Ds(a,e,this.u.length,r,t),this.ondata(null,a,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){t[e].t()}this.d=2}}();var Ms=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}();(function(){function e(){var e=this;this.i=new gs((function(t,r){e.ondata(null,t,r)}))}e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(e){this.ondata(e,null,t)}},e.compression=8})(),function(){function e(e,t){var r=this;t<32e4?this.i=new gs((function(e,t){r.ondata(null,e,t)})):(this.i=new ms((function(e,t,n){r.ondata(e,t,n)})),this.terminate=this.i.terminate)}e.prototype.push=function(e,t){this.i.terminate&&(e=Ei(e,0)),this.i.push(e,t)},e.compression=8}(),function(){function e(e){this.onfile=e,this.k=[],this.o={0:Ms},this.p=Li}e.prototype.push=function(e,t){var r=this;if(this.onfile||Ai(5),this.p||Ai(4),this.c>0){var n=Math.min(this.c,e.length),o=e.subarray(0,n);if(this.c-=n,this.d?this.d.push(o,!this.c):this.k[0].push(o),(e=e.subarray(n)).length)return this.push(e,t)}else{var a=0,i=0,s=void 0,c=void 0;this.p.length?e.length?((c=new $a(this.p.length+e.length)).set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var l=c.length,u=this.c,f=u&&this.d,d=function(){var e,t=rs(c,i);if(67324752==t){a=1,s=i,h.d=null,h.c=0;var n=ts(c,i+6),o=ts(c,i+8),f=2048&n,d=8&n,p=ts(c,i+26),g=ts(c,i+28);if(l>i+30+p+g){var m=[];h.k.unshift(m),a=2;var y,v=rs(c,i+18),w=rs(c,i+22),k=Ps(c.subarray(i+30,i+=30+p),!f);4294967295==v?(e=d?[-2]:xs(c,i),v=e[0],w=e[1]):d&&(v=-1),i+=g,h.c=v;var b={name:k,compression:o,start:function(){if(b.ondata||Ai(5),v){var e=r.o[o];e||b.ondata(Ai(14,"unknown compression type "+o,1),null,!1),(y=v<0?new e(k):new e(k,v,w)).ondata=function(e,t,r){b.ondata(e,t,r)};for(var t=0,n=m;t<n.length;t++){var a=n[t];y.push(a,!1)}r.k[0]==m&&r.c?r.d=y:y.push(Li,!0)}else b.ondata(null,Li,!0)},terminate:function(){y&&y.terminate&&y.terminate()}};v>=0&&(b.size=v,b.originalSize=w),h.onfile(b)}return"break"}if(u){if(134695760==t)return s=i+=12+(-2==u&&8),a=3,h.c=0,"break";if(33639248==t)return s=i-=4,a=3,h.c=0,"break"}},h=this;i<l-4;++i){if("break"===d())break}if(this.p=Li,u<0){var p=a?c.subarray(0,s-12-(-2==u&&8)-(134695760==rs(c,s-16)&&4)):c.subarray(0,i);f?f.push(p,!!a):this.k[+(2==a)].push(p)}if(2&a)return this.push(c.subarray(i),t);this.p=c.subarray(i)}t&&(this.c&&Ai(13),this.p=null)},e.prototype.register=function(e){this.o[e.compression]=e}}(),"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var Ns="4.0.1",Ls="https://raw.githubusercontent.com/the-commons-project/vci-directory/main/logs/vci_snapshot.json",Us=5e3;const Hs=/\d+\.\d+\.\d+/;function Ks(e){const{log:t}=e;if(t.label="FHIRBUNDLE",!e.fhirbundle||!Pa.is.object(e.fhirbundle))return t.fatal("context.fhirbundle is required and must be an object",an.FHIR_VALIDATION_ERROR);const r=e.fhirbundle;return r.resourceType&&"Bundle"===r.resourceType||t.error("context.fhirbundle.resourceType must equal 'Bundle'",an.FHIR_VALIDATION_ERROR),r.type&&"collection"===r.type||t.error("context.fhirbundle.type must equal 'collection'",an.FHIR_VALIDATION_ERROR),r.entry&&r.entry instanceof Array?(r.entry.forEach(((e,r)=>{if(e.fullUrl&&/resource:\d+/.test(e.fullUrl)||t.error(`context.fhirbundle.entry[${r}].fullUrl must equal 'resource:#'`,an.FHIR_VALIDATION_ERROR),e.resource&&Pa.is.object(e.resource)){const n=e.resource;n.resourceType&&"string"==typeof n.resourceType||t.error(`context.fhirbundle.entry[${r}].resource.resourceType must be a string`,an.FHIR_VALIDATION_ERROR)}else t.error(`context.fhirbundle.entry[${r}].resource must be an object'`,an.FHIR_VALIDATION_ERROR)})),e):t.fatal("context.fhirbundle.entry must be an Array",an.FHIR_VALIDATION_ERROR)}var zs={decode:function(e){const{log:t}=e;return t.label="FHIRBUNDLE",e.fhirbundle=e.jws.payload?.vc?.credentialSubject?.fhirBundle,e},encode:function(e){const{options:t,log:r}=e;r.label="FHIRBUNDLE";let{nbf:n,iss:o,rid:a,fhirVersion:i}=t.encode??{};if(void 0===n&&(n=Date.now()),o&&"string"==typeof o||r.fatal("options.encode.iss is required and must be a string",an.PARAMETER_INVALID),n&&"number"!=typeof n&&r.fatal("options.encode.nbf must be a Number representing a date in milliseconds",an.PARAMETER_INVALID),a&&"string"!=typeof a&&r.fatal("options.encode.rid must be a string",an.PARAMETER_INVALID),!i||"string"==typeof i&&Hs.test(i)||r.fatal(`options.encode.fhirVersion must be a string of form ${Hs.toString()}`,an.PARAMETER_INVALID),r.isFatal)return e;if(Ks(e).log.isFatal)return e;const s=e.fhirbundle;i=i||Ns;const c={iss:o,nbf:n,vc:{type:["https://smarthealth.cards#health-card","https://smarthealth.cards#immunization","https://smarthealth.cards#covid19"],credentialSubject:{fhirVersion:i,fhirBundle:s}}};return a&&(c.rid=a),e.jws.payload=c,e},validate:Ks};function Fs(e){const{log:t}=e;t.label="JWS.payload";const r=e.jws.payload;return Pa.is.object(r)?"iss"in r&&"string"==typeof r.iss?"nbf"in r&&"number"==typeof r.nbf?r.nbf>Date.now()?t.fatal(`JWS Payload 'not before' nbf='${new Date(r.nbf)}' is greater than now.`,an.JWS_PAYLOAD_FUTURE_NBF):"vc"in r?"exp"in r?t.fatal("JWS Payload missing 'expiration' ('exp') property.",an.JWS_PAYLOAD_ERROR):(e.fhirbundle=e.fhirbundle||e.jws.payload?.vc.credentialSubject.fhirBundle,!1!==e?.options?.chain&&zs.validate(e),e):t.fatal("JWS Payload missing 'verifiable credential' ('vc') property.",an.JWS_PAYLOAD_ERROR):t.fatal("JWS Payload missing 'not before' ('nbf') property or is not a number.",an.JWS_PAYLOAD_ERROR):t.fatal("JWS Payload missing 'issuer' ('iss') property or is not a string.",an.JWS_PAYLOAD_ERROR):t.fatal("JWS payload is not an Object.",an.JWS_PAYLOAD_ERROR)}var js={encode:function(e){const{log:t}=e;if(t.label="JWS.payload",Fs(e).log.isFatal)return e;const r=JSON.stringify(e.jws.payload),n=Na.textToBytes(r),o=ps(new Uint8Array(n),{level:e.options?.encode?.deflateLevel||6});return e.flat.payload=Na.bytesToBase64(o,!0),e},decode:function(e){const{log:t}=e;t.label="JWS.payload";const r=e.flat.payload;if(!Pa.is.base64url(r))return t.fatal("payload parameter is not base64url",an.PARAMETER_INVALID);t.debug(`payload base64url:\n ${r}`);const n=Na.base64ToBytes(r.trim());let o;t.debug(`payload Uint8Array:\n ${n}`);try{o=ys(n)}catch(e){return t.fatal(`failed to inflate payload ${e.toString()}`,an.JWS_PAYLOAD_DECODE_ERROR)}const a=Na.bytesToText(o),i=Pa.parseJson(a);return i?(e.jws.payload=i,e.fhirbundle=e.jws.payload?.vc?.credentialSubject?.fhirBundle,e):t.fatal("JWS Payload could not be decoded as JSON.",an.JWS_PAYLOAD_DECODE_ERROR)},validate:Fs};function Ws(e){const{log:t}=e;return t.label="JWS.signature",e.jws.signature instanceof Uint8Array?(64!==e.jws.signature?.length&&t.warn("JWS.signature should be 64 bytes long for ES256 algorithm.",an.JWS_SIGNATURE_FORMAT_ERROR),e):(t.fatal("JWS.signature is not Uint8Array",an.PARAMETER_INVALID),e)}var Js={encode:function(e){const{log:t}=e;return t.label="JWS.signature",Ws(e).log.isFatal||(e.flat.signature=Na.bytesToBase64(e.jws.signature,!0)),e},decode:function(e){const{log:t}=e;t.label="JWS.signature";const r=e.flat.signature;if(!Pa.is.base64url(r))return t.fatal("signature parameter is not base64url",an.PARAMETER_INVALID),e;const n=Na.base64ToBytes(r.trim());return t.debug(`signature base64url:\n ${r}`),t.debug(`signature Uint8Array:\n ${n}`),e.jws.signature=n,e},validate:Ws};function Vs(e){const{log:t}=e;return t.label="JWS.flat",Pa.is.base64url(e.flat.header)||t.fatal("header parameter is not base64url",an.PARAMETER_INVALID),Pa.is.base64url(e.flat.payload)||t.fatal("payload parameter is not base64url",an.PARAMETER_INVALID),Pa.is.base64url(e.flat.signature)||t.fatal("signature parameter is not base64url",an.PARAMETER_INVALID),e}var Zs={encode:function(e){const{log:t}=e;return t.label="JWS.flat",e},decode:function(e){const{log:t}=e;return t.label="JWS.flat",Vs(e).log.isFatal||(qa.decode(e),js.decode(e),Js.decode(e)),e},validate:Vs};const Ys=/^([a-zA-Z0-9_-]{2,})\.([a-zA-Z0-9_-]{2,})\.([a-zA-Z0-9_-]{2,})$/;function qs(e){const{log:t}=e;t.label="JWS.compact";const r=e.compact;return"string"!=typeof r?t.fatal("'compactJws' parameter not a string",an.PARAMETER_INVALID):Ys.test(r.trim())?e:t.fatal("Invalid compact-JWS format. Expect [a-zA-Z0-9_-]+.[a-zA-Z0-9_-]+.[a-zA-Z0-9_-]+",an.JWS_COMPACT_FORMAT_ERROR)}var Gs={encode:async function(e){const{log:t}=e;t.label="JWS.compact";const r=e.compact;if(qs(e).log.isFatal)return e;const n="-".charCodeAt(0),o="shc:/"+r.split("").map((e=>e.charCodeAt(0)-n)).flatMap((e=>[Math.floor(e/10),e%10])).join("");return e.shc=o,!1!==e?.options?.chain&&await ec.encode(e),e},decode:function(e){const{log:t}=e;if(t.label="JWS.compact",qs(e).log.isFatal)return e;const r=e.compact,[n,o,a]=r.split(".");return e.flat.header=n,e.flat.payload=o,e.flat.signature=a,!1!==e?.options?.chain&&Zs.decode(e),e},validate:qs};const $s=/^shc:\/((\d\d)+)$/;function Qs(e){const{log:t}=e;t.label="SHC";const r=e.shc;return"string"!=typeof r?(t.fatal("shc parameter is not a string",an.PARAMETER_INVALID),e):($s.test(r?.trim())||t.fatal("shc parameter is not SHC format. Expect shc:/([0-9][0-9])+",an.SHC_FORMAT_ERROR),e)}async function Xs(e){const r=[{data:"shc:/",mode:"byte"},{data:e.split("/")[1],mode:"numeric"}];return t(hn).toDataURL(r,{errorCorrectionLevel:"L"})}var ec={encode:async function(e){const{log:t}=e;return t.label="SHC",Qs(e).log.isFatal||(e.qr=await Xs(e.shc)),e},validate:Qs,decode:async function(e){const r=e.log;if(r.label="SHC",Qs(e).log.isFatal)return e;const n=e.shc;e.qr=await Xs(n),r.debug(`QR:\n${await async function(e){const r=[{data:"shc:/",mode:"byte"},{data:e.split("/")[1],mode:"numeric"}];return t(hn).toString(r,{errorCorrectionLevel:"L",type:"terminal"})}(n)}`);const o=($s.exec(n)?.[1]??"").match(/(\d\d?)/g)??[],a="-".charCodeAt(0),i=o.map((e=>String.fromCharCode(Number.parseInt(e)+a))).join("");return e.compact=i,!1!==e?.options?.chain&&Gs.decode(e),e}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tc=function(){return tc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tc.apply(this,arguments)};Object.create;Object.create;function rc(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function nc(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r
/**
 * @module locator
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */}function oc(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ac(e){return e.reduce((function(e,t){return e+t}))}function ic(e,t,r,n){var o,a,i,s,c=[{x:Math.floor(e.x),y:Math.floor(e.y)}],l=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);l?(o=Math.floor(e.y),a=Math.floor(e.x),i=Math.floor(t.y),s=Math.floor(t.x)):(o=Math.floor(e.x),a=Math.floor(e.y),i=Math.floor(t.x),s=Math.floor(t.y));for(var u=Math.abs(i-o),f=Math.abs(s-a),d=o<i?1:-1,h=a<s?1:-1,p=!0,g=Math.floor(-u/2),m=o,y=a;m!==i+d;m+=d){var v=l?y:m,w=l?m:y;if(r.get(v,w)!==p&&(p=!p,c.push({x:v,y:w}),c.length===n+1))break;if((g+=f)>0){if(y===s)break;y+=h,g-=u}}for(var k=[],b=0;b<n;b++)c[b]&&c[b+1]?k.push(oc(c[b],c[b+1])):k.push(0);return k}function sc(e,t,r,n){var o,a=t.y-e.y,i=t.x-e.x,s=ic(e,t,r,Math.ceil(n/2)),c=ic(e,{x:e.x-i,y:e.y-a},r,Math.ceil(n/2)),l=s.shift()+c.shift()-1;return(o=c.concat(l)).concat.apply(o,s)}function cc(e,t){var r=ac(e)/ac(t),n=0;return t.forEach((function(t,o){n+=Math.pow(e[o]-t*r,2)})),{averageSize:r,error:n}}function lc(e,t,r){try{var n=sc(e,{x:-1,y:e.y},r,t.length),o=sc(e,{x:e.x,y:-1},r,t.length),a=sc(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},r,t.length),i=sc(e,{x:Math.min(r.width,e.x+e.y)+1,y:Math.min(r.height,e.y+e.x)+1},r,t.length),s=cc(n,t),c=cc(o,t),l=cc(a,t),u=cc(i,t),f=Math.sqrt(s.error*s.error+c.error*c.error+l.error*l.error+u.error*u.error),d=(s.averageSize+c.averageSize+l.averageSize+u.averageSize)/4;return f+(Math.pow(s.averageSize-d,2)+Math.pow(c.averageSize-d,2)+Math.pow(l.averageSize-d,2)+Math.pow(u.averageSize-d,2))/d}catch(e){return 1/0}}function uc(e,t){for(var r=Math.round(t.x);e.get(r,Math.round(t.y));)r--;for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n++;for(var o=(r+n)/2,a=Math.round(t.y);e.get(Math.round(o),a);)a--;for(var i=Math.round(t.y);e.get(Math.round(o),i);)i++;return{x:o,y:(a+i)/2}}function fc(e,t,r,n,o){var a,i,s;try{a=function(e,t,r,n){var o=(ac(sc(e,r,n,5))/7+ac(sc(e,t,n,5))/7+ac(sc(r,e,n,5))/7+ac(sc(t,e,n,5))/7)/4;if(o<1)throw new Error("invalid module size");var a=Math.round(oc(e,t)/o),i=Math.round(oc(e,r)/o),s=Math.floor((a+i)/2)+7;switch(s%4){case 0:s++;break;case 2:s--}return{dimension:s,moduleSize:o}}(n,r,o,e),i=a.dimension,s=a.moduleSize}catch(e){return null}var c=r.x-n.x+o.x,l=r.y-n.y+o.y,u=(oc(n,o)+oc(n,r))/2/s,f=1-3/u,d={x:n.x+f*(c-n.x),y:n.y+f*(l-n.y)},h=t.reduce((function(t,r){var n=r.top,o=r.bottom,a=(n.startX+n.endX+o.startX+o.endX)/4,i=(n.y+o.y+1)/2,s=Math.floor(a),c=Math.floor(i);if(e.get(s,c)){var l=lc({x:s,y:c},[1,1,1],e)+oc({x:a,y:i},d);t.push({x:a,y:i,score:l})}return t}),[]).sort((function(e,t){return e.score-t.score}));return{alignmentPattern:u>=15&&h.length?h[0]:d,dimension:i}}function dc(e){for(var t=[],r=[],n=[],o=[],a=function(a){for(var i=0,s=!1,c=[0,0,0,0,0],l=function(t){var r=e.get(t,a);if(r===s)i++;else{c=[c[1],c[2],c[3],c[4],i],i=1,s=r;var l=ac(c)/7,u=Math.abs(c[0]-l)<l&&Math.abs(c[1]-l)<l&&Math.abs(c[2]-3*l)<3*l&&Math.abs(c[3]-l)<l&&Math.abs(c[4]-l)<l&&!r,f=ac(c.slice(-3))/3,d=Math.abs(c[2]-f)<f&&Math.abs(c[3]-f)<f&&Math.abs(c[4]-f)<f&&r;if(u){var h=t-c[3]-c[4],p=h-c[2],g={startX:p,endX:h,y:a};(m=n.filter((function(e){return p>=e.bottom.startX&&p<=e.bottom.endX||h>=e.bottom.startX&&p<=e.bottom.endX||p<=e.bottom.startX&&h>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5}))).length>0?m[0].bottom=g:n.push({top:g,bottom:g})}if(d){var m,y=t-c[4],v=y-c[3];g={startX:v,y:a,endX:y};(m=o.filter((function(e){return v>=e.bottom.startX&&v<=e.bottom.endX||y>=e.bottom.startX&&v<=e.bottom.endX||v<=e.bottom.startX&&y>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5}))).length>0?m[0].bottom=g:o.push({top:g,bottom:g})}}},u=-1;u<=e.width;u++)l(u);t.push.apply(t,n.filter((function(e){return e.bottom.y!==a&&e.bottom.y-e.top.y>=2}))),n=n.filter((function(e){return e.bottom.y===a})),r.push.apply(r,o.filter((function(e){return e.bottom.y!==a}))),o=o.filter((function(e){return e.bottom.y===a}))},i=0;i<=e.height;i++)a(i);t.push.apply(t,n.filter((function(e){return e.bottom.y-e.top.y>=2}))),r.push.apply(r,o);var s=t.reduce((function(t,r){var n=r.top,o=r.bottom;if(o.y-n.y>=2){var a=(n.startX+n.endX+o.startX+o.endX)/4,i=(n.y+o.y+1)/2,s=Math.round(a),c=Math.round(i);if(e.get(s,c)){var l=[n.endX-n.startX,o.endX-o.startX,o.y-n.y+1],u=ac(l)/l.length,f=lc({x:s,y:c},[1,1,3,1,1],e);t.push({x:a,y:i,size:u,score:f})}}return t}),[]).sort((function(e,t){return e.score-t.score})).reduce((function(e,t,r,n){if(r<=4){var o=n.reduce((function(e,n,o){var a=n.x,i=n.y,s=n.size,c=n.score;return r!==o&&e.push({x:a,y:i,size:s,score:c+Math.pow(s-t.size,2)/t.size}),e}),[]);if(o.length>=2){var a=t.score+o[0].score+o[1].score;e.push({points:[t].concat(o.sort((function(e,t){return e.score-t.score})).slice(0,2)),score:a})}}return e}),[]).sort((function(e,t){return e.score-t.score}));if(0===s.length)return null;var c=function(e,t,r){var n,o,a,i,s,c,l,u=oc(e,t),f=oc(t,r),d=oc(e,r);return f>=u&&f>=d?(l=(n=[t,e,r])[0],s=n[1],c=n[2]):d>=f&&d>=u?(l=(o=[e,t,r])[0],s=o[1],c=o[2]):(l=(a=[e,r,t])[0],s=a[1],c=a[2]),(c.x-s.x)*(l.y-s.y)-(c.y-s.y)*(l.x-s.x)<0&&(l=(i=[c,l])[0],c=i[1]),{bottomLeft:l,topLeft:s,topRight:c}}(s[0].points[0],s[0].points[1],s[0].points[2]),l=c.topRight,u=c.topLeft,f=c.bottomLeft,d=[],h=fc(e,r,l,u,f);null!==h&&d.push({alignmentPattern:{x:h.alignmentPattern.x,y:h.alignmentPattern.y},bottomLeft:{x:f.x,y:f.y},dimension:h.dimension,topLeft:{x:u.x,y:u.y},topRight:{x:l.x,y:l.y}});var p=uc(e,l),g=uc(e,u),m=uc(e,f),y=fc(e,r,p,g,m);return null!==y&&d.push({alignmentPattern:{x:y.alignmentPattern.x,y:y.alignmentPattern.y},bottomLeft:{x:m.x,y:m.y},topLeft:{x:g.x,y:g.y},topRight:{x:p.x,y:p.y},dimension:y.dimension}),0===d.length?null:d}
/**
 * @module BitMatrix
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */var hc=function(){function e(e,t){this.data=e,this.width=t,this.height=e.length/t}return e.createEmpty=function(t,r){return new e(new Uint8ClampedArray(t*r),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height)&&!!this.data[t*this.width+e]},e.prototype.set=function(e,t,r){this.data[t*this.width+e]=r?1:0},e.prototype.setRegion=function(e,t,r,n,o){for(var a=t;a<t+n;a++)for(var i=e;i<e+r;i++)this.set(i,a,!!o)},e}();
/**
 * @module extractor
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */function pc(e,t,r,n){var o=e.x-t.x+r.x-n.x,a=e.y-t.y+r.y-n.y;if(0===o&&0===a)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:r.x-t.x,a22:r.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var i=t.x-r.x,s=n.x-r.x,c=t.y-r.y,l=n.y-r.y,u=i*l-s*c,f=(o*l-s*a)/u,d=(i*a-o*c)/u;return{a11:t.x-e.x+f*t.x,a12:t.y-e.y+f*t.y,a13:f,a21:n.x-e.x+d*n.x,a22:n.y-e.y+d*n.y,a23:d,a31:e.x,a32:e.y,a33:1}}function gc(e,t){for(var r,n,o=function(e,t,r,n){var o=pc(e,t,r,n);return{a11:o.a22*o.a33-o.a23*o.a32,a12:o.a13*o.a32-o.a12*o.a33,a13:o.a12*o.a23-o.a13*o.a22,a21:o.a23*o.a31-o.a21*o.a33,a22:o.a11*o.a33-o.a13*o.a31,a23:o.a13*o.a21-o.a11*o.a23,a31:o.a21*o.a32-o.a22*o.a31,a32:o.a12*o.a31-o.a11*o.a32,a33:o.a11*o.a22-o.a12*o.a21}}({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),a=pc(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),i=(n=o,{a11:(r=a).a11*n.a11+r.a21*n.a12+r.a31*n.a13,a12:r.a12*n.a11+r.a22*n.a12+r.a32*n.a13,a13:r.a13*n.a11+r.a23*n.a12+r.a33*n.a13,a21:r.a11*n.a21+r.a21*n.a22+r.a31*n.a23,a22:r.a12*n.a21+r.a22*n.a22+r.a32*n.a23,a23:r.a13*n.a21+r.a23*n.a22+r.a33*n.a23,a31:r.a11*n.a31+r.a21*n.a32+r.a31*n.a33,a32:r.a12*n.a31+r.a22*n.a32+r.a32*n.a33,a33:r.a13*n.a31+r.a23*n.a32+r.a33*n.a33}),s=hc.createEmpty(t.dimension,t.dimension),c=function(e,t){var r=i.a13*e+i.a23*t+i.a33;return{x:Math.max(0,(i.a11*e+i.a21*t+i.a31)/r),y:Math.max(0,(i.a12*e+i.a22*t+i.a32)/r)}},l=0;l<t.dimension;l++)for(var u=0;u<t.dimension;u++){var f=c(u+.5,l+.5);s.set(u,l,e.get(Math.floor(f.x),Math.floor(f.y)))}return{matrix:s,mappingFunction:c}}
/**
 * @module GenericGF
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */function mc(e,t){return e^t}var yc=function(){function e(e,t,r){this.primitive=e,this.size=t,this.generatorBase=r,this.expTable=[],this.logTable=[];for(var n=1,o=0;o<this.size;o++)this.logTable[o]=0,this.expTable[o]=n,(n*=2)>=this.size&&(n=(n^this.primitive)&this.size-1);for(o=0;o<this.size-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new vc(this,Uint8ClampedArray.from([0])),this.one=new vc(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("invalid monomial degree less than 0");if(0===t)return this.zero;var r=new Uint8ClampedArray(e+1);return r[0]=t,new vc(this,r)},e.prototype.log=function(e){if(0===e)throw new Error("can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}(),vc=function(){function e(e,t){if(0===t.length)throw new Error("no coefficients");this.field=e;var r=t.length;if(r>1&&0===t[0]){for(var n=1;n<r&&0===t[n];)n++;if(n===r)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(r-n);for(var o=0;o<this.coefficients.length;o++)this.coefficients[o]=t[n+o]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var r;if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,o=t.coefficients;n.length>o.length&&(n=(r=[o,n])[0],o=r[1]);for(var a=new Uint8ClampedArray(o.length),i=o.length-n.length,s=0;s<i;s++)a[s]=o[s];for(s=i;s<o.length;s++)a[s]=mc(n[s-i],o[s]);return new e(this.field,a)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var r=this.coefficients.length,n=new Uint8ClampedArray(r),o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],t);return new e(this.field,n)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var r=this.coefficients,n=r.length,o=t.coefficients,a=o.length,i=new Uint8ClampedArray(n+a-1),s=0;s<n;s++)for(var c=r[s],l=0;l<a;l++)i[s+l]=mc(i[s+l],this.field.multiply(c,o[l]));return new e(this.field,i)},e.prototype.multiplyByMonomial=function(t,r){if(t<0)throw new Error("invalid degree less than 0");if(0===r)return this.field.zero;for(var n=this.coefficients.length,o=new Uint8ClampedArray(n+t),a=0;a<n;a++)o[a]=this.field.multiply(this.coefficients[a],r);return new e(this.field,o)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var r=this.coefficients.length;if(1===e)return this.coefficients.forEach((function(e){t=mc(t,e)})),t;t=this.coefficients[0];for(var n=1;n<r;n++)t=mc(this.field.multiply(e,t),this.coefficients[n]);return t},e}();
/**
 * @module GenericGFPoly
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */function wc(e,t){var r=new Uint8ClampedArray(e.length);r.set(e);for(var n=new yc(285,256,0),o=new vc(n,r),a=new Uint8ClampedArray(t),i=!1,s=0;s<t;s++){var c=o.evaluateAt(n.exp(s+n.generatorBase));a[a.length-1-s]=c,0!==c&&(i=!0)}if(!i)return r;var l=new vc(n,a),u=
/**
 * @module index
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */
function(e,t,r,n){var o;t.degree()<r.degree()&&(t=(o=[r,t])[0],r=o[1]);for(var a=t,i=r,s=e.zero,c=e.one;i.degree()>=n/2;){var l=a,u=s;if(s=c,(a=i).isZero())return null;i=l;for(var f=e.zero,d=a.getCoefficient(a.degree()),h=e.inverse(d);i.degree()>=a.degree()&&!i.isZero();){var p=i.degree()-a.degree(),g=e.multiply(i.getCoefficient(i.degree()),h);f=f.addOrSubtract(e.buildMonomial(p,g)),i=i.addOrSubtract(a.multiplyByMonomial(p,g))}if(c=f.multiplyPoly(s).addOrSubtract(u),i.degree()>=a.degree())return null}var m=c.getCoefficient(0);if(0===m)return null;var y=e.inverse(m);return[c.multiply(y),i.multiply(y)]}(n,n.buildMonomial(t,1),l,t);if(null===u)return null;var f=function(e,t){var r=t.degree();if(1===r)return[t.getCoefficient(1)];for(var n=0,o=new Array(r),a=1;a<e.size&&n<r;a++)0===t.evaluateAt(a)&&(o[n]=e.inverse(a),n++);return n!==r?null:o}(n,u[0]);if(null==f)return null;for(var d=function(e,t,r){for(var n=r.length,o=new Array(n),a=0;a<n;a++){for(var i=1,s=e.inverse(r[a]),c=0;c<n;c++)a!==c&&(i=e.multiply(i,mc(1,e.multiply(r[c],s))));o[a]=e.multiply(t.evaluateAt(s),e.inverse(i)),0!==e.generatorBase&&(o[a]=e.multiply(o[a],s))}return o}(n,u[1],f),h=0;h<f.length;h++){var p=r.length-1-n.log(f[h]);if(p<0)return null;r[p]=mc(r[p],d[h])}return r}
/**
 * @module Version
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */var kc,bc=[{infoBits:0,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]}]},{infoBits:0,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]}]},{infoBits:0,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:0,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]}]},{infoBits:0,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:0,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]}]}],Bc=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("can't read ".concat(e," bits"));var t=0;if(this.bitOffset>0){var r=8-this.bitOffset,n=e<r?e:r,o=255>>8-n<<(a=r-n);t=(this.bytes[this.byteOffset]&o)>>a,e-=n,this.bitOffset+=n,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;if(e>0){var a;o=255>>(a=8-e)<<a;t=t<<e|(this.bytes[this.byteOffset]&o)>>a,this.bitOffset+=e}}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();
/**
 * @module BitStream
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */function _c(e){for(var t=0,r="",n=e.length,o=String.fromCharCode;t<n;){var a=e[t++];if(a<128)r+=o(a);else if(a>191&&a<224){r+=o((31&a)<<6|63&e[t++])}else if(a>239&&a<365){var i=((7&a)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536;r+=o(55296+(i>>10)),r+=o(56320+(1023&i))}else{r+=o((15&a)<<12|(63&e[t++])<<6|63&e[t++])}}return r}!function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.StructuredAppend=3]="StructuredAppend",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI"}(kc||(kc={}));var Ec,Cc=[[33088,""],[33152,""],[33167,""],[33190,""],[33226,""],[33359,""],[33376,""],[33409,""],[33439,""],[33600,""],[33664,""],[33695,""],[33727,""],[33856,""],[33904,""],[33920,""],[34688,""],[35136,""],[35200,""],[35392,""],[35456,""],[35648,""],[35712,""],[35904,""],[35968,""],[36160,""],[36224,""],[36416,""],[36480,""],[36672,""],[36736,""],[36928,""],[36992,""],[37184,""],[37248,""],[37440,""],[37504,""],[37696,""],[37760,""],[37952,""],[38016,""],[38208,""],[38272,""],[38464,""],[38528,""],[38720,""],[38784,""],[38976,""],[39071,""],[39232,""],[39296,""],[39488,""],[39552,""],[39744,""],[39808,""],[4e4,""],[40064,""],[40256,""],[40320,""],[40512,""],[40576,""],[40768,""],[40832,""],[57408,""],[57472,""],[57664,""],[57728,""],[57920,""],[57984,""],[58176,""],[58240,""],[58432,""],[58496,""],[58688,""],[58752,""],[58944,""],[59008,""],[59200,""],[59264,""],[59456,""],[59520,""],[59712,""],[59776,""],[59968,""],[60032,""]];function Ac(){if(!Ec){for(var e={},t={},r=Cc.length,n=0;n<r;n++)for(var o=Cc[n],a=o[1],i=a.length,s=0;s<i;s++){var c=o[0]+s,l=a.charAt(s).charCodeAt(0);e[l]=c,t[c]=l}Ec={UTF8_TO_SJIS:e,SJIS_TO_UTF8:t}}return Ec}function Sc(e){for(var t=0,r="",n=e.length,o=String.fromCharCode,a=Ac().SJIS_TO_UTF8;t<n;){var i=e[t++];if(i<128)r+=o(i);else if(160<=i&&i<=223)r+=o(i+65216);else{var s=a[(i<<8)+e[t++]];r+=null!=s?o(s):"?"}}return r}
/**
 * @module index
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */function Pc(e,t){for(var r="",n=[],o=[10,12,14][t],a=e.readBits(o);a>=3;){if((l=e.readBits(10))>=1e3)throw new Error("invalid numeric value above 999");var i=Math.floor(l/100),s=Math.floor(l/10)%10,c=l%10;n.push(48+i,48+s,48+c),r+=i.toString()+s.toString()+c.toString(),a-=3}if(2===a){if((l=e.readBits(7))>=100)throw new Error("invalid numeric value above 99");i=Math.floor(l/10),s=l%10;n.push(48+i,48+s),r+=i.toString()+s.toString()}else if(1===a){var l;if((l=e.readBits(4))>=10)throw new Error("invalid numeric value above 9");n.push(48+l),r+=l.toString()}return{bytes:n,data:r}}var Rc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function xc(e,t){for(var r=[],n=[9,11,13][t],o="",a=e.readBits(n);a>=2;){var i=e.readBits(11),s=Math.floor(i/45),c=i%45;r.push(Rc[s].charCodeAt(0),Rc[c].charCodeAt(0)),o+=Rc[s]+Rc[c],a-=2}if(1===a){s=e.readBits(6);r.push(Rc[s].charCodeAt(0)),o+=Rc[s]}return{bytes:r,data:o}}function Ic(e,t,r){for(var n=[],o=[8,16,16][t],a=e.readBits(o),i=0;i<a;i++)n.push(e.readBits(8));return{bytes:n,data:20===r?Sc(n):_c(n)}}function Tc(e,t){for(var r="",n=[],o=String.fromCharCode,a=Ac().SJIS_TO_UTF8,i=[8,10,12][t],s=e.readBits(i),c=0;c<s;c++){var l=e.readBits(13),u=Math.floor(l/192)<<8|l%192;u+=u<7936?33088:49472,n.push(u>>8,255&u);var f=a[u];r+=o(null!=f?f:u)}return{bytes:n,data:r}}
/**
 * @module index
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */
function Dc(e,t){for(var r=e^t,n=0;r;)n++,r&=r-1;return n}function Oc(e,t){return t<<1|+e}var Mc=[{bits:21522,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:2,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:3,dataMask:7}}];function Nc(e,t,r){for(var n=e.height,o=function(e){switch(e){case 0:return function(e,t){return 0==(e+t&1)};case 1:return function(e,t){return 0==(1&t)};case 2:return function(e,t){return e%3==0};case 3:return function(e,t){return(e+t)%3==0};case 4:return function(e,t){return 0==((e/3>>0)+(t/2>>0)&1)};case 5:return function(e,t){return(e*t&1)+e*t%3==0};case 6:return function(e,t){return 0==((e*t&1)+e*t%3&1)};case 7:return function(e,t){return 0==(e*t%3+(e+t&1)&1)};default:throw new Error("illegal mask: ".concat(e))}}(r.dataMask),a=function(e){var t=17+4*e.versionNumber,r=hc.createEmpty(t,t);r.setRegion(0,0,9,9,!0),r.setRegion(t-8,0,8,9,!0),r.setRegion(0,t-8,9,8,!0);for(var n=0,o=e.alignmentPatternCenters;n<o.length;n++)for(var a=o[n],i=0,s=e.alignmentPatternCenters;i<s.length;i++){var c=s[i];6===a&&6===c||6===a&&c===t-7||a===t-7&&6===c||r.setRegion(a-2,c-2,5,5,!0)}return r.setRegion(6,9,1,t-17,!0),r.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(r.setRegion(t-11,0,3,6,!0),r.setRegion(0,t-11,6,3,!0)),r}(t),i=0,s=0,c=[],l=!0,u=n-1;u>0;u-=2){6===u&&u--;for(var f=0;f<n;f++)for(var d=l?n-1-f:f,h=0;h<2;h++){var p=u-h;if(!a.get(p,d)){i++;var g=e.get(p,d);o(p,d)&&(g=!g),s=Oc(g,s),8===i&&(c.push(s),i=0,s=0)}}l=!l}return c}function Lc(e){var t=function(e){var t=e.height,r=Math.floor((t-17)/4);if(r<=6)return bc[r-1];for(var n=0,o=5;o>=0;o--)for(var a=t-9;a>=t-11;a--)n=Oc(e.get(a,o),n);var i=0;for(a=5;a>=0;a--)for(o=t-9;o>=t-11;o--)i=Oc(e.get(a,o),i);for(var s=1/0,c=null,l=0,u=bc;l<u.length;l++){var f=u[l];if(f.infoBits===n||f.infoBits===i)return f;var d=Dc(n,f.infoBits);d<s&&(c=f,s=d),(d=Dc(i,f.infoBits))<s&&(c=f,s=d)}return s<=3?c:null}(e);if(null===t)return null;var r=function(e){for(var t=0,r=0;r<=8;r++)6!==r&&(t=Oc(e.get(r,8),t));for(var n=7;n>=0;n--)6!==n&&(t=Oc(e.get(8,n),t));var o=e.height,a=0;for(n=o-1;n>=o-7;n--)a=Oc(e.get(8,n),a);for(r=o-8;r<o;r++)a=Oc(e.get(r,8),a);for(var i=1/0,s=null,c=0,l=Mc;c<l.length;c++){var u=l[c],f=u.bits,d=u.formatInfo;if(f===t||f===a)return d;var h=Dc(t,f);h<i&&(s=d,i=h),t!==a&&(h=Dc(a,f))<i&&(s=d,i=h)}return i<=3?s:null}(e);if(null===r)return null;var n=function(e,t,r){var n=[],o=t.errorCorrectionLevels[r],a=0;if(o.ecBlocks.forEach((function(e){for(var t=0;t<e.numBlocks;t++)n.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),a+=e.dataCodewordsPerBlock+o.ecCodewordsPerBlock})),e.length<a)return null;e=e.slice(0,a);for(var i=o.ecBlocks[0].dataCodewordsPerBlock,s=0;s<i;s++)for(var c=0,l=n;c<l.length;c++)l[c].codewords.push(e.shift());if(o.ecBlocks.length>1){var u=o.ecBlocks[0].numBlocks,f=o.ecBlocks[1].numBlocks;for(s=0;s<f;s++)n[u+s].codewords.push(e.shift())}for(;e.length>0;)for(var d=0,h=n;d<h.length;d++)h[d].codewords.push(e.shift());return n}(Nc(e,t,r),t,r.errorCorrectionLevel);if(null===n)return null;for(var o=n.reduce((function(e,t){return e+t.numDataCodewords}),0),a=new Uint8ClampedArray(o),i=0,s=0,c=n;s<c.length;s++){var l=c[s],u=wc(l.codewords,l.codewords.length-l.numDataCodewords);if(null===u)return null;for(var f=0;f<l.numDataCodewords;f++)a[i++]=u[f]}try{return function(e,t,r){for(var n,o,a,i,s=-1,c=new Bc(e),l=t<=9?0:t<=26?1:2,u={data:"",bytes:[],chunks:[],version:t,errorCorrectionLevel:r};c.available()>=4;){var f=c.readBits(4);if(f===kc.Terminator)return u;if(f===kc.ECI)s=0===c.readBits(1)?c.readBits(7):0===c.readBits(1)?c.readBits(14):0===c.readBits(1)?c.readBits(21):-1;else if(f===kc.Numeric){var d=Pc(c,l);u.data+=d.data,u.chunks.push({mode:kc.Numeric,data:d.data,bytes:d.bytes}),(n=u.bytes).push.apply(n,d.bytes)}else if(f===kc.Alphanumeric){var h=xc(c,l);u.data+=h.data,u.chunks.push({mode:kc.Alphanumeric,data:h.data,bytes:h.bytes}),(o=u.bytes).push.apply(o,h.bytes)}else if(f===kc.StructuredAppend){var p={symbols:[c.readBits(4),c.readBits(4)],parity:c.readBits(8)};u.chunks.push(tc({mode:kc.StructuredAppend},p))}else if(f===kc.Byte){var g=Ic(c,l,s);u.data+=g.data,u.chunks.push({encoding:s,mode:kc.Byte,data:g.data,bytes:g.bytes}),(a=u.bytes).push.apply(a,g.bytes)}else if(f===kc.Kanji){var m=Tc(c,l);u.data+=m.data,u.chunks.push({mode:kc.Kanji,data:m.data,bytes:m.bytes}),(i=u.bytes).push.apply(i,m.bytes)}}return 0===c.available()||0===c.readBits(c.available())?u:null}(a,t.versionNumber,r.errorCorrectionLevel)}catch(e){return null}}function Uc(e){var t=Lc(e);if(null!==t)return t;for(var r=0;r<e.width;r++)for(var n=r+1;n<e.height;n++)e.get(r,n)!==e.get(n,r)&&(e.set(r,n,!e.get(r,n)),e.set(n,r,!e.get(n,r)));return Lc(e)}
/**
 * @module binarizer
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */function Hc(e,t,r){return e<t?t:e>r?r:e}var Kc=function(){function e(e,t,r){this.width=e;var n=e*t;if(r&&r.length!==n)throw new Error("wrong buffer size");this.data=r||new Uint8ClampedArray(n)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,r){this.data[t*this.width+e]=r},e}();
/**
 * @module QRCode
 * @author nuintun
 * @author Cosmo Wolfe
 * @license https://raw.githubusercontent.com/cozmo/jsQR/master/LICENSE
 */
function zc(e){var t=dc(e);if(null===t)return null;for(var r=0,n=t;r<n.length;r++){var o=n[r],a=gc(e,o),i=Uc(a.matrix);if(null!==i){var s=o.dimension;return tc(tc({},i),{location:{topLeft:a.mappingFunction(0,0),topRight:a.mappingFunction(s,0),bottomLeft:a.mappingFunction(0,s),bottomRight:a.mappingFunction(s,s),topLeftFinder:o.topLeft,topRightFinder:o.topRight,bottomLeftFinder:o.bottomLeft,bottomRightAlignment:i.version>1?o.alignmentPattern:null}})}}return null}function Fc(e){e.onload=null,e.onerror=null}var jc=function(){function e(e){void 0===e&&(e={}),this.options=e}return e.prototype.setOptions=function(e){return this.options=tc(tc({},this.options),e),this},e.prototype.decode=function(e,t,r){var n=this.options,o=n.canOverwriteImage,a=n.greyScaleWeights,i=n.inversionAttempts,s=void 0===i?"attemptBoth":i,c="onlyInvert"===s||"invertFirst"===s,l=function(e,t,r,n,o,a){void 0===o&&(o={red:.2126,green:.7152,blue:.0722,useIntegerApproximation:!1}),void 0===a&&(a=!0);var i=t*r;if(e.length!==4*i)throw new Error("malformed data passed to binarizer");var s,c=0;a&&(s=new Uint8ClampedArray(e.buffer,c,i),c+=i);for(var l=new Kc(t,r,s),u=0;u<r;u++)for(var f=0;f<t;f++){var d=4*(u*t+f),h=e[d],p=e[d+1],g=e[d+2],m=o.red*h+o.green*p+o.blue*g;l.set(f,u,o.useIntegerApproximation?m+128>>8:m)}var y,v=Math.ceil(t/8),w=Math.ceil(r/8),k=v*w;a&&(y=new Uint8ClampedArray(e.buffer,c,k),c+=k);for(var b,B,_=new Kc(v,w,y),E=0;E<w;E++)for(var C=0;C<v;C++){var A=0,S=1/0,P=0;for(u=0;u<8;u++)for(f=0;f<8;f++){var R=l.get(8*C+f,8*E+u);A+=R,S=Math.min(S,R),P=Math.max(P,R)}var x=A/Math.pow(8,2);if(P-S<=24&&(x=S/2,E>0&&C>0)){var I=(_.get(C,E-1)+2*_.get(C-1,E)+_.get(C-1,E-1))/4;S<I&&(x=I)}_.set(C,E,x)}if(a){var T=new Uint8ClampedArray(e.buffer,c,i);c+=i,b=new hc(T,t)}else b=hc.createEmpty(t,r);if(n)if(a){var D=new Uint8ClampedArray(e.buffer,c,i);B=new hc(D,t)}else B=hc.createEmpty(t,r);for(E=0;E<w;E++)for(C=0;C<v;C++){for(var O=Hc(C,2,v-3),M=Hc(E,2,w-3),N=(A=0,-2);N<=2;N++)for(var L=-2;L<=2;L++)A+=_.get(O+N,M+L);var U=A/25;for(N=0;N<8;N++)for(L=0;L<8;L++){f=8*C+N,u=8*E+L;var H=l.get(f,u);b.set(f,u,H<=U),n&&B.set(f,u,!(H<=U))}}return n?{binarized:b,inverted:B}:{binarized:b}}(e,t,r,c||"attemptBoth"===s,a,o),u=l.binarized,f=l.inverted,d=zc(c?f:u);return null===d||"attemptBoth"!==n.inversionAttempts&&"invertFirst"!==n.inversionAttempts||(d=zc(c?u:f)),d},e.prototype.scan=function(e){var t=this;return new Promise((function(r,n){var o=new Image;o.crossOrigin="anonymous",o.onload=function(){Fc(o);var e=o.width,a=o.height,i=document.createElement("canvas"),s=i.getContext("2d");if(null===s)return n(new Error("browser does not support canvas.getContext('2d')"));i.width=e,i.height=a,s.drawImage(o,0,0);var c=s.getImageData(0,0,e,a).data,l=t.decode(c,e,a);return null!==l?r(l):n(new Error("failed to decode image"))},o.onerror=function(){Fc(o),n(new Error("failed to load image: ".concat(e)))},o.src=e}))},e}();var Wc={decode:async function(e){const{log:t}=e;t.label="QR";const r=new jc;if("string"!=typeof e.qr)return e;const n=await r.scan(e.qr);return"string"!=typeof n.data?Promise.resolve(t.fatal("Could not decode QR code.",an.QR_DECODE_ERROR)):(e.shc=n.data??"",!1!==e?.options?.chain&&await ec.decode(e),e)},validate:function(e){return e.log.label="QR",e}};function Jc(e){const{log:t}=e;t.label="JWS";const r=e.jws;return Pa.is.object(r)?("header"in r?qa.validate(e):t.fatal("JWS is missing .header property",an.JWS_MISSING_HEADER),"payload"in r?js.validate(e):t.fatal("JWS is missing .payload property",an.JWS_MISSING_PAYLOAD),"signature"in r?Js.validate(e):t.fatal("JWS is missing .signature property",an.JWS_MISSING_SIGNATURE),e):t.fatal("JWS is not an Object.",an.PARAMETER_INVALID)}var Vc,Zc,Yc,qc,Gc=function(e){const{log:t}=e;return t.label="JWS",Jc(e).log.isFatal||(qa.encode(e),e.log.isFatal,js.encode(e),e.log.isFatal,Js.encode(e),e.log.isFatal),e},$c=Jc;!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR"}(qc||(qc={}));class Qc{constructor(e){Vc.set(this,void 0),Zc.set(this,void 0),Yc.set(this,void 0),this.entries=(e=qc.WARNING)=>rc(this,Vc,"f").filter((t=>t.level>=e)),this.debug=e=>this.add(e,qc.DEBUG),this.info=e=>this.add(e,qc.INFO),this.warn=(e,t=an.ERROR)=>this.add(e,qc.WARNING,t),this.error=(e,t=an.ERROR,r=!1)=>this.add(e,qc.ERROR,t,r),this.fatal=(e,t=an.ERROR)=>this.add(e,qc.ERROR,t,!0),this.toJSON=()=>this,this.toString=()=>JSON.stringify(this),nc(this,Zc,"","f"),nc(this,Vc,[],"f"),nc(this,Yc,e,"f")}get isFatal(){return rc(this,Vc,"f").some((e=>e.fatal))}set label(e){nc(this,Zc,e,"f")}add(e,t=qc.ERROR,r=an.NOERROR,n=!1){return e instanceof Qc?nc(this,Vc,rc(this,Vc,"f").concat(e.entries()),"f"):rc(this,Vc,"f").push({message:e,code:r,fatal:n,level:t,label:rc(this,Zc,"f")}),rc(this,Yc,"f")}}Vc=new WeakMap,Zc=new WeakMap,Yc=new WeakMap;var Xc=class{constructor(e={}){this.options={},this.log=new Qc(this),this.options=e,this.jws={},this.flat={header:"",payload:"",signature:""}}get errors(){const e=this.log.entries(qc.ERROR);return e.length?e:void 0}get warnings(){const e=this.log.entries(qc.WARNING).filter((e=>e.level===qc.WARNING));return e.length?e:void 0}};let el=t(a("7we3r")).create({timeout:Us});var tl=function(e){return el.get(e).then((e=>e.data))};function rl(e,t){const{log:r}=t;return Pa.is.object(e)?"iss"in e&&"string"==typeof e.iss?("name"in e&&"string"==typeof e.name||r.warn("issuer.name is not a string",an.DIRECTORY_ISSUER_INVALID_PROPERTY),"website"in e&&"string"!=typeof e.website&&r.warn("optional issuer.website is not a string",an.DIRECTORY_ISSUER_INVALID_PROPERTY),"canonical_iss"in e&&"string"!=typeof e.canonical_iss&&r.warn("optional issuer.canonical_iss is not a string",an.DIRECTORY_ISSUER_INVALID_PROPERTY),0===t.log.entries(qc.ERROR).length):(r.fatal("issuer.iss is not a string",an.DIRECTORY_ISSUER_MISSING_ISS),!1):(r.fatal("issuer param is not an object"),!1)}async function nl(e,t){const r=[];for(const n of e){const e=await ol(n.iss).catch((e=>(t.log.warn(`Failed to download ${n.iss} : ${e.message}`),[])));r.push({issuer:{iss:n.iss,name:n.name??""},keys:e})}return r}async function ol(e){return await tl(`${e}/.well-known/jwks.json`).catch((e=>{throw e}))}var al={validate:async function(e,t){const{log:r}=t;if(r.label="DIRECTORY",!Pa.is.object(e))return r.fatal("directory param is not an object"),!1;if("directory"in e&&"string"==typeof e.directory||r.warn("directory.directory is not a string",an.DIRECTORY_ERROR),"time"in e&&"string"==typeof e.time?isNaN(Date.parse(e.time))&&r.warn("directory.time not a valid DateTime string",an.DIRECTORY_ERROR):r.warn("directory.time is not a string",an.DIRECTORY_ERROR),!("issuerInfo"in e&&e.issuerInfo instanceof Array))return r.fatal("directory.issuerInfo is not an Issuer & JWK []",an.DIRECTORY_ERROR),!1;const n=await async function(e,t){const{log:r}=t,n=t.log.entries().length;if(!(e instanceof Array))return r.fatal("issuerInfo param is not an Array"),Promise.resolve(!1);for(const n of e)r.label=`DIRECTORY.${n?.issuer?.name.replace(/ /g,"_")}`,rl(n.issuer,t),await Ja.validate.keys(n.keys,t);return n===t.log.entries().length}(e.issuerInfo,t);return n},lookupKey:function(e,t,r){const{log:n}=r;n.label="DIRECTORY";const o=r.options.directory,a=r.options.keys;if(!o&&!a)return void n.fatal("options.directory or options.keys not set",an.DIRECTORY_MISSING);if(o){const r=o.issuerInfo;if(!(r&&r instanceof Array))return void n.fatal("directory.issuerInfo is not an Issuer & JWK []",an.DIRECTORY_SCHEMA_ERROR);const a=r.find((t=>t.issuer?.iss===e));if(!a)return void n.fatal(`No issuer with .iss ${e} found in directory`,an.DIRECTORY_ISSUER_NOT_FOUND);const i=a.keys.find((e=>e?.kid===t));return i?{issuer:a.issuer,key:i}:void n.fatal(`No key with .kid ${t} found in issuer ${a.issuer?.name??e}`,an.DIRECTORY_KEY_NOT_FOUND)}const i=a.find((e=>e?.kid===t));if(i)return r.log.warn("Key with matching kid found. However, without a directory, an issuer cannot be matched to jwk.payload.iss",an.KEYS_ONLY_MATCH),{issuer:{iss:"unknown",name:"unknown"},key:i};n.fatal(`No key with .kid ${t} found in options.keys`,an.DIRECTORY_KEY_NOT_FOUND)},build:async function(e,t){const r={directory:"",time:(new Date).toUTCString(),issuerInfo:[]},n=function(e,t){let r=[];for(let n=0;n<e.length;n+=t){let o=e.slice(n,n+t);r.push(o)}return r}(e,Math.ceil(e.length/8)),o=[];for(const e of n)o.push(nl(e,t));return Promise.all(o).then((e=>([].concat(...e).forEach((e=>r.issuerInfo.push(e))),r)))},download:async function(e=Ls){return await tl(e).catch((e=>{throw e}))}};var il={verify:async function(e){const{log:t}=e;t.label="SIGNATURE";const r=e.compact,n=e.flat;if(!r&&!n.header&&!n.payload)return t.fatal("context.compact or context.flat required to check signature",an.JWS_COMPACT_MISSING),e;const o=e.jws.signature;if(!(o instanceof Uint8Array))return t.fatal("Context.jws.signature is not a Uint8Array",an.JWS_COMPACT_MISSING),e;const a=e.jws.header?.kid;if(!Pa.is.base64url(a))return t.fatal("Context.jws.header.kid is not a base64url string",an.JWS_COMPACT_MISSING),e;const i=e.jws.payload?.iss;if("string"!=typeof i)return t.fatal("Context.jws.payload.iss is not a string",an.JWS_PAYLOAD_ISS_MISSING),e;const s=al.lookupKey(i,a,e);if(t.label="SIGNATURE",!s)return e;const c=r?r.split(".",2).join("."):`${n.header}.${n.payload}`,l=await async function(e,t,r,n){const{log:o}=n;o.label="SIGNATURE";const a=Na.textToBytes(e);if(!await Ja.validate.key(r,!1,n))return!1;return await function(e,t,r){if(!Ua)throw new Error("Could not find crypto object");return Ua.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]).then((e=>Ua.verify({name:"ECDSA",hash:{name:"SHA-256"}},e,t,r))).then((e=>e)).catch((e=>{throw e}))}(r,t,a).catch((e=>(o.fatal(`crypto.verify error ${e.toString()}`,an.CRYPTO_FAILURE),!1)))}(c,o,s.key,e).catch((e=>(t.fatal(`Signature check error ${e.toString()}`,an.SIGNATURE_INVALID),!1)));return e.signature={issuer:Pa.clone(s.issuer),key:Pa.clone(s.key),verified:l},!1===l&&t.fatal("Signature could not be verified",an.SIGNATURE_INVALID),await zs.decode(e),e},sign:async function(e){const{log:t}=e;t.label="SIGNATURE";const{privateKey:r}=e.options;if(!r||!Ja.validate.key(r,!0,e))return t.fatal("options.privateKey is required for signature and must be a JWK private key",an.JWS_ENCODE_FAIL);if(!e.jws.payload||js.validate(e).log.isFatal)return e.qr=e.shc=e.flat.header=e.flat.payload=e.flat.signature=e.jws.signature=void 0,e;e.jws.header||await qa.generate(e),qa.encode(e),js.encode(e),e.jws.signature=e.flat.signature=void 0;const n=Na.textToBytes(`${e.flat.header}.${e.flat.payload}`),o=await function(e,t){if(!Ua)throw new Error("Could not find crypto object");return Ua.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then((e=>Ua.sign({name:"ECDSA",hash:{name:"SHA-256"}},e,t))).then((e=>e)).catch((e=>{throw e}))}(r,n).catch((e=>{t.fatal(`crypto.sign error ${e.toString()}`,an.CRYPTO_FAILURE)}));return o?(e.jws.signature=new Uint8Array(o),Js.encode(e),e):e}};const sl=["qr","shc","jws.compact","jws.flat","jws.header","jws.payload","jws.signature"];var cl=async function(e,t,r){let n;r=r||{},"string"==typeof t?n=t:Pa.is.object(t)&&(r=t),n=n||Pa.determineArtifact(e);const o=new Xc(r);if(n&&!sl.includes(n))return o.log.fatal(`Parameter 'type' is not a valid value (${sl.join("|")})`,an.PARAMETER_INVALID);switch(n){case"qr":o.qr=e,await Wc.decode(o);break;case"shc":o.shc=e,await ec.decode(o);break;case"jws.compact":o.compact=e,Gs.decode(o);break;case"jws.flat":o.flat=e,Zs.decode(o);break;case"jws.header":o.flat.header=e,qa.decode(o);break;case"jws.payload":o.flat.payload=e,js.decode(o);break;case"jws.signature":o.flat.signature=e,Js.decode(o);break;default:o.log.fatal("Cannot determine artifact type from code")}return o};var ll=async function(e,t){const r=await cl(e,t),n=r.jws;return n&&yl.validate.jws(r),n?(await il.verify(r),r):r};let ul={207:{name:"Moderna COVID-19 Vaccine (non-US Spikevax)",description:"COVID-19, mRNA, LNP-S, PF, 100 mcg/0.5mL dose or 50 mcg/0.25mL dose",cvx:207,manufacturer:"Moderna US.",mvx:"MOD",mvxStatus:"Active",status:"Active",updated:new Date("2021-07-13T07:00:00.000Z")},208:{name:"Pfizer-BioNTech COVID-19 Vaccine (EUA labeled)  COMIRNATY (BLA labeled)",description:"COVID-19, mRNA, LNP-S, PF, 30 mcg/0.3 mL dose",cvx:208,manufacturer:"Pfizer",mvx:"PFR",mvxStatus:"Active",status:"Active",updated:new Date("2021-09-10T07:00:00.000Z")},210:{name:"AstraZeneca COVID-19 Vaccine (Non-US tradenames include VAXZEVRIA, COVISHIELD)",description:"COVID-19 vaccine, vector-nr, rS-ChAdOx1, PF, 0.5 mL ",cvx:210,manufacturer:"AstraZeneca",mvx:"ASZ",mvxStatus:"Active",status:"Active",updated:new Date("2021-07-13T07:00:00.000Z")},211:{name:"Novavax COVID-19 Vaccine",description:"COVID-19, subunit, rS-nanoparticle+Matrix-M1 Adjuvant, PF, 0.5 mL",cvx:211,manufacturer:"Novavax.",mvx:"NVX",mvxStatus:"Active",status:"Active",updated:new Date("2021-03-23T07:00:00.000Z")},212:{name:"Janssen (J&J) COVID-19 Vaccine",description:"COVID-19 vaccine, vector-nr, rS-Ad26, PF, 0.5 mL",cvx:212,manufacturer:"Janssen",mvx:"JSN",mvxStatus:"Active",status:"Active",updated:new Date("2021-07-12T07:00:00.000Z")},217:{name:"Pfizer-BioNTech COVID-19 Vaccine (EUA labeled)  COMIRNATY (BLA labeled)",description:"COVID-19, mRNA, LNP-S, PF, 30 mcg/0.3 mL dose, tris-sucrose",cvx:217,manufacturer:"Pfizer",mvx:"PFR",mvxStatus:"Active",status:"Active",updated:new Date("2021-09-10T07:00:00.000Z")},218:{name:"Pfizer-BioNTech COVID-19 Vaccine (EUA labeled)  COMIRNATY (BLA labeled)",description:"COVID-19, mRNA, LNP-S, PF, 10 mcg/0.2 mL dose, tris-sucrose",cvx:218,manufacturer:"Pfizer",mvx:"PFR",mvxStatus:"Active",status:"Active",updated:new Date("2021-09-10T07:00:00.000Z")},219:{name:"Pfizer-BioNTech COVID-19 Vaccine (EUA labeled)  COMIRNATY (BLA labeled)",description:"COVID-19, mRNA, LNP-S, PF, 3 mcg/0.2 mL dose, tris-sucrose",cvx:219,manufacturer:"Pfizer",mvx:"PFR",mvxStatus:"Active",status:"Active",updated:new Date("2021-09-10T07:00:00.000Z")},221:{name:"Moderna COVID-19 Vaccine (non-US Spikevax)",description:"COVID-19, mRNA, LNP-S, PF, 50 mcg/0.5 mL dose",cvx:221,manufacturer:"Moderna US.",mvx:"MOD",mvxStatus:"Active",status:"Active",updated:new Date("2021-07-13T07:00:00.000Z")},225:{name:"Sanofi COVID-19 ",description:"COVID-19, D614, recomb, preS dTM, AS03 adjuvant add, PF, 5mcg/0.5mL",cvx:225,manufacturer:"Sanofi Pasteur",mvx:"PMC",mvxStatus:"Active",status:"Active",updated:new Date("2022-03-10T08:00:00.000Z")},226:{name:"Sanofi COVID-19 ",description:"COVID-19, D614, recomb, preS dTM, AS03 adjuvant add, PF, 10mcg/0.5mL",cvx:226,manufacturer:"Sanofi Pasteur",mvx:"PMC",mvxStatus:"Active",status:"Active",updated:new Date("2022-03-10T08:00:00.000Z")},502:{name:"COVAXIN (Bharat) COVID-19 Vaccine",description:"COVID-19 IV Non-US Vaccine (COVAXIN)",cvx:502,manufacturer:"Bharat Biotech International Limited",mvx:"BBI",mvxStatus:"Active",status:"Active",updated:new Date("2021-11-09T08:00:00.000Z")},510:{name:"Sinopharm (BIBP) COVID-19 Vaccine",description:"COVID-19 IV Non-US Vaccine (BIBP, Sinopharm)",cvx:510,manufacturer:"Sinopharm-Biotech",mvx:"SPH",mvxStatus:"Active",status:"Active",updated:new Date("2021-07-13T07:00:00.000Z")},511:{name:"Coronavac (Sinovac) COVID-19 Vaccine",description:"COVID-19 IV Non-US Vaccine (CoronaVac, Sinovac)",cvx:511,manufacturer:"Sinovac",mvx:"SNV",mvxStatus:"Active",status:"Active",updated:new Date("2021-07-13T07:00:00.000Z")}};var fl=function(e){const t=e.signature?.issuer?.name||e.signature?.issuer?.iss||"",r=!!e.signature?.verified,n=function(e){const{log:t}=e;t.label="JWS";const r=e.fhirbundle;if(!r)return void t.error("Fhir bundle not found in JWS.payload");const n=r.entry.find((e=>"Patient"===e.resource?.resourceType));if(void 0===n)return void t.error("Patient entry not found in JWS.payload.entry[]");const o=function(e){const t=e.resource,r=`${t.name?.[0]?.family}, ${t.name?.[0]?.given.join(" ")}`,n=new Date(t.birthDate??"");return{name:r,dob:n}}(n),a=r.entry.filter((e=>"Immunization"===e.resource?.resourceType));if(!a||0===a.length)return void t.error("Immunization entries not found in JWS.payload.entry[]");const i=a.map((e=>function(e){const t=e.resource;return{dose:0,date:new Date(t.occurrenceDateTime),manufacturer:ul[parseInt(t.vaccineCode.coding?.[0]?.code)]?.manufacturer??"unknown",performer:t.performer?.[0]?.actor?.display??"unknown"}}(e))).sort(((e,t)=>+e.date-+t.date));return i.forEach(((e,t)=>e.dose=t+1)),{patient:o,immunizations:i}}(e);if(!n)return;return{issuer:t,verified:r,patient:n.patient,immunizations:n.immunizations}};const dl=Gc;dl.header=qa.encode,dl.payload=js.encode,dl.signature=Js.encode,dl.compact=Gs.encode,dl.flat=Zs.encode;const hl={};hl.header=qa.decode,hl.payload=js.decode,hl.signature=Js.decode,hl.compact=Gs.decode,hl.flat=Zs.decode;const pl=$c;pl.header=qa.validate,pl.payload=js.validate,pl.signature=Js.validate,pl.compact=Gs.validate,pl.flat=Zs.validate;const gl={qr:Wc.decode,shc:ec.validate,jws:pl,fhir:zs.validate},ml={qr:Wc.decode,shc:ec.decode,jws:hl},yl={encode:{shc:ec.encode,jws:dl,fhir:zs.encode},decode:ml,validate:gl,signature:{verify:il.verify,sign:il.sign},card:fl};function vl(e){return JSON.parse(t(B).decode(e))}const wl={needPin:async function(e){return!!vl(e.shl.split(/^(?:.+:\/.+#)?shlink:\//)[1]).flags?.includes("P")},connect:async function(e){const r=vl(e.shl.split(/^(?:.+:\/.+#)?shlink:\//)[1]),n=await he("ES256",{extractable:!0}),o=await fetch(`${r.oauth.url}/.well-known/smart-configuration`),a=await o.json(),i=await fetch(`${a.registration_endpoint}`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${r.oauth.token}`},body:JSON.stringify({token_endpoint_auth_method:"private_key_jwt",grant_types:["client_credentials"],jwks:{keys:[await ee(n.publicKey)]},client_name:e.clientName,contacts:e.clientContact?[e.clientContact]:void 0})}),s=await i.json(),c={tokenEndpoint:a.token_endpoint,clientId:s.client_id,privateJwk:await ee(n.privateKey)};return{state:t(B).encode(JSON.stringify(c))}},pull:async function(e){const r=vl(e.state),n=await G(r.privateJwk,"ES256"),o=await new ue({}).setIssuer(r.clientId).setSubject(r.clientId).setAudience(r.tokenEndpoint).setExpirationTime("3 minutes").setProtectedHeader({alg:"ES256"}).setJti(function(e){const r=new Uint8Array(e);return crypto.getRandomValues(r),t(B).encode(r.buffer)}(32)).sign(n),a=await fetch(`${r.tokenEndpoint}`,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded","Shlink-Pin":"1234"},body:fe({scope:"__shlinks",grant_type:"client_credentials",client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",client_assertion:o})}),i=await a.json();return{shcs:(await Promise.all(i.authorization_details.flatMap((e=>e.locations)).map((e=>fetch(e,{headers:{authorization:`Bearer ${i.access_token}`}}).then((e=>e.text())))))).flatMap((e=>JSON.parse(e).verifiableCredential)).map((e=>{const r=t(B).toBuffer(e.split(".")[1]);var n;return{jws:e,decoded:(n=sn(r),JSON.parse((new TextDecoder).decode(n))),validated:!1}}))}},shcDecoder:cn};globalThis.shl=wl;
//# sourceMappingURL=index.a1e7b7df.js.map
