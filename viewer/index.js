var ia=Object.create;var Gr=Object.defineProperty;var aa=Object.getOwnPropertyDescriptor;var oa=Object.getOwnPropertyNames;var sa=Object.getPrototypeOf,ca=Object.prototype.hasOwnProperty;var la=(e,r)=>()=>(e&&(r=e(e=0)),r);var ce=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var fa=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of oa(r))!ca.call(e,i)&&i!==t&&Gr(e,i,{get:()=>r[i],enumerable:!(n=aa(r,i))||n.enumerable});return e};var Vr=(e,r,t)=>(t=e!=null?ia(sa(e)):{},fa(r||!e||!e.__esModule?Gr(t,"default",{value:e,enumerable:!0}):t,e));var qr=ce(kt=>{"use strict";f();kt.byteLength=ha;kt.toByteArray=pa;kt.fromByteArray=ya;var te=[],X=[],da=typeof Uint8Array<"u"?Uint8Array:Array,tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ce=0,Yr=tr.length;Ce<Yr;++Ce)te[Ce]=tr[Ce],X[tr.charCodeAt(Ce)]=Ce;var Ce,Yr;X["-".charCodeAt(0)]=62;X["_".charCodeAt(0)]=63;function Xr(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=r);var n=t===r?0:4-t%4;return[t,n]}function ha(e){var r=Xr(e),t=r[0],n=r[1];return(t+n)*3/4-n}function ua(e,r,t){return(r+t)*3/4-t}function pa(e){var r,t=Xr(e),n=t[0],i=t[1],a=new da(ua(e,n,i)),o=0,c=i>0?n-4:n,h;for(h=0;h<c;h+=4)r=X[e.charCodeAt(h)]<<18|X[e.charCodeAt(h+1)]<<12|X[e.charCodeAt(h+2)]<<6|X[e.charCodeAt(h+3)],a[o++]=r>>16&255,a[o++]=r>>8&255,a[o++]=r&255;return i===2&&(r=X[e.charCodeAt(h)]<<2|X[e.charCodeAt(h+1)]>>4,a[o++]=r&255),i===1&&(r=X[e.charCodeAt(h)]<<10|X[e.charCodeAt(h+1)]<<4|X[e.charCodeAt(h+2)]>>2,a[o++]=r>>8&255,a[o++]=r&255),a}function ma(e){return te[e>>18&63]+te[e>>12&63]+te[e>>6&63]+te[e&63]}function _a(e,r,t){for(var n,i=[],a=r;a<t;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(ma(n));return i.join("")}function ya(e){for(var r,t=e.length,n=t%3,i=[],a=16383,o=0,c=t-n;o<c;o+=a)i.push(_a(e,o,o+a>c?c:o+a));return n===1?(r=e[t-1],i.push(te[r>>2]+te[r<<4&63]+"==")):n===2&&(r=(e[t-2]<<8)+e[t-1],i.push(te[r>>10]+te[r>>4&63]+te[r<<2&63]+"=")),i.join("")}});var Qr=ce(rr=>{f();rr.read=function(e,r,t,n,i){var a,o,c=i*8-n-1,h=(1<<c)-1,s=h>>1,l=-7,m=t?i-1:0,_=t?-1:1,u=e[r+m];for(m+=_,a=u&(1<<-l)-1,u>>=-l,l+=c;l>0;a=a*256+e[r+m],m+=_,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=o*256+e[r+m],m+=_,l-=8);if(a===0)a=1-s;else{if(a===h)return o?NaN:(u?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-s}return(u?-1:1)*o*Math.pow(2,a-n)};rr.write=function(e,r,t,n,i,a){var o,c,h,s=a*8-i-1,l=(1<<s)-1,m=l>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=n?0:a-1,w=n?1:-1,K=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,o=l):(o=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+m>=1?r+=_/h:r+=_*Math.pow(2,1-m),r*h>=2&&(o++,h/=2),o+m>=l?(c=0,o=l):o+m>=1?(c=(r*h-1)*Math.pow(2,i),o=o+m):(c=r*Math.pow(2,m-1)*Math.pow(2,i),o=0));i>=8;e[t+u]=c&255,u+=w,c/=256,i-=8);for(o=o<<i|c,s+=i;s>0;e[t+u]=o&255,u+=w,o/=256,s-=8);e[t+u-w]|=K*128}});var _n=ce(We=>{"use strict";f();var nr=qr(),Be=Qr(),jr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;We.Buffer=d;We.SlowBuffer=Sa;We.INSPECT_MAX_BYTES=50;var Tt=2147483647;We.kMaxLength=Tt;d.TYPED_ARRAY_SUPPORT=wa();!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function wa(){try{let e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),e.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(!!d.isBuffer(this))return this.buffer}});Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(!!d.isBuffer(this))return this.byteOffset}});function le(e){if(e>Tt)throw new RangeError('The value "'+e+'" is invalid for option "size"');let r=new Uint8Array(e);return Object.setPrototypeOf(r,d.prototype),r}function d(e,r,t){if(typeof e=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return sr(e)}return nn(e,r,t)}d.poolSize=8192;function nn(e,r,t){if(typeof e=="string")return Ea(e,r);if(ArrayBuffer.isView(e))return xa(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(re(e,ArrayBuffer)||e&&re(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(e,SharedArrayBuffer)||e&&re(e.buffer,SharedArrayBuffer)))return ar(e,r,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return d.from(n,r,t);let i=ba(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return d.from(e[Symbol.toPrimitive]("string"),r,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}d.from=function(e,r,t){return nn(e,r,t)};Object.setPrototypeOf(d.prototype,Uint8Array.prototype);Object.setPrototypeOf(d,Uint8Array);function an(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function ga(e,r,t){return an(e),e<=0?le(e):r!==void 0?typeof t=="string"?le(e).fill(r,t):le(e).fill(r):le(e)}d.alloc=function(e,r,t){return ga(e,r,t)};function sr(e){return an(e),le(e<0?0:cr(e)|0)}d.allocUnsafe=function(e){return sr(e)};d.allocUnsafeSlow=function(e){return sr(e)};function Ea(e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);let t=on(e,r)|0,n=le(t),i=n.write(e,r);return i!==t&&(n=n.slice(0,i)),n}function ir(e){let r=e.length<0?0:cr(e.length)|0,t=le(r);for(let n=0;n<r;n+=1)t[n]=e[n]&255;return t}function xa(e){if(re(e,Uint8Array)){let r=new Uint8Array(e);return ar(r.buffer,r.byteOffset,r.byteLength)}return ir(e)}function ar(e,r,t){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return r===void 0&&t===void 0?n=new Uint8Array(e):t===void 0?n=new Uint8Array(e,r):n=new Uint8Array(e,r,t),Object.setPrototypeOf(n,d.prototype),n}function ba(e){if(d.isBuffer(e)){let r=cr(e.length)|0,t=le(r);return t.length===0||e.copy(t,0,0,r),t}if(e.length!==void 0)return typeof e.length!="number"||fr(e.length)?le(0):ir(e);if(e.type==="Buffer"&&Array.isArray(e.data))return ir(e.data)}function cr(e){if(e>=Tt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Tt.toString(16)+" bytes");return e|0}function Sa(e){return+e!=e&&(e=0),d.alloc(+e)}d.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==d.prototype};d.compare=function(r,t){if(re(r,Uint8Array)&&(r=d.from(r,r.offset,r.byteLength)),re(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(r)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===t)return 0;let n=r.length,i=t.length;for(let a=0,o=Math.min(n,i);a<o;++a)if(r[a]!==t[a]){n=r[a],i=t[a];break}return n<i?-1:i<n?1:0};d.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};d.concat=function(r,t){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return d.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<r.length;++n)t+=r[n].length;let i=d.allocUnsafe(t),a=0;for(n=0;n<r.length;++n){let o=r[n];if(re(o,Uint8Array))a+o.length>i.length?(d.isBuffer(o)||(o=d.from(o)),o.copy(i,a)):Uint8Array.prototype.set.call(i,o,a);else if(d.isBuffer(o))o.copy(i,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=o.length}return i};function on(e,r){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||re(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let t=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return or(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return mn(e).length;default:if(i)return n?-1:or(e).length;r=(""+r).toLowerCase(),i=!0}}d.byteLength=on;function Aa(e,r,t){let n=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,r>>>=0,t<=r))return"";for(e||(e="utf8");;)switch(e){case"hex":return Pa(this,r,t);case"utf8":case"utf-8":return cn(this,r,t);case"ascii":return Ka(this,r,t);case"latin1":case"binary":return Da(this,r,t);case"base64":return ka(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ua(this,r,t);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}d.prototype._isBuffer=!0;function Ie(e,r,t){let n=e[r];e[r]=e[t],e[t]=n}d.prototype.swap16=function(){let r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<r;t+=2)Ie(this,t,t+1);return this};d.prototype.swap32=function(){let r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<r;t+=4)Ie(this,t,t+3),Ie(this,t+1,t+2);return this};d.prototype.swap64=function(){let r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<r;t+=8)Ie(this,t,t+7),Ie(this,t+1,t+6),Ie(this,t+2,t+5),Ie(this,t+3,t+4);return this};d.prototype.toString=function(){let r=this.length;return r===0?"":arguments.length===0?cn(this,0,r):Aa.apply(this,arguments)};d.prototype.toLocaleString=d.prototype.toString;d.prototype.equals=function(r){if(!d.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:d.compare(this,r)===0};d.prototype.inspect=function(){let r="",t=We.INSPECT_MAX_BYTES;return r=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(r+=" ... "),"<Buffer "+r+">"};jr&&(d.prototype[jr]=d.prototype.inspect);d.prototype.compare=function(r,t,n,i,a){if(re(r,Uint8Array)&&(r=d.from(r,r.offset,r.byteLength)),!d.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(t===void 0&&(t=0),n===void 0&&(n=r?r.length:0),i===void 0&&(i=0),a===void 0&&(a=this.length),t<0||n>r.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&t>=n)return 0;if(i>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,a>>>=0,this===r)return 0;let o=a-i,c=n-t,h=Math.min(o,c),s=this.slice(i,a),l=r.slice(t,n);for(let m=0;m<h;++m)if(s[m]!==l[m]){o=s[m],c=l[m];break}return o<c?-1:c<o?1:0};function sn(e,r,t,n,i){if(e.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,fr(t)&&(t=i?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(i)return-1;t=e.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof r=="string"&&(r=d.from(r,n)),d.isBuffer(r))return r.length===0?-1:en(e,r,t,n,i);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):en(e,[r],t,n,i);throw new TypeError("val must be string, number or Buffer")}function en(e,r,t,n,i){let a=1,o=e.length,c=r.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||r.length<2)return-1;a=2,o/=2,c/=2,t/=2}function h(l,m){return a===1?l[m]:l.readUInt16BE(m*a)}let s;if(i){let l=-1;for(s=t;s<o;s++)if(h(e,s)===h(r,l===-1?0:s-l)){if(l===-1&&(l=s),s-l+1===c)return l*a}else l!==-1&&(s-=s-l),l=-1}else for(t+c>o&&(t=o-c),s=t;s>=0;s--){let l=!0;for(let m=0;m<c;m++)if(h(e,s+m)!==h(r,m)){l=!1;break}if(l)return s}return-1}d.prototype.includes=function(r,t,n){return this.indexOf(r,t,n)!==-1};d.prototype.indexOf=function(r,t,n){return sn(this,r,t,n,!0)};d.prototype.lastIndexOf=function(r,t,n){return sn(this,r,t,n,!1)};function va(e,r,t,n){t=Number(t)||0;let i=e.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let a=r.length;n>a/2&&(n=a/2);let o;for(o=0;o<n;++o){let c=parseInt(r.substr(o*2,2),16);if(fr(c))return o;e[t+o]=c}return o}function Ca(e,r,t,n){return Kt(or(r,e.length-t),e,t,n)}function Ia(e,r,t,n){return Kt(Ja(r),e,t,n)}function Ra(e,r,t,n){return Kt(mn(r),e,t,n)}function Ha(e,r,t,n){return Kt(Na(r,e.length-t),e,t,n)}d.prototype.write=function(r,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-t;if((n===void 0||n>a)&&(n=a),r.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return va(this,r,t,n);case"utf8":case"utf-8":return Ca(this,r,t,n);case"ascii":case"latin1":case"binary":return Ia(this,r,t,n);case"base64":return Ra(this,r,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ha(this,r,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ka(e,r,t){return r===0&&t===e.length?nr.fromByteArray(e):nr.fromByteArray(e.slice(r,t))}function cn(e,r,t){t=Math.min(e.length,t);let n=[],i=r;for(;i<t;){let a=e[i],o=null,c=a>239?4:a>223?3:a>191?2:1;if(i+c<=t){let h,s,l,m;switch(c){case 1:a<128&&(o=a);break;case 2:h=e[i+1],(h&192)===128&&(m=(a&31)<<6|h&63,m>127&&(o=m));break;case 3:h=e[i+1],s=e[i+2],(h&192)===128&&(s&192)===128&&(m=(a&15)<<12|(h&63)<<6|s&63,m>2047&&(m<55296||m>57343)&&(o=m));break;case 4:h=e[i+1],s=e[i+2],l=e[i+3],(h&192)===128&&(s&192)===128&&(l&192)===128&&(m=(a&15)<<18|(h&63)<<12|(s&63)<<6|l&63,m>65535&&m<1114112&&(o=m))}}o===null?(o=65533,c=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=c}return Ta(n)}var tn=4096;function Ta(e){let r=e.length;if(r<=tn)return String.fromCharCode.apply(String,e);let t="",n=0;for(;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=tn));return t}function Ka(e,r,t){let n="";t=Math.min(e.length,t);for(let i=r;i<t;++i)n+=String.fromCharCode(e[i]&127);return n}function Da(e,r,t){let n="";t=Math.min(e.length,t);for(let i=r;i<t;++i)n+=String.fromCharCode(e[i]);return n}function Pa(e,r,t){let n=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>n)&&(t=n);let i="";for(let a=r;a<t;++a)i+=Fa[e[a]];return i}function Ua(e,r,t){let n=e.slice(r,t),i="";for(let a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+n[a+1]*256);return i}d.prototype.slice=function(r,t){let n=this.length;r=~~r,t=t===void 0?n:~~t,r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<r&&(t=r);let i=this.subarray(r,t);return Object.setPrototypeOf(i,d.prototype),i};function W(e,r,t){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(r,t,n){r=r>>>0,t=t>>>0,n||W(r,t,this.length);let i=this[r],a=1,o=0;for(;++o<t&&(a*=256);)i+=this[r+o]*a;return i};d.prototype.readUintBE=d.prototype.readUIntBE=function(r,t,n){r=r>>>0,t=t>>>0,n||W(r,t,this.length);let i=this[r+--t],a=1;for(;t>0&&(a*=256);)i+=this[r+--t]*a;return i};d.prototype.readUint8=d.prototype.readUInt8=function(r,t){return r=r>>>0,t||W(r,1,this.length),this[r]};d.prototype.readUint16LE=d.prototype.readUInt16LE=function(r,t){return r=r>>>0,t||W(r,2,this.length),this[r]|this[r+1]<<8};d.prototype.readUint16BE=d.prototype.readUInt16BE=function(r,t){return r=r>>>0,t||W(r,2,this.length),this[r]<<8|this[r+1]};d.prototype.readUint32LE=d.prototype.readUInt32LE=function(r,t){return r=r>>>0,t||W(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216};d.prototype.readUint32BE=d.prototype.readUInt32BE=function(r,t){return r=r>>>0,t||W(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])};d.prototype.readBigUInt64LE=pe(function(r){r=r>>>0,Oe(r,"offset");let t=this[r],n=this[r+7];(t===void 0||n===void 0)&&Qe(r,this.length-8);let i=t+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,a=this[++r]+this[++r]*2**8+this[++r]*2**16+n*2**24;return BigInt(i)+(BigInt(a)<<BigInt(32))});d.prototype.readBigUInt64BE=pe(function(r){r=r>>>0,Oe(r,"offset");let t=this[r],n=this[r+7];(t===void 0||n===void 0)&&Qe(r,this.length-8);let i=t*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],a=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(a)});d.prototype.readIntLE=function(r,t,n){r=r>>>0,t=t>>>0,n||W(r,t,this.length);let i=this[r],a=1,o=0;for(;++o<t&&(a*=256);)i+=this[r+o]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*t)),i};d.prototype.readIntBE=function(r,t,n){r=r>>>0,t=t>>>0,n||W(r,t,this.length);let i=t,a=1,o=this[r+--i];for(;i>0&&(a*=256);)o+=this[r+--i]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o};d.prototype.readInt8=function(r,t){return r=r>>>0,t||W(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]};d.prototype.readInt16LE=function(r,t){r=r>>>0,t||W(r,2,this.length);let n=this[r]|this[r+1]<<8;return n&32768?n|4294901760:n};d.prototype.readInt16BE=function(r,t){r=r>>>0,t||W(r,2,this.length);let n=this[r+1]|this[r]<<8;return n&32768?n|4294901760:n};d.prototype.readInt32LE=function(r,t){return r=r>>>0,t||W(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24};d.prototype.readInt32BE=function(r,t){return r=r>>>0,t||W(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]};d.prototype.readBigInt64LE=pe(function(r){r=r>>>0,Oe(r,"offset");let t=this[r],n=this[r+7];(t===void 0||n===void 0)&&Qe(r,this.length-8);let i=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)});d.prototype.readBigInt64BE=pe(function(r){r=r>>>0,Oe(r,"offset");let t=this[r],n=this[r+7];(t===void 0||n===void 0)&&Qe(r,this.length-8);let i=(t<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(i)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+n)});d.prototype.readFloatLE=function(r,t){return r=r>>>0,t||W(r,4,this.length),Be.read(this,r,!0,23,4)};d.prototype.readFloatBE=function(r,t){return r=r>>>0,t||W(r,4,this.length),Be.read(this,r,!1,23,4)};d.prototype.readDoubleLE=function(r,t){return r=r>>>0,t||W(r,8,this.length),Be.read(this,r,!0,52,8)};d.prototype.readDoubleBE=function(r,t){return r=r>>>0,t||W(r,8,this.length),Be.read(this,r,!1,52,8)};function z(e,r,t,n,i,a){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<a)throw new RangeError('"value" argument is out of bounds');if(t+n>e.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(r,t,n,i){if(r=+r,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;z(this,r,t,n,c,0)}let a=1,o=0;for(this[t]=r&255;++o<n&&(a*=256);)this[t+o]=r/a&255;return t+n};d.prototype.writeUintBE=d.prototype.writeUIntBE=function(r,t,n,i){if(r=+r,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;z(this,r,t,n,c,0)}let a=n-1,o=1;for(this[t+a]=r&255;--a>=0&&(o*=256);)this[t+a]=r/o&255;return t+n};d.prototype.writeUint8=d.prototype.writeUInt8=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,1,255,0),this[t]=r&255,t+1};d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,2,65535,0),this[t]=r&255,this[t+1]=r>>>8,t+2};d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,2,65535,0),this[t]=r>>>8,this[t+1]=r&255,t+2};d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,4,4294967295,0),this[t+3]=r>>>24,this[t+2]=r>>>16,this[t+1]=r>>>8,this[t]=r&255,t+4};d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,4,4294967295,0),this[t]=r>>>24,this[t+1]=r>>>16,this[t+2]=r>>>8,this[t+3]=r&255,t+4};function ln(e,r,t,n,i){pn(r,n,i,e,t,7);let a=Number(r&BigInt(4294967295));e[t++]=a,a=a>>8,e[t++]=a,a=a>>8,e[t++]=a,a=a>>8,e[t++]=a;let o=Number(r>>BigInt(32)&BigInt(4294967295));return e[t++]=o,o=o>>8,e[t++]=o,o=o>>8,e[t++]=o,o=o>>8,e[t++]=o,t}function fn(e,r,t,n,i){pn(r,n,i,e,t,7);let a=Number(r&BigInt(4294967295));e[t+7]=a,a=a>>8,e[t+6]=a,a=a>>8,e[t+5]=a,a=a>>8,e[t+4]=a;let o=Number(r>>BigInt(32)&BigInt(4294967295));return e[t+3]=o,o=o>>8,e[t+2]=o,o=o>>8,e[t+1]=o,o=o>>8,e[t]=o,t+8}d.prototype.writeBigUInt64LE=pe(function(r,t=0){return ln(this,r,t,BigInt(0),BigInt("0xffffffffffffffff"))});d.prototype.writeBigUInt64BE=pe(function(r,t=0){return fn(this,r,t,BigInt(0),BigInt("0xffffffffffffffff"))});d.prototype.writeIntLE=function(r,t,n,i){if(r=+r,t=t>>>0,!i){let h=Math.pow(2,8*n-1);z(this,r,t,n,h-1,-h)}let a=0,o=1,c=0;for(this[t]=r&255;++a<n&&(o*=256);)r<0&&c===0&&this[t+a-1]!==0&&(c=1),this[t+a]=(r/o>>0)-c&255;return t+n};d.prototype.writeIntBE=function(r,t,n,i){if(r=+r,t=t>>>0,!i){let h=Math.pow(2,8*n-1);z(this,r,t,n,h-1,-h)}let a=n-1,o=1,c=0;for(this[t+a]=r&255;--a>=0&&(o*=256);)r<0&&c===0&&this[t+a+1]!==0&&(c=1),this[t+a]=(r/o>>0)-c&255;return t+n};d.prototype.writeInt8=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,1,127,-128),r<0&&(r=255+r+1),this[t]=r&255,t+1};d.prototype.writeInt16LE=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,2,32767,-32768),this[t]=r&255,this[t+1]=r>>>8,t+2};d.prototype.writeInt16BE=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,2,32767,-32768),this[t]=r>>>8,this[t+1]=r&255,t+2};d.prototype.writeInt32LE=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,4,2147483647,-2147483648),this[t]=r&255,this[t+1]=r>>>8,this[t+2]=r>>>16,this[t+3]=r>>>24,t+4};d.prototype.writeInt32BE=function(r,t,n){return r=+r,t=t>>>0,n||z(this,r,t,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[t]=r>>>24,this[t+1]=r>>>16,this[t+2]=r>>>8,this[t+3]=r&255,t+4};d.prototype.writeBigInt64LE=pe(function(r,t=0){return ln(this,r,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});d.prototype.writeBigInt64BE=pe(function(r,t=0){return fn(this,r,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function dn(e,r,t,n,i,a){if(t+n>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function hn(e,r,t,n,i){return r=+r,t=t>>>0,i||dn(e,r,t,4,34028234663852886e22,-34028234663852886e22),Be.write(e,r,t,n,23,4),t+4}d.prototype.writeFloatLE=function(r,t,n){return hn(this,r,t,!0,n)};d.prototype.writeFloatBE=function(r,t,n){return hn(this,r,t,!1,n)};function un(e,r,t,n,i){return r=+r,t=t>>>0,i||dn(e,r,t,8,17976931348623157e292,-17976931348623157e292),Be.write(e,r,t,n,52,8),t+8}d.prototype.writeDoubleLE=function(r,t,n){return un(this,r,t,!0,n)};d.prototype.writeDoubleBE=function(r,t,n){return un(this,r,t,!1,n)};d.prototype.copy=function(r,t,n,i){if(!d.isBuffer(r))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=r.length&&(t=r.length),t||(t=0),i>0&&i<n&&(i=n),i===n||r.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),r.length-t<i-n&&(i=r.length-t+n);let a=i-n;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(r,this.subarray(n,i),t),a};d.prototype.fill=function(r,t,n,i){if(typeof r=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!d.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(r.length===1){let o=r.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(r=o)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,r||(r=0);let a;if(typeof r=="number")for(a=t;a<n;++a)this[a]=r;else{let o=d.isBuffer(r)?r:d.from(r,i),c=o.length;if(c===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%c]}return this};var Ue={};function lr(e,r,t){Ue[e]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}lr("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);lr("ERR_INVALID_ARG_TYPE",function(e,r){return`The "${e}" argument must be of type number. Received type ${typeof r}`},TypeError);lr("ERR_OUT_OF_RANGE",function(e,r,t){let n=`The value of "${e}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=rn(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=rn(i)),i+="n"),n+=` It must be ${r}. Received ${i}`,n},RangeError);function rn(e){let r="",t=e.length,n=e[0]==="-"?1:0;for(;t>=n+4;t-=3)r=`_${e.slice(t-3,t)}${r}`;return`${e.slice(0,t)}${r}`}function Ba(e,r,t){Oe(r,"offset"),(e[r]===void 0||e[r+t]===void 0)&&Qe(r,e.length-(t+1))}function pn(e,r,t,n,i,a){if(e>t||e<r){let o=typeof r=="bigint"?"n":"",c;throw a>3?r===0||r===BigInt(0)?c=`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:c=`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:c=`>= ${r}${o} and <= ${t}${o}`,new Ue.ERR_OUT_OF_RANGE("value",c,e)}Ba(n,i,a)}function Oe(e,r){if(typeof e!="number")throw new Ue.ERR_INVALID_ARG_TYPE(r,"number",e)}function Qe(e,r,t){throw Math.floor(e)!==e?(Oe(e,t),new Ue.ERR_OUT_OF_RANGE(t||"offset","an integer",e)):r<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${r}`,e)}var Oa=/[^+/0-9A-Za-z-_]/g;function Wa(e){if(e=e.split("=")[0],e=e.trim().replace(Oa,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function or(e,r){r=r||1/0;let t,n=e.length,i=null,a=[];for(let o=0;o<n;++o){if(t=e.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(r-=3)>-1&&a.push(239,191,189);continue}else if(o+1===n){(r-=3)>-1&&a.push(239,191,189);continue}i=t;continue}if(t<56320){(r-=3)>-1&&a.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(r-=3)>-1&&a.push(239,191,189);if(i=null,t<128){if((r-=1)<0)break;a.push(t)}else if(t<2048){if((r-=2)<0)break;a.push(t>>6|192,t&63|128)}else if(t<65536){if((r-=3)<0)break;a.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((r-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return a}function Ja(e){let r=[];for(let t=0;t<e.length;++t)r.push(e.charCodeAt(t)&255);return r}function Na(e,r){let t,n,i,a=[];for(let o=0;o<e.length&&!((r-=2)<0);++o)t=e.charCodeAt(o),n=t>>8,i=t%256,a.push(i),a.push(n);return a}function mn(e){return nr.toByteArray(Wa(e))}function Kt(e,r,t,n){let i;for(i=0;i<n&&!(i+t>=r.length||i>=e.length);++i)r[i+t]=e[i];return i}function re(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function fr(e){return e!==e}var Fa=function(){let e="0123456789abcdef",r=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)r[n+i]=e[t]+e[i]}return r}();function pe(e){return typeof BigInt>"u"?Ma:e}function Ma(){throw new Error("BigInt not supported")}});var p,f=la(()=>{p=_n().Buffer});var yn=ce(dr=>{"use strict";f();Object.defineProperty(dr,"__esModule",{value:!0});function La(e){var r=4,t=e.length,n=t%r;if(!n)return e;var i=t,a=r-n,o=t+a,c=p.alloc(o);for(c.write(e);a--;)c.write("=",i++);return c.toString()}dr.default=La});var gn=ce(pr=>{"use strict";f();Object.defineProperty(pr,"__esModule",{value:!0});var za=yn();function wn(e,r){return r===void 0&&(r="utf8"),p.isBuffer(e)?hr(e.toString("base64")):hr(p.from(e,r).toString("base64"))}function $a(e,r){return r===void 0&&(r="utf8"),p.from(ur(e),"base64").toString(r)}function ur(e){return e=e.toString(),za.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function hr(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Za(e){return p.from(ur(e),"base64")}var Je=wn;Je.encode=wn;Je.decode=$a;Je.toBase64=ur;Je.fromBase64=hr;Je.toBuffer=Za;pr.default=Je});var En=ce((Tl,Dt)=>{f();Dt.exports=gn().default;Dt.exports.default=Dt.exports});var Pn=ce((Lm,Dn)=>{"use strict";f();function Oo(e,r){return Object.prototype.hasOwnProperty.call(e,r)}Dn.exports=function(e,r,t,n){r=r||"&",t=t||"=";var i={};if(typeof e!="string"||e.length===0)return i;var a=/\+/g;e=e.split(r);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var c=e.length;o>0&&c>o&&(c=o);for(var h=0;h<c;++h){var s=e[h].replace(a,"%20"),l=s.indexOf(t),m,_,u,w;l>=0?(m=s.substr(0,l),_=s.substr(l+1)):(m=s,_=""),u=decodeURIComponent(m),w=decodeURIComponent(_),Oo(i,u)?Array.isArray(i[u])?i[u].push(w):i[u]=[i[u],w]:i[u]=w}return i}});var Bn=ce((zm,Un)=>{"use strict";f();var ot=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};Un.exports=function(e,r,t,n){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(i){var a=encodeURIComponent(ot(i))+t;return Array.isArray(e[i])?e[i].map(function(o){return a+encodeURIComponent(ot(o))}).join(r):a+encodeURIComponent(ot(e[i]))}).filter(Boolean).join(r):n?encodeURIComponent(ot(n))+t+encodeURIComponent(ot(e)):""}});var On=ce(st=>{"use strict";f();st.decode=st.parse=Pn();st.encode=st.stringify=Bn()});f();var Ct=Vr(En(),1);f();f();f();f();f();f();f();var P=crypto;function V(e){try{return e!=null&&typeof e.extractable=="boolean"&&typeof e.algorithm.name=="string"&&typeof e.type=="string"}catch{return!1}}var M=new TextEncoder,$=new TextDecoder,Bl=2**32;function me(...e){let r=e.reduce((i,{length:a})=>i+a,0),t=new Uint8Array(r),n=0;return e.forEach(i=>{t.set(i,n),n+=i.length}),t}var mr=e=>{let r=e;typeof r=="string"&&(r=M.encode(r));let t=32768,n=[];for(let i=0;i<r.length;i+=t)n.push(String.fromCharCode.apply(null,r.subarray(i,i+t)));return btoa(n.join(""))},Z=e=>mr(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),xn=e=>new Uint8Array(atob(e).split("").map(r=>r.charCodeAt(0))),fe=e=>{let r=e;r instanceof Uint8Array&&(r=$.decode(r)),r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return xn(r)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};f();f();f();var Ne=class extends Error{constructor(r){var t;super(r),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}};var C=class extends Ne{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}};var Y=class extends Ne{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}},_e=class extends Ne{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};f();f();var Pt=P.getRandomValues.bind(P);f();f();f();f();function ne(){return typeof WebSocketPair=="function"}function j(){try{return process.versions.node!==void 0}catch{return!1}}function ie(e,r="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${r} must be ${e}`)}function je(e,r){return e.name===r}function _r(e){return parseInt(e.name.slice(4),10)}function Ya(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Xa(e,r){if(r.length&&!r.some(t=>e.usages.includes(t))){let t="CryptoKey does not support this operation, its usages must include ";if(r.length>2){let n=r.pop();t+=`one of ${r.join(", ")}, or ${n}.`}else r.length===2?t+=`one of ${r[0]} or ${r[1]}.`:t+=`${r[0]}.`;throw new TypeError(t)}}function Sn(e,r,...t){switch(r){case"HS256":case"HS384":case"HS512":{if(!je(e.algorithm,"HMAC"))throw ie("HMAC");let n=parseInt(r.slice(2),10);if(_r(e.algorithm.hash)!==n)throw ie(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!je(e.algorithm,"RSASSA-PKCS1-v1_5"))throw ie("RSASSA-PKCS1-v1_5");let n=parseInt(r.slice(2),10);if(_r(e.algorithm.hash)!==n)throw ie(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!je(e.algorithm,"RSA-PSS"))throw ie("RSA-PSS");let n=parseInt(r.slice(2),10);if(_r(e.algorithm.hash)!==n)throw ie(`SHA-${n}`,"algorithm.hash");break}case(j()&&"EdDSA"):{if(e.algorithm.name!=="NODE-ED25519"&&e.algorithm.name!=="NODE-ED448")throw ie("NODE-ED25519 or NODE-ED448");break}case(ne()&&"EdDSA"):{if(!je(e.algorithm,"NODE-ED25519"))throw ie("NODE-ED25519");break}case"ES256":case"ES384":case"ES512":{if(!je(e.algorithm,"ECDSA"))throw ie("ECDSA");let n=Ya(r);if(e.algorithm.namedCurve!==n)throw ie(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Xa(e,t)}f();var L=(e,...r)=>{let t="Key must be ";if(r.length>2){let n=r.pop();t+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?t+=`one of type ${r[0]} or ${r[1]}.`:t+=`of type ${r[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor&&e.constructor.name&&(t+=` Received an instance of ${e.constructor.name}`),t};f();var yr=e=>V(e),U=["CryptoKey"];f();f();var to=(...e)=>{let r=e.filter(Boolean);if(r.length===0||r.length===1)return!0;let t;for(let n of r){let i=Object.keys(n);if(!t||t.size===0){t=new Set(i);continue}for(let a of i){if(t.has(a))return!1;t.add(a)}}return!0},Fe=to;f();function ro(e){return typeof e=="object"&&e!==null}function F(e){if(!ro(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}f();f();f();f();f();f();f();f();f();var Ut=(e,r)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:t}=r.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};f();f();f();f();f();function so(e){let r,t;switch(e.kty){case"oct":{switch(e.alg){case"HS256":case"HS384":case"HS512":r={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},t=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new C(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":r={name:"AES-GCM"},t=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":r={name:"AES-KW"},t=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":r={name:"PBKDF2"},t=["deriveBits"];break;default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},t=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},t=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},t=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":r={name:"ECDSA",namedCurve:"P-256"},t=e.d?["sign"]:["verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},t=e.d?["sign"]:["verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},t=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:"ECDH",namedCurve:e.crv},t=e.d?["deriveBits"]:[];break;default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case((ne()||j())&&"OKP"):if(e.alg!=="EdDSA")throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(e.crv){case"Ed25519":r={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},t=e.d?["sign"]:["verify"];break;case(j()&&"Ed448"):r={name:"NODE-ED448",namedCurve:"NODE-ED448"},t=e.d?["sign"]:["verify"];break;default:throw new C('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value')}break;default:throw new C('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:r,keyUsages:t}}var co=async e=>{var r,t;let{algorithm:n,keyUsages:i}=so(e),a=[n,(r=e.ext)!==null&&r!==void 0?r:!1,(t=e.key_ops)!==null&&t!==void 0?t:i];if(n.name==="PBKDF2")return P.subtle.importKey("raw",fe(e.k),...a);let o={...e};return delete o.alg,P.subtle.importKey("jwk",o,...a)},wr=co;async function Me(e,r,t){if(!F(e))throw new TypeError("JWK must be an object");if(r||(r=e.alg),typeof r!="string"||!r)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return t??(t=e.ext!==!0),t?wr({...e,alg:r,ext:!1}):fe(e.k);case"RSA":if(e.oth!==void 0)throw new C('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return wr({...e,alg:r});default:throw new C('Unsupported "kty" (Key Type) Parameter value')}}f();var lo=e=>{if(!(e instanceof Uint8Array)){if(!yr(e))throw new TypeError(L(e,...U,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${U.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},fo=(e,r)=>{if(!yr(e))throw new TypeError(L(e,...U));if(e.type==="secret")throw new TypeError(`${U.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&e.type==="public")throw new TypeError(`${U.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&e.type==="public")throw new TypeError(`${U.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&r==="verify"&&e.type==="private")throw new TypeError(`${U.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&r==="encrypt"&&e.type==="private")throw new TypeError(`${U.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},ho=(e,r,t)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?lo(r):fo(r,t)},tt=ho;f();f();f();function go(e,r,t,n,i){if(i.crit!==void 0&&n.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(o=>typeof o!="string"||o.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;t!==void 0?a=new Map([...Object.entries(t),...r.entries()]):a=r;for(let o of n.crit){if(!a.has(o))throw new C(`Extension Header Parameter "${o}" is not recognized`);if(i[o]===void 0)throw new e(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&n[o]===void 0)throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}var Le=go;f();f();f();f();f();f();f();var bo=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:Z(e)};if(!V(e))throw new TypeError(L(e,...U,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:r,key_ops:t,alg:n,use:i,...a}=await P.subtle.exportKey("jwk",e);return a},In=bo;async function rt(e){return In(e)}var Ao=Symbol();f();f();f();f();function Bt(e,r){let t=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:r.namedCurve};case((ne()||j())&&"EdDSA"):let{namedCurve:n}=r;return{name:n,namedCurve:n};default:throw new C(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}f();function Ot(e,r,t){if(V(r))return Sn(r,e,t),r;if(r instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(L(r,...U));return P.subtle.importKey("raw",r,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[t])}throw new TypeError(L(r,...U,"Uint8Array"))}f();f();f();f();var nt=e=>Math.floor(e.getTime()/1e3);f();var Co=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,Wt=e=>{let r=Co.exec(e);if(!r)throw new TypeError("Invalid time period format");let t=parseFloat(r[1]);switch(r[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(t);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(t*60);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(t*3600);case"day":case"days":case"d":return Math.round(t*86400);case"week":case"weeks":case"w":return Math.round(t*604800);default:return Math.round(t*31557600)}};f();f();f();f();f();var ko=async(e,r,t)=>{let n=await Ot(e,r,"sign");Ut(e,n);let i=await P.subtle.sign(Bt(e,n.algorithm),n,t);return new Uint8Array(i)},Tn=ko;var ze=class{constructor(r){if(!(r instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=r}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}async sign(r,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Y("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Fe(this._protectedHeader,this._unprotectedHeader))throw new Y("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader},i=Le(Y,new Map([["b64",!0]]),t?.crit,this._protectedHeader,n),a=!0;if(i.has("b64")&&(a=this._protectedHeader.b64,typeof a!="boolean"))throw new Y('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:o}=n;if(typeof o!="string"||!o)throw new Y('JWS "alg" (Algorithm) Header Parameter missing or invalid');tt(o,r,"sign");let c=this._payload;a&&(c=M.encode(Z(c)));let h;this._protectedHeader?h=M.encode(Z(JSON.stringify(this._protectedHeader))):h=M.encode("");let s=me(h,M.encode("."),c),l=await Tn(o,r,s),m={signature:Z(l),payload:""};return a&&(m.payload=$.decode(c)),this._unprotectedHeader&&(m.header=this._unprotectedHeader),this._protectedHeader&&(m.protected=$.decode(h)),m}};var it=class{constructor(r){this._flattened=new ze(r)}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}async sign(r,t){let n=await this._flattened.sign(r,t);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}};f();f();f();var $e=class{constructor(r){if(!F(r))throw new TypeError("JWT Claims Set MUST be an object");this._payload=r}setIssuer(r){return this._payload={...this._payload,iss:r},this}setSubject(r){return this._payload={...this._payload,sub:r},this}setAudience(r){return this._payload={...this._payload,aud:r},this}setJti(r){return this._payload={...this._payload,jti:r},this}setNotBefore(r){return typeof r=="number"?this._payload={...this._payload,nbf:r}:this._payload={...this._payload,nbf:nt(new Date)+Wt(r)},this}setExpirationTime(r){return typeof r=="number"?this._payload={...this._payload,exp:r}:this._payload={...this._payload,exp:nt(new Date)+Wt(r)},this}setIssuedAt(r){return typeof r>"u"?this._payload={...this._payload,iat:nt(new Date)}:this._payload={...this._payload,iat:r},this}};var at=class extends $e{setProtectedHeader(r){return this._protectedHeader=r,this}async sign(r,t){var n;let i=new it(M.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new _e("JWTs MUST NOT use unencoded payload");return i.sign(r,t)}};f();f();f();f();f();f();f();f();f();f();f();f();function gr(e){var r;let t=(r=e?.modulusLength)!==null&&r!==void 0?r:2048;if(typeof t!="number"||t<2048)throw new C("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function Kn(e,r){var t,n;let i,a;switch(e){case"PS256":case"PS384":case"PS512":i={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:gr(r)},a=["sign","verify"];break;case"RS256":case"RS384":case"RS512":i={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:gr(r)},a=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":i={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:gr(r)},a=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":i={name:"ECDSA",namedCurve:"P-256"},a=["sign","verify"];break;case"ES384":i={name:"ECDSA",namedCurve:"P-384"},a=["sign","verify"];break;case"ES512":i={name:"ECDSA",namedCurve:"P-521"},a=["sign","verify"];break;case((ne()||j())&&"EdDSA"):switch(r?.crv){case void 0:case"Ed25519":i={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},a=["sign","verify"];break;case(j()&&"Ed448"):i={name:"NODE-ED448",namedCurve:"NODE-ED448"},a=["sign","verify"];break;default:throw new C("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":i={name:"ECDH",namedCurve:(t=r?.crv)!==null&&t!==void 0?t:"P-256"},a=["deriveKey","deriveBits"];break;default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return P.subtle.generateKey(i,(n=r?.extractable)!==null&&n!==void 0?n:!1,a)}async function Er(e,r){return Kn(e,r)}f();var na=Vr(On(),1);f();function Ye(e){let r=e.length;for(;--r>=0;)e[r]=0}var Wo=0,bi=1,Jo=2,No=3,Fo=258,Jr=29,bt=256,pt=bt+1+Jr,Ve=30,Nr=19,Si=2*pt+1,Re=15,xr=16,Mo=7,Fr=256,Ai=16,vi=17,Ci=18,Ur=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),zt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Lo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ii=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zo=512,he=new Array((pt+2)*2);Ye(he);var dt=new Array(Ve*2);Ye(dt);var mt=new Array(zo);Ye(mt);var _t=new Array(Fo-No+1);Ye(_t);var Mr=new Array(Jr);Ye(Mr);var Vt=new Array(Ve);Ye(Vt);function br(e,r,t,n,i){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var Ri,Hi,ki;function Sr(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}var Ti=e=>e<256?mt[e]:mt[256+(e>>>7)],yt=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},G=(e,r,t)=>{e.bi_valid>xr-t?(e.bi_buf|=r<<e.bi_valid&65535,yt(e,e.bi_buf),e.bi_buf=r>>xr-e.bi_valid,e.bi_valid+=t-xr):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},oe=(e,r,t)=>{G(e,t[r*2],t[r*2+1])},Ki=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},$o=e=>{e.bi_valid===16?(yt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Zo=(e,r)=>{let t=r.dyn_tree,n=r.max_code,i=r.stat_desc.static_tree,a=r.stat_desc.has_stree,o=r.stat_desc.extra_bits,c=r.stat_desc.extra_base,h=r.stat_desc.max_length,s,l,m,_,u,w,K=0;for(_=0;_<=Re;_++)e.bl_count[_]=0;for(t[e.heap[e.heap_max]*2+1]=0,s=e.heap_max+1;s<Si;s++)l=e.heap[s],_=t[t[l*2+1]*2+1]+1,_>h&&(_=h,K++),t[l*2+1]=_,!(l>n)&&(e.bl_count[_]++,u=0,l>=c&&(u=o[l-c]),w=t[l*2],e.opt_len+=w*(_+u),a&&(e.static_len+=w*(i[l*2+1]+u)));if(K!==0){do{for(_=h-1;e.bl_count[_]===0;)_--;e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[h]--,K-=2}while(K>0);for(_=h;_!==0;_--)for(l=e.bl_count[_];l!==0;)m=e.heap[--s],!(m>n)&&(t[m*2+1]!==_&&(e.opt_len+=(_-t[m*2+1])*t[m*2],t[m*2+1]=_),l--)}},Di=(e,r,t)=>{let n=new Array(Re+1),i=0,a,o;for(a=1;a<=Re;a++)n[a]=i=i+t[a-1]<<1;for(o=0;o<=r;o++){let c=e[o*2+1];c!==0&&(e[o*2]=Ki(n[c]++,c))}},Go=()=>{let e,r,t,n,i,a=new Array(Re+1);for(t=0,n=0;n<Jr-1;n++)for(Mr[n]=t,e=0;e<1<<Ur[n];e++)_t[t++]=n;for(_t[t-1]=n,i=0,n=0;n<16;n++)for(Vt[n]=i,e=0;e<1<<zt[n];e++)mt[i++]=n;for(i>>=7;n<Ve;n++)for(Vt[n]=i<<7,e=0;e<1<<zt[n]-7;e++)mt[256+i++]=n;for(r=0;r<=Re;r++)a[r]=0;for(e=0;e<=143;)he[e*2+1]=8,e++,a[8]++;for(;e<=255;)he[e*2+1]=9,e++,a[9]++;for(;e<=279;)he[e*2+1]=7,e++,a[7]++;for(;e<=287;)he[e*2+1]=8,e++,a[8]++;for(Di(he,pt+1,a),e=0;e<Ve;e++)dt[e*2+1]=5,dt[e*2]=Ki(e,5);Ri=new br(he,Ur,bt+1,pt,Re),Hi=new br(dt,zt,0,Ve,Re),ki=new br(new Array(0),Lo,0,Nr,Mo)},Pi=e=>{let r;for(r=0;r<pt;r++)e.dyn_ltree[r*2]=0;for(r=0;r<Ve;r++)e.dyn_dtree[r*2]=0;for(r=0;r<Nr;r++)e.bl_tree[r*2]=0;e.dyn_ltree[Fr*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},Ui=e=>{e.bi_valid>8?yt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Vo=(e,r,t,n)=>{Ui(e),n&&(yt(e,t),yt(e,~t)),e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},Wn=(e,r,t,n)=>{let i=r*2,a=t*2;return e[i]<e[a]||e[i]===e[a]&&n[r]<=n[t]},Ar=(e,r,t)=>{let n=e.heap[t],i=t<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Wn(r,e.heap[i+1],e.heap[i],e.depth)&&i++,!Wn(r,n,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=n},Jn=(e,r,t)=>{let n,i,a=0,o,c;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],i=e.pending_buf[e.l_buf+a],a++,n===0?oe(e,i,r):(o=_t[i],oe(e,o+bt+1,r),c=Ur[o],c!==0&&(i-=Mr[o],G(e,i,c)),n--,o=Ti(n),oe(e,o,t),c=zt[o],c!==0&&(n-=Vt[o],G(e,n,c)));while(a<e.last_lit);oe(e,Fr,r)},Br=(e,r)=>{let t=r.dyn_tree,n=r.stat_desc.static_tree,i=r.stat_desc.has_stree,a=r.stat_desc.elems,o,c,h=-1,s;for(e.heap_len=0,e.heap_max=Si,o=0;o<a;o++)t[o*2]!==0?(e.heap[++e.heap_len]=h=o,e.depth[o]=0):t[o*2+1]=0;for(;e.heap_len<2;)s=e.heap[++e.heap_len]=h<2?++h:0,t[s*2]=1,e.depth[s]=0,e.opt_len--,i&&(e.static_len-=n[s*2+1]);for(r.max_code=h,o=e.heap_len>>1;o>=1;o--)Ar(e,t,o);s=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ar(e,t,1),c=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=c,t[s*2]=t[o*2]+t[c*2],e.depth[s]=(e.depth[o]>=e.depth[c]?e.depth[o]:e.depth[c])+1,t[o*2+1]=t[c*2+1]=s,e.heap[1]=s++,Ar(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Zo(e,r),Di(t,h,e.bl_count)},Nn=(e,r,t)=>{let n,i=-1,a,o=r[0*2+1],c=0,h=7,s=4;for(o===0&&(h=138,s=3),r[(t+1)*2+1]=65535,n=0;n<=t;n++)a=o,o=r[(n+1)*2+1],!(++c<h&&a===o)&&(c<s?e.bl_tree[a*2]+=c:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[Ai*2]++):c<=10?e.bl_tree[vi*2]++:e.bl_tree[Ci*2]++,c=0,i=a,o===0?(h=138,s=3):a===o?(h=6,s=3):(h=7,s=4))},Fn=(e,r,t)=>{let n,i=-1,a,o=r[0*2+1],c=0,h=7,s=4;for(o===0&&(h=138,s=3),n=0;n<=t;n++)if(a=o,o=r[(n+1)*2+1],!(++c<h&&a===o)){if(c<s)do oe(e,a,e.bl_tree);while(--c!==0);else a!==0?(a!==i&&(oe(e,a,e.bl_tree),c--),oe(e,Ai,e.bl_tree),G(e,c-3,2)):c<=10?(oe(e,vi,e.bl_tree),G(e,c-3,3)):(oe(e,Ci,e.bl_tree),G(e,c-11,7));c=0,i=a,o===0?(h=138,s=3):a===o?(h=6,s=3):(h=7,s=4)}},Yo=e=>{let r;for(Nn(e,e.dyn_ltree,e.l_desc.max_code),Nn(e,e.dyn_dtree,e.d_desc.max_code),Br(e,e.bl_desc),r=Nr-1;r>=3&&e.bl_tree[Ii[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},Xo=(e,r,t,n)=>{let i;for(G(e,r-257,5),G(e,t-1,5),G(e,n-4,4),i=0;i<n;i++)G(e,e.bl_tree[Ii[i]*2+1],3);Fn(e,e.dyn_ltree,r-1),Fn(e,e.dyn_dtree,t-1)},qo=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(t=32;t<bt;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},Mn=!1,Qo=e=>{Mn||(Go(),Mn=!0),e.l_desc=new Sr(e.dyn_ltree,Ri),e.d_desc=new Sr(e.dyn_dtree,Hi),e.bl_desc=new Sr(e.bl_tree,ki),e.bi_buf=0,e.bi_valid=0,Pi(e)},Bi=(e,r,t,n)=>{G(e,(Wo<<1)+(n?1:0),3),Vo(e,r,t,!0)},jo=e=>{G(e,bi<<1,3),oe(e,Fr,he),$o(e)},es=(e,r,t,n)=>{let i,a,o=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=qo(e)),Br(e,e.l_desc),Br(e,e.d_desc),o=Yo(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=t+5,t+4<=i&&r!==-1?Bi(e,r,t,n):e.strategy===4||a===i?(G(e,(bi<<1)+(n?1:0),3),Jn(e,he,dt)):(G(e,(Jo<<1)+(n?1:0),3),Xo(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Jn(e,e.dyn_ltree,e.dyn_dtree)),Pi(e),n&&Ui(e)},ts=(e,r,t)=>(e.pending_buf[e.d_buf+e.last_lit*2]=r>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=r&255,e.pending_buf[e.l_buf+e.last_lit]=t&255,e.last_lit++,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(_t[t]+bt+1)*2]++,e.dyn_dtree[Ti(r)*2]++),e.last_lit===e.lit_bufsize-1),rs=Qo,ns=Bi,is=es,as=ts,os=jo,ss={_tr_init:rs,_tr_stored_block:ns,_tr_flush_block:is,_tr_tally:as,_tr_align:os},cs=(e,r,t,n)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+r[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0},wt=cs,ls=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},fs=new Uint32Array(ls()),ds=(e,r,t,n)=>{let i=fs,a=n+t;e^=-1;for(let o=n;o<a;o++)e=e>>>8^i[(e^r[o])&255];return e^-1},J=ds,ke={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Xe={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:hs,_tr_stored_block:us,_tr_flush_block:ps,_tr_tally:be,_tr_align:ms}=ss,{Z_NO_FLUSH:Pe,Z_PARTIAL_FLUSH:_s,Z_FULL_FLUSH:ys,Z_FINISH:Se,Z_BLOCK:Ln,Z_OK:se,Z_STREAM_END:zn,Z_STREAM_ERROR:q,Z_DATA_ERROR:ws,Z_BUF_ERROR:vr,Z_DEFAULT_COMPRESSION:gs,Z_FILTERED:Es,Z_HUFFMAN_ONLY:Jt,Z_RLE:xs,Z_FIXED:bs,Z_DEFAULT_STRATEGY:Ss,Z_UNKNOWN:As,Z_DEFLATED:qt}=Xe,vs=9,Cs=15,Is=8,Rs=29,Hs=256,Or=Hs+1+Rs,ks=30,Ts=19,Ks=2*Or+1,Ds=15,A=3,Ee=258,ee=Ee+A+1,Ps=32,Qt=42,Wr=69,$t=73,Zt=91,Gt=103,He=113,lt=666,B=1,St=2,Te=3,qe=4,Us=3,xe=(e,r)=>(e.msg=ke[r],r),$n=e=>(e<<1)-(e>4?9:0),ge=e=>{let r=e.length;for(;--r>=0;)e[r]=0},Bs=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask,Ae=Bs,we=e=>{let r=e.state,t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},N=(e,r)=>{ps(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,we(e.strm)},I=(e,r)=>{e.pending_buf[e.pending++]=r},ct=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},Os=(e,r,t,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,r.set(e.input.subarray(e.next_in,e.next_in+i),t),e.state.wrap===1?e.adler=wt(e.adler,r,i,t):e.state.wrap===2&&(e.adler=J(e.adler,r,i,t)),e.next_in+=i,e.total_in+=i,i)},Oi=(e,r)=>{let t=e.max_chain_length,n=e.strstart,i,a,o=e.prev_length,c=e.nice_match,h=e.strstart>e.w_size-ee?e.strstart-(e.w_size-ee):0,s=e.window,l=e.w_mask,m=e.prev,_=e.strstart+Ee,u=s[n+o-1],w=s[n+o];e.prev_length>=e.good_match&&(t>>=2),c>e.lookahead&&(c=e.lookahead);do if(i=r,!(s[i+o]!==w||s[i+o-1]!==u||s[i]!==s[n]||s[++i]!==s[n+1])){n+=2,i++;do;while(s[++n]===s[++i]&&s[++n]===s[++i]&&s[++n]===s[++i]&&s[++n]===s[++i]&&s[++n]===s[++i]&&s[++n]===s[++i]&&s[++n]===s[++i]&&s[++n]===s[++i]&&n<_);if(a=Ee-(_-n),n=_-Ee,a>o){if(e.match_start=r,o=a,a>=c)break;u=s[n+o-1],w=s[n+o]}}while((r=m[r&l])>h&&--t!==0);return o<=e.lookahead?o:e.lookahead},Ke=e=>{let r=e.w_size,t,n,i,a,o;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-ee)){e.window.set(e.window.subarray(r,r+r),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,n=e.hash_size,t=n;do i=e.head[--t],e.head[t]=i>=r?i-r:0;while(--n);n=r,t=n;do i=e.prev[--t],e.prev[t]=i>=r?i-r:0;while(--n);a+=r}if(e.strm.avail_in===0)break;if(n=Os(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=A)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Ae(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Ae(e,e.ins_h,e.window[o+A-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<A)););}while(e.lookahead<ee&&e.strm.avail_in!==0)},Ws=(e,r)=>{let t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ke(e),e.lookahead===0&&r===Pe)return B;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;let n=e.block_start+t;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,N(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-ee&&(N(e,!1),e.strm.avail_out===0))return B}return e.insert=0,r===Se?(N(e,!0),e.strm.avail_out===0?Te:qe):(e.strstart>e.block_start&&(N(e,!1),e.strm.avail_out===0),B)},Cr=(e,r)=>{let t,n;for(;;){if(e.lookahead<ee){if(Ke(e),e.lookahead<ee&&r===Pe)return B;if(e.lookahead===0)break}if(t=0,e.lookahead>=A&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+A-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-ee&&(e.match_length=Oi(e,t)),e.match_length>=A)if(n=be(e,e.strstart-e.match_start,e.match_length-A),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=A){e.match_length--;do e.strstart++,e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+A-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+1]);else n=be(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(N(e,!1),e.strm.avail_out===0))return B}return e.insert=e.strstart<A-1?e.strstart:A-1,r===Se?(N(e,!0),e.strm.avail_out===0?Te:qe):e.last_lit&&(N(e,!1),e.strm.avail_out===0)?B:St},Ze=(e,r)=>{let t,n,i;for(;;){if(e.lookahead<ee){if(Ke(e),e.lookahead<ee&&r===Pe)return B;if(e.lookahead===0)break}if(t=0,e.lookahead>=A&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+A-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=A-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-ee&&(e.match_length=Oi(e,t),e.match_length<=5&&(e.strategy===Es||e.match_length===A&&e.strstart-e.match_start>4096)&&(e.match_length=A-1)),e.prev_length>=A&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-A,n=be(e,e.strstart-1-e.prev_match,e.prev_length-A),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+A-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=A-1,e.strstart++,n&&(N(e,!1),e.strm.avail_out===0))return B}else if(e.match_available){if(n=be(e,0,e.window[e.strstart-1]),n&&N(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return B}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=be(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<A-1?e.strstart:A-1,r===Se?(N(e,!0),e.strm.avail_out===0?Te:qe):e.last_lit&&(N(e,!1),e.strm.avail_out===0)?B:St},Js=(e,r)=>{let t,n,i,a,o=e.window;for(;;){if(e.lookahead<=Ee){if(Ke(e),e.lookahead<=Ee&&r===Pe)return B;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=A&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){a=e.strstart+Ee;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);e.match_length=Ee-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=A?(t=be(e,1,e.match_length-A),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=be(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(N(e,!1),e.strm.avail_out===0))return B}return e.insert=0,r===Se?(N(e,!0),e.strm.avail_out===0?Te:qe):e.last_lit&&(N(e,!1),e.strm.avail_out===0)?B:St},Ns=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(Ke(e),e.lookahead===0)){if(r===Pe)return B;break}if(e.match_length=0,t=be(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(N(e,!1),e.strm.avail_out===0))return B}return e.insert=0,r===Se?(N(e,!0),e.strm.avail_out===0?Te:qe):e.last_lit&&(N(e,!1),e.strm.avail_out===0)?B:St};function ae(e,r,t,n,i){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=n,this.func=i}var ft=[new ae(0,0,0,0,Ws),new ae(4,4,8,4,Cr),new ae(4,5,16,8,Cr),new ae(4,6,32,32,Cr),new ae(4,4,16,16,Ze),new ae(8,16,32,32,Ze),new ae(8,16,128,128,Ze),new ae(8,32,128,256,Ze),new ae(32,128,258,1024,Ze),new ae(32,258,258,4096,Ze)],Fs=e=>{e.window_size=2*e.w_size,ge(e.head),e.max_lazy_match=ft[e.level].max_lazy,e.good_match=ft[e.level].good_length,e.nice_match=ft[e.level].nice_length,e.max_chain_length=ft[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=A-1,e.match_available=0,e.ins_h=0};function Ms(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=qt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ks*2),this.dyn_dtree=new Uint16Array((2*ks+1)*2),this.bl_tree=new Uint16Array((2*Ts+1)*2),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ds+1),this.heap=new Uint16Array(2*Or+1),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Or+1),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Wi=e=>{if(!e||!e.state)return xe(e,q);e.total_in=e.total_out=0,e.data_type=As;let r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap?Qt:He,e.adler=r.wrap===2?0:1,r.last_flush=Pe,hs(r),se},Ji=e=>{let r=Wi(e);return r===se&&Fs(e.state),r},Ls=(e,r)=>!e||!e.state||e.state.wrap!==2?q:(e.state.gzhead=r,se),Ni=(e,r,t,n,i,a)=>{if(!e)return q;let o=1;if(r===gs&&(r=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>vs||t!==qt||n<8||n>15||r<0||r>9||a<0||a>bs)return xe(e,q);n===8&&(n=9);let c=new Ms;return e.state=c,c.strm=e,c.wrap=o,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=i+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+A-1)/A),c.window=new Uint8Array(c.w_size*2),c.head=new Uint16Array(c.hash_size),c.prev=new Uint16Array(c.w_size),c.lit_bufsize=1<<i+6,c.pending_buf_size=c.lit_bufsize*4,c.pending_buf=new Uint8Array(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=(1+2)*c.lit_bufsize,c.level=r,c.strategy=a,c.method=t,Ji(e)},zs=(e,r)=>Ni(e,r,qt,Cs,Is,Ss),$s=(e,r)=>{let t,n;if(!e||!e.state||r>Ln||r<0)return e?xe(e,q):q;let i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===lt&&r!==Se)return xe(e,e.avail_out===0?vr:q);i.strm=e;let a=i.last_flush;if(i.last_flush=r,i.status===Qt)if(i.wrap===2)e.adler=0,I(i,31),I(i,139),I(i,8),i.gzhead?(I(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),I(i,i.gzhead.time&255),I(i,i.gzhead.time>>8&255),I(i,i.gzhead.time>>16&255),I(i,i.gzhead.time>>24&255),I(i,i.level===9?2:i.strategy>=Jt||i.level<2?4:0),I(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(I(i,i.gzhead.extra.length&255),I(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=J(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=Wr):(I(i,0),I(i,0),I(i,0),I(i,0),I(i,0),I(i,i.level===9?2:i.strategy>=Jt||i.level<2?4:0),I(i,Us),i.status=He);else{let o=qt+(i.w_bits-8<<4)<<8,c=-1;i.strategy>=Jt||i.level<2?c=0:i.level<6?c=1:i.level===6?c=2:c=3,o|=c<<6,i.strstart!==0&&(o|=Ps),o+=31-o%31,i.status=He,ct(i,o),i.strstart!==0&&(ct(i,e.adler>>>16),ct(i,e.adler&65535)),e.adler=1}if(i.status===Wr)if(i.gzhead.extra){for(t=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>t&&(e.adler=J(e.adler,i.pending_buf,i.pending-t,t)),we(e),t=i.pending,i.pending===i.pending_buf_size));)I(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>t&&(e.adler=J(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=$t)}else i.status=$t;if(i.status===$t)if(i.gzhead.name){t=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>t&&(e.adler=J(e.adler,i.pending_buf,i.pending-t,t)),we(e),t=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.name.length?n=i.gzhead.name.charCodeAt(i.gzindex++)&255:n=0,I(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>t&&(e.adler=J(e.adler,i.pending_buf,i.pending-t,t)),n===0&&(i.gzindex=0,i.status=Zt)}else i.status=Zt;if(i.status===Zt)if(i.gzhead.comment){t=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>t&&(e.adler=J(e.adler,i.pending_buf,i.pending-t,t)),we(e),t=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.comment.length?n=i.gzhead.comment.charCodeAt(i.gzindex++)&255:n=0,I(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>t&&(e.adler=J(e.adler,i.pending_buf,i.pending-t,t)),n===0&&(i.status=Gt)}else i.status=Gt;if(i.status===Gt&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&we(e),i.pending+2<=i.pending_buf_size&&(I(i,e.adler&255),I(i,e.adler>>8&255),e.adler=0,i.status=He)):i.status=He),i.pending!==0){if(we(e),e.avail_out===0)return i.last_flush=-1,se}else if(e.avail_in===0&&$n(r)<=$n(a)&&r!==Se)return xe(e,vr);if(i.status===lt&&e.avail_in!==0)return xe(e,vr);if(e.avail_in!==0||i.lookahead!==0||r!==Pe&&i.status!==lt){let o=i.strategy===Jt?Ns(i,r):i.strategy===xs?Js(i,r):ft[i.level].func(i,r);if((o===Te||o===qe)&&(i.status=lt),o===B||o===Te)return e.avail_out===0&&(i.last_flush=-1),se;if(o===St&&(r===_s?ms(i):r!==Ln&&(us(i,0,0,!1),r===ys&&(ge(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),we(e),e.avail_out===0))return i.last_flush=-1,se}return r!==Se?se:i.wrap<=0?zn:(i.wrap===2?(I(i,e.adler&255),I(i,e.adler>>8&255),I(i,e.adler>>16&255),I(i,e.adler>>24&255),I(i,e.total_in&255),I(i,e.total_in>>8&255),I(i,e.total_in>>16&255),I(i,e.total_in>>24&255)):(ct(i,e.adler>>>16),ct(i,e.adler&65535)),we(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?se:zn)},Zs=e=>{if(!e||!e.state)return q;let r=e.state.status;return r!==Qt&&r!==Wr&&r!==$t&&r!==Zt&&r!==Gt&&r!==He&&r!==lt?xe(e,q):(e.state=null,r===He?xe(e,ws):se)},Gs=(e,r)=>{let t=r.length;if(!e||!e.state)return q;let n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==Qt||n.lookahead)return q;if(i===1&&(e.adler=wt(e.adler,r,t,0)),n.wrap=0,t>=n.w_size){i===0&&(ge(n.head),n.strstart=0,n.block_start=0,n.insert=0);let h=new Uint8Array(n.w_size);h.set(r.subarray(t-n.w_size,t),0),r=h,t=n.w_size}let a=e.avail_in,o=e.next_in,c=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,Ke(n);n.lookahead>=A;){let h=n.strstart,s=n.lookahead-(A-1);do n.ins_h=Ae(n,n.ins_h,n.window[h+A-1]),n.prev[h&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=h,h++;while(--s);n.strstart=h,n.lookahead=A-1,Ke(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=A-1,n.match_available=0,e.next_in=o,e.input=c,e.avail_in=a,n.wrap=i,se},Vs=zs,Ys=Ni,Xs=Ji,qs=Wi,Qs=Ls,js=$s,ec=Zs,tc=Gs,rc="pako deflate (from Nodeca project)",ht={deflateInit:Vs,deflateInit2:Ys,deflateReset:Xs,deflateResetKeep:qs,deflateSetHeader:Qs,deflate:js,deflateEnd:ec,deflateSetDictionary:tc,deflateInfo:rc},nc=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),ic=function(e){let r=Array.prototype.slice.call(arguments,1);for(;r.length;){let t=r.shift();if(!!t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)nc(t,n)&&(e[n]=t[n])}}return e},ac=e=>{let r=0;for(let n=0,i=e.length;n<i;n++)r+=e[n].length;let t=new Uint8Array(r);for(let n=0,i=0,a=e.length;n<a;n++){let o=e[n];t.set(o,i),i+=o.length}return t},jt={assign:ic,flattenChunks:ac},Fi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Fi=!1}var gt=new Uint8Array(256);for(let e=0;e<256;e++)gt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;gt[254]=gt[254]=1;var oc=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,n,i,a,o=e.length,c=0;for(i=0;i<o;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(c),a=0,i=0;a<c;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?r[a++]=t:t<2048?(r[a++]=192|t>>>6,r[a++]=128|t&63):t<65536?(r[a++]=224|t>>>12,r[a++]=128|t>>>6&63,r[a++]=128|t&63):(r[a++]=240|t>>>18,r[a++]=128|t>>>12&63,r[a++]=128|t>>>6&63,r[a++]=128|t&63);return r},sc=(e,r)=>{if(r<65534&&e.subarray&&Fi)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t},cc=(e,r)=>{let t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let n,i,a=new Array(t*2);for(i=0,n=0;n<t;){let o=e[n++];if(o<128){a[i++]=o;continue}let c=gt[o];if(c>4){a[i++]=65533,n+=c-1;continue}for(o&=c===2?31:c===3?15:7;c>1&&n<t;)o=o<<6|e[n++]&63,c--;if(c>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return sc(a,i)},lc=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+gt[e[t]]>r?t:r},Et={string2buf:oc,buf2string:cc,utf8border:lc};function fc(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Mi=fc,Li=Object.prototype.toString,{Z_NO_FLUSH:dc,Z_SYNC_FLUSH:hc,Z_FULL_FLUSH:uc,Z_FINISH:pc,Z_OK:Yt,Z_STREAM_END:mc,Z_DEFAULT_COMPRESSION:_c,Z_DEFAULT_STRATEGY:yc,Z_DEFLATED:wc}=Xe;function At(e){this.options=jt.assign({level:_c,method:wc,chunkSize:16384,windowBits:15,memLevel:8,strategy:yc},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Mi,this.strm.avail_out=0;let t=ht.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==Yt)throw new Error(ke[t]);if(r.header&&ht.deflateSetHeader(this.strm,r.header),r.dictionary){let n;if(typeof r.dictionary=="string"?n=Et.string2buf(r.dictionary):Li.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,t=ht.deflateSetDictionary(this.strm,n),t!==Yt)throw new Error(ke[t]);this._dict_set=!0}}At.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,i,a;if(this.ended)return!1;for(r===~~r?a=r:a=r===!0?pc:dc,typeof e=="string"?t.input=Et.string2buf(e):Li.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(a===hc||a===uc)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=ht.deflate(t,a),i===mc)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=ht.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Yt;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};At.prototype.onData=function(e){this.chunks.push(e)};At.prototype.onEnd=function(e){e===Yt&&(this.result=jt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Lr(e,r){let t=new At(r);if(t.push(e,!0),t.err)throw t.msg||ke[t.err];return t.result}function gc(e,r){return r=r||{},r.raw=!0,Lr(e,r)}function Ec(e,r){return r=r||{},r.gzip=!0,Lr(e,r)}var xc=At,bc=Lr,Sc=gc,Ac=Ec,vc=Xe,Cc={Deflate:xc,deflate:bc,deflateRaw:Sc,gzip:Ac,constants:vc},Nt=30,Ic=12,Rc=function(r,t){let n,i,a,o,c,h,s,l,m,_,u,w,K,v,E,H,S,y,R,O,g,T,k,x,b=r.state;n=r.next_in,k=r.input,i=n+(r.avail_in-5),a=r.next_out,x=r.output,o=a-(t-r.avail_out),c=a+(r.avail_out-257),h=b.dmax,s=b.wsize,l=b.whave,m=b.wnext,_=b.window,u=b.hold,w=b.bits,K=b.lencode,v=b.distcode,E=(1<<b.lenbits)-1,H=(1<<b.distbits)-1;e:do{w<15&&(u+=k[n++]<<w,w+=8,u+=k[n++]<<w,w+=8),S=K[u&E];t:for(;;){if(y=S>>>24,u>>>=y,w-=y,y=S>>>16&255,y===0)x[a++]=S&65535;else if(y&16){R=S&65535,y&=15,y&&(w<y&&(u+=k[n++]<<w,w+=8),R+=u&(1<<y)-1,u>>>=y,w-=y),w<15&&(u+=k[n++]<<w,w+=8,u+=k[n++]<<w,w+=8),S=v[u&H];r:for(;;){if(y=S>>>24,u>>>=y,w-=y,y=S>>>16&255,y&16){if(O=S&65535,y&=15,w<y&&(u+=k[n++]<<w,w+=8,w<y&&(u+=k[n++]<<w,w+=8)),O+=u&(1<<y)-1,O>h){r.msg="invalid distance too far back",b.mode=Nt;break e}if(u>>>=y,w-=y,y=a-o,O>y){if(y=O-y,y>l&&b.sane){r.msg="invalid distance too far back",b.mode=Nt;break e}if(g=0,T=_,m===0){if(g+=s-y,y<R){R-=y;do x[a++]=_[g++];while(--y);g=a-O,T=x}}else if(m<y){if(g+=s+m-y,y-=m,y<R){R-=y;do x[a++]=_[g++];while(--y);if(g=0,m<R){y=m,R-=y;do x[a++]=_[g++];while(--y);g=a-O,T=x}}}else if(g+=m-y,y<R){R-=y;do x[a++]=_[g++];while(--y);g=a-O,T=x}for(;R>2;)x[a++]=T[g++],x[a++]=T[g++],x[a++]=T[g++],R-=3;R&&(x[a++]=T[g++],R>1&&(x[a++]=T[g++]))}else{g=a-O;do x[a++]=x[g++],x[a++]=x[g++],x[a++]=x[g++],R-=3;while(R>2);R&&(x[a++]=x[g++],R>1&&(x[a++]=x[g++]))}}else if((y&64)===0){S=v[(S&65535)+(u&(1<<y)-1)];continue r}else{r.msg="invalid distance code",b.mode=Nt;break e}break}}else if((y&64)===0){S=K[(S&65535)+(u&(1<<y)-1)];continue t}else if(y&32){b.mode=Ic;break e}else{r.msg="invalid literal/length code",b.mode=Nt;break e}break}}while(n<i&&a<c);R=w>>3,n-=R,w-=R<<3,u&=(1<<w)-1,r.next_in=n,r.next_out=a,r.avail_in=n<i?5+(i-n):5-(n-i),r.avail_out=a<c?257+(c-a):257-(a-c),b.hold=u,b.bits=w},Ge=15,Zn=852,Gn=592,Vn=0,Ir=1,Yn=2,Hc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),kc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Tc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Kc=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Dc=(e,r,t,n,i,a,o,c)=>{let h=c.bits,s=0,l=0,m=0,_=0,u=0,w=0,K=0,v=0,E=0,H=0,S,y,R,O,g,T=null,k=0,x,b=new Uint16Array(Ge+1),ve=new Uint16Array(Ge+1),It=null,$r=0,Zr,Rt,Ht;for(s=0;s<=Ge;s++)b[s]=0;for(l=0;l<n;l++)b[r[t+l]]++;for(u=h,_=Ge;_>=1&&b[_]===0;_--);if(u>_&&(u=_),_===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,c.bits=1,0;for(m=1;m<_&&b[m]===0;m++);for(u<m&&(u=m),v=1,s=1;s<=Ge;s++)if(v<<=1,v-=b[s],v<0)return-1;if(v>0&&(e===Vn||_!==1))return-1;for(ve[1]=0,s=1;s<Ge;s++)ve[s+1]=ve[s]+b[s];for(l=0;l<n;l++)r[t+l]!==0&&(o[ve[r[t+l]]++]=l);if(e===Vn?(T=It=o,x=19):e===Ir?(T=Hc,k-=257,It=kc,$r-=257,x=256):(T=Tc,It=Kc,x=-1),H=0,l=0,s=m,g=a,w=u,K=0,R=-1,E=1<<u,O=E-1,e===Ir&&E>Zn||e===Yn&&E>Gn)return 1;for(;;){Zr=s-K,o[l]<x?(Rt=0,Ht=o[l]):o[l]>x?(Rt=It[$r+o[l]],Ht=T[k+o[l]]):(Rt=32+64,Ht=0),S=1<<s-K,y=1<<w,m=y;do y-=S,i[g+(H>>K)+y]=Zr<<24|Rt<<16|Ht|0;while(y!==0);for(S=1<<s-1;H&S;)S>>=1;if(S!==0?(H&=S-1,H+=S):H=0,l++,--b[s]===0){if(s===_)break;s=r[t+o[l]]}if(s>u&&(H&O)!==R){for(K===0&&(K=u),g+=m,w=s-K,v=1<<w;w+K<_&&(v-=b[w+K],!(v<=0));)w++,v<<=1;if(E+=1<<w,e===Ir&&E>Zn||e===Yn&&E>Gn)return 1;R=H&O,i[R]=u<<24|w<<16|g-a|0}}return H!==0&&(i[g+H]=s-K<<24|64<<16|0),c.bits=u,0},ut=Dc,Pc=0,zi=1,$i=2,{Z_FINISH:Xn,Z_BLOCK:Uc,Z_TREES:Ft,Z_OK:De,Z_STREAM_END:Bc,Z_NEED_DICT:Oc,Z_STREAM_ERROR:Q,Z_DATA_ERROR:Zi,Z_MEM_ERROR:Gi,Z_BUF_ERROR:Wc,Z_DEFLATED:qn}=Xe,Vi=1,Qn=2,jn=3,ei=4,ti=5,ri=6,ni=7,ii=8,ai=9,oi=10,Xt=11,de=12,Rr=13,si=14,Hr=15,ci=16,li=17,fi=18,di=19,Mt=20,Lt=21,hi=22,ui=23,pi=24,mi=25,_i=26,kr=27,yi=28,wi=29,D=30,Yi=31,Jc=32,Nc=852,Fc=592,Mc=15,Lc=Mc,gi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function zc(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Xi=e=>{if(!e||!e.state)return Q;let r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=Vi,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(Nc),r.distcode=r.distdyn=new Int32Array(Fc),r.sane=1,r.back=-1,De},qi=e=>{if(!e||!e.state)return Q;let r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,Xi(e)},Qi=(e,r)=>{let t;if(!e||!e.state)return Q;let n=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+1,r<48&&(r&=15)),r&&(r<8||r>15)?Q:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,qi(e))},ji=(e,r)=>{if(!e)return Q;let t=new zc;e.state=t,t.window=null;let n=Qi(e,r);return n!==De&&(e.state=null),n},$c=e=>ji(e,Lc),Ei=!0,Tr,Kr,Zc=e=>{if(Ei){Tr=new Int32Array(512),Kr=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(ut(zi,e.lens,0,288,Tr,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;ut($i,e.lens,0,32,Kr,0,e.work,{bits:5}),Ei=!1}e.lencode=Tr,e.lenbits=9,e.distcode=Kr,e.distbits=5},ea=(e,r,t,n)=>{let i,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(r.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(r.subarray(t-n,t-n+i),a.wnext),n-=i,n?(a.window.set(r.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Gc=(e,r)=>{let t,n,i,a,o,c,h,s,l,m,_,u,w,K,v=0,E,H,S,y,R,O,g,T,k=new Uint8Array(4),x,b,ve=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Q;t=e.state,t.mode===de&&(t.mode=Rr),o=e.next_out,i=e.output,h=e.avail_out,a=e.next_in,n=e.input,c=e.avail_in,s=t.hold,l=t.bits,m=c,_=h,T=De;e:for(;;)switch(t.mode){case Vi:if(t.wrap===0){t.mode=Rr;break}for(;l<16;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if(t.wrap&2&&s===35615){t.check=0,k[0]=s&255,k[1]=s>>>8&255,t.check=J(t.check,k,2,0),s=0,l=0,t.mode=Qn;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((s&255)<<8)+(s>>8))%31){e.msg="incorrect header check",t.mode=D;break}if((s&15)!==qn){e.msg="unknown compression method",t.mode=D;break}if(s>>>=4,l-=4,g=(s&15)+8,t.wbits===0)t.wbits=g;else if(g>t.wbits){e.msg="invalid window size",t.mode=D;break}t.dmax=1<<t.wbits,e.adler=t.check=1,t.mode=s&512?oi:de,s=0,l=0;break;case Qn:for(;l<16;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if(t.flags=s,(t.flags&255)!==qn){e.msg="unknown compression method",t.mode=D;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=D;break}t.head&&(t.head.text=s>>8&1),t.flags&512&&(k[0]=s&255,k[1]=s>>>8&255,t.check=J(t.check,k,2,0)),s=0,l=0,t.mode=jn;case jn:for(;l<32;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}t.head&&(t.head.time=s),t.flags&512&&(k[0]=s&255,k[1]=s>>>8&255,k[2]=s>>>16&255,k[3]=s>>>24&255,t.check=J(t.check,k,4,0)),s=0,l=0,t.mode=ei;case ei:for(;l<16;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}t.head&&(t.head.xflags=s&255,t.head.os=s>>8),t.flags&512&&(k[0]=s&255,k[1]=s>>>8&255,t.check=J(t.check,k,2,0)),s=0,l=0,t.mode=ti;case ti:if(t.flags&1024){for(;l<16;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}t.length=s,t.head&&(t.head.extra_len=s),t.flags&512&&(k[0]=s&255,k[1]=s>>>8&255,t.check=J(t.check,k,2,0)),s=0,l=0}else t.head&&(t.head.extra=null);t.mode=ri;case ri:if(t.flags&1024&&(u=t.length,u>c&&(u=c),u&&(t.head&&(g=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+u),g)),t.flags&512&&(t.check=J(t.check,n,u,a)),c-=u,a+=u,t.length-=u),t.length))break e;t.length=0,t.mode=ni;case ni:if(t.flags&2048){if(c===0)break e;u=0;do g=n[a+u++],t.head&&g&&t.length<65536&&(t.head.name+=String.fromCharCode(g));while(g&&u<c);if(t.flags&512&&(t.check=J(t.check,n,u,a)),c-=u,a+=u,g)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ii;case ii:if(t.flags&4096){if(c===0)break e;u=0;do g=n[a+u++],t.head&&g&&t.length<65536&&(t.head.comment+=String.fromCharCode(g));while(g&&u<c);if(t.flags&512&&(t.check=J(t.check,n,u,a)),c-=u,a+=u,g)break e}else t.head&&(t.head.comment=null);t.mode=ai;case ai:if(t.flags&512){for(;l<16;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if(s!==(t.check&65535)){e.msg="header crc mismatch",t.mode=D;break}s=0,l=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=de;break;case oi:for(;l<32;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}e.adler=t.check=gi(s),s=0,l=0,t.mode=Xt;case Xt:if(t.havedict===0)return e.next_out=o,e.avail_out=h,e.next_in=a,e.avail_in=c,t.hold=s,t.bits=l,Oc;e.adler=t.check=1,t.mode=de;case de:if(r===Uc||r===Ft)break e;case Rr:if(t.last){s>>>=l&7,l-=l&7,t.mode=kr;break}for(;l<3;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}switch(t.last=s&1,s>>>=1,l-=1,s&3){case 0:t.mode=si;break;case 1:if(Zc(t),t.mode=Mt,r===Ft){s>>>=2,l-=2;break e}break;case 2:t.mode=li;break;case 3:e.msg="invalid block type",t.mode=D}s>>>=2,l-=2;break;case si:for(s>>>=l&7,l-=l&7;l<32;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if((s&65535)!==(s>>>16^65535)){e.msg="invalid stored block lengths",t.mode=D;break}if(t.length=s&65535,s=0,l=0,t.mode=Hr,r===Ft)break e;case Hr:t.mode=ci;case ci:if(u=t.length,u){if(u>c&&(u=c),u>h&&(u=h),u===0)break e;i.set(n.subarray(a,a+u),o),c-=u,a+=u,h-=u,o+=u,t.length-=u;break}t.mode=de;break;case li:for(;l<14;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if(t.nlen=(s&31)+257,s>>>=5,l-=5,t.ndist=(s&31)+1,s>>>=5,l-=5,t.ncode=(s&15)+4,s>>>=4,l-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=D;break}t.have=0,t.mode=fi;case fi:for(;t.have<t.ncode;){for(;l<3;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}t.lens[ve[t.have++]]=s&7,s>>>=3,l-=3}for(;t.have<19;)t.lens[ve[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,x={bits:t.lenbits},T=ut(Pc,t.lens,0,19,t.lencode,0,t.work,x),t.lenbits=x.bits,T){e.msg="invalid code lengths set",t.mode=D;break}t.have=0,t.mode=di;case di:for(;t.have<t.nlen+t.ndist;){for(;v=t.lencode[s&(1<<t.lenbits)-1],E=v>>>24,H=v>>>16&255,S=v&65535,!(E<=l);){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if(S<16)s>>>=E,l-=E,t.lens[t.have++]=S;else{if(S===16){for(b=E+2;l<b;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if(s>>>=E,l-=E,t.have===0){e.msg="invalid bit length repeat",t.mode=D;break}g=t.lens[t.have-1],u=3+(s&3),s>>>=2,l-=2}else if(S===17){for(b=E+3;l<b;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}s>>>=E,l-=E,g=0,u=3+(s&7),s>>>=3,l-=3}else{for(b=E+7;l<b;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}s>>>=E,l-=E,g=0,u=11+(s&127),s>>>=7,l-=7}if(t.have+u>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=D;break}for(;u--;)t.lens[t.have++]=g}}if(t.mode===D)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=D;break}if(t.lenbits=9,x={bits:t.lenbits},T=ut(zi,t.lens,0,t.nlen,t.lencode,0,t.work,x),t.lenbits=x.bits,T){e.msg="invalid literal/lengths set",t.mode=D;break}if(t.distbits=6,t.distcode=t.distdyn,x={bits:t.distbits},T=ut($i,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,x),t.distbits=x.bits,T){e.msg="invalid distances set",t.mode=D;break}if(t.mode=Mt,r===Ft)break e;case Mt:t.mode=Lt;case Lt:if(c>=6&&h>=258){e.next_out=o,e.avail_out=h,e.next_in=a,e.avail_in=c,t.hold=s,t.bits=l,Rc(e,_),o=e.next_out,i=e.output,h=e.avail_out,a=e.next_in,n=e.input,c=e.avail_in,s=t.hold,l=t.bits,t.mode===de&&(t.back=-1);break}for(t.back=0;v=t.lencode[s&(1<<t.lenbits)-1],E=v>>>24,H=v>>>16&255,S=v&65535,!(E<=l);){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if(H&&(H&240)===0){for(y=E,R=H,O=S;v=t.lencode[O+((s&(1<<y+R)-1)>>y)],E=v>>>24,H=v>>>16&255,S=v&65535,!(y+E<=l);){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}s>>>=y,l-=y,t.back+=y}if(s>>>=E,l-=E,t.back+=E,t.length=S,H===0){t.mode=_i;break}if(H&32){t.back=-1,t.mode=de;break}if(H&64){e.msg="invalid literal/length code",t.mode=D;break}t.extra=H&15,t.mode=hi;case hi:if(t.extra){for(b=t.extra;l<b;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}t.length+=s&(1<<t.extra)-1,s>>>=t.extra,l-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ui;case ui:for(;v=t.distcode[s&(1<<t.distbits)-1],E=v>>>24,H=v>>>16&255,S=v&65535,!(E<=l);){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if((H&240)===0){for(y=E,R=H,O=S;v=t.distcode[O+((s&(1<<y+R)-1)>>y)],E=v>>>24,H=v>>>16&255,S=v&65535,!(y+E<=l);){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}s>>>=y,l-=y,t.back+=y}if(s>>>=E,l-=E,t.back+=E,H&64){e.msg="invalid distance code",t.mode=D;break}t.offset=S,t.extra=H&15,t.mode=pi;case pi:if(t.extra){for(b=t.extra;l<b;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}t.offset+=s&(1<<t.extra)-1,s>>>=t.extra,l-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=D;break}t.mode=mi;case mi:if(h===0)break e;if(u=_-h,t.offset>u){if(u=t.offset-u,u>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=D;break}u>t.wnext?(u-=t.wnext,w=t.wsize-u):w=t.wnext-u,u>t.length&&(u=t.length),K=t.window}else K=i,w=o-t.offset,u=t.length;u>h&&(u=h),h-=u,t.length-=u;do i[o++]=K[w++];while(--u);t.length===0&&(t.mode=Lt);break;case _i:if(h===0)break e;i[o++]=t.length,h--,t.mode=Lt;break;case kr:if(t.wrap){for(;l<32;){if(c===0)break e;c--,s|=n[a++]<<l,l+=8}if(_-=h,e.total_out+=_,t.total+=_,_&&(e.adler=t.check=t.flags?J(t.check,i,_,o-_):wt(t.check,i,_,o-_)),_=h,(t.flags?s:gi(s))!==t.check){e.msg="incorrect data check",t.mode=D;break}s=0,l=0}t.mode=yi;case yi:if(t.wrap&&t.flags){for(;l<32;){if(c===0)break e;c--,s+=n[a++]<<l,l+=8}if(s!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=D;break}s=0,l=0}t.mode=wi;case wi:T=Bc;break e;case D:T=Zi;break e;case Yi:return Gi;case Jc:default:return Q}return e.next_out=o,e.avail_out=h,e.next_in=a,e.avail_in=c,t.hold=s,t.bits=l,(t.wsize||_!==e.avail_out&&t.mode<D&&(t.mode<kr||r!==Xn))&&ea(e,e.output,e.next_out,_-e.avail_out),m-=e.avail_in,_-=e.avail_out,e.total_in+=m,e.total_out+=_,t.total+=_,t.wrap&&_&&(e.adler=t.check=t.flags?J(t.check,i,_,e.next_out-_):wt(t.check,i,_,e.next_out-_)),e.data_type=t.bits+(t.last?64:0)+(t.mode===de?128:0)+(t.mode===Mt||t.mode===Hr?256:0),(m===0&&_===0||r===Xn)&&T===De&&(T=Wc),T},Vc=e=>{if(!e||!e.state)return Q;let r=e.state;return r.window&&(r.window=null),e.state=null,De},Yc=(e,r)=>{if(!e||!e.state)return Q;let t=e.state;return(t.wrap&2)===0?Q:(t.head=r,r.done=!1,De)},Xc=(e,r)=>{let t=r.length,n,i,a;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==Xt)?Q:n.mode===Xt&&(i=1,i=wt(i,r,t,0),i!==n.check)?Zi:(a=ea(e,r,t,t),a?(n.mode=Yi,Gi):(n.havedict=1,De))},qc=qi,Qc=Qi,jc=Xi,el=$c,tl=ji,rl=Gc,nl=Vc,il=Yc,al=Xc,ol="pako inflate (from Nodeca project)",ue={inflateReset:qc,inflateReset2:Qc,inflateResetKeep:jc,inflateInit:el,inflateInit2:tl,inflate:rl,inflateEnd:nl,inflateGetHeader:il,inflateSetDictionary:al,inflateInfo:ol};function sl(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var cl=sl,ta=Object.prototype.toString,{Z_NO_FLUSH:ll,Z_FINISH:fl,Z_OK:xt,Z_STREAM_END:Dr,Z_NEED_DICT:Pr,Z_STREAM_ERROR:dl,Z_DATA_ERROR:xi,Z_MEM_ERROR:hl}=Xe;function vt(e){this.options=jt.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Mi,this.strm.avail_out=0;let t=ue.inflateInit2(this.strm,r.windowBits);if(t!==xt)throw new Error(ke[t]);if(this.header=new cl,ue.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=Et.string2buf(r.dictionary):ta.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=ue.inflateSetDictionary(this.strm,r.dictionary),t!==xt)))throw new Error(ke[t])}vt.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,i=this.options.dictionary,a,o,c;if(this.ended)return!1;for(r===~~r?o=r:o=r===!0?fl:ll,ta.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=ue.inflate(t,o),a===Pr&&i&&(a=ue.inflateSetDictionary(t,i),a===xt?a=ue.inflate(t,o):a===xi&&(a=Pr));t.avail_in>0&&a===Dr&&t.state.wrap>0&&e[t.next_in]!==0;)ue.inflateReset(t),a=ue.inflate(t,o);switch(a){case dl:case xi:case Pr:case hl:return this.onEnd(a),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||a===Dr))if(this.options.to==="string"){let h=Et.utf8border(t.output,t.next_out),s=t.next_out-h,l=Et.buf2string(t.output,h);t.next_out=s,t.avail_out=n-s,s&&t.output.set(t.output.subarray(h,h+s),0),this.onData(l)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===xt&&c===0)){if(a===Dr)return a=ue.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};vt.prototype.onData=function(e){this.chunks.push(e)};vt.prototype.onEnd=function(e){e===xt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=jt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function zr(e,r){let t=new vt(r);if(t.push(e),t.err)throw t.msg||ke[t.err];return t.result}function ul(e,r){return r=r||{},r.raw=!0,zr(e,r)}var pl=vt,ml=zr,_l=ul,yl=zr,wl=Xe,gl={Inflate:pl,inflate:ml,inflateRaw:_l,ungzip:yl,constants:wl},{Deflate:Zm,deflate:Gm,deflateRaw:Vm,gzip:Ym}=Cc,{Inflate:Xm,inflate:qm,inflateRaw:El,ungzip:Qm}=gl;var ra=El;function xl(e){let r=new Uint8Array(e);return crypto.getRandomValues(r),Ct.default.encode(r.buffer)}function er(e){return JSON.parse(Ct.default.decode(e))}function bl(e){return JSON.parse(new TextDecoder().decode(e))}async function r_(e){let r=e.shl.split(/^(?:.+:\/.+#)?shlink:\//)[1];return er(r)?.flags}async function n_(e){let r=e.shl.split(/^(?:.+:\/.+#)?shlink:\//)[1];return!!er(r).flags?.includes("P")}async function i_(e){let r=e.shl.split(/^(?:.+:\/.+#)?shlink:\//)[1],t=er(r),n=await Er("ES256",{extractable:!0}),a=await(await fetch(`${t.oauth.url}/.well-known/smart-configuration`)).json(),c=await(await fetch(`${a.registration_endpoint}`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${t.oauth.token}`},body:JSON.stringify({token_endpoint_auth_method:"private_key_jwt",grant_types:["client_credentials"],jwks:{keys:[await rt(n.publicKey)]},client_name:e.clientName,contacts:e.clientContact?[e.clientContact]:void 0})})).json(),h={tokenEndpoint:a.token_endpoint,clientId:c.client_id,privateJwk:await rt(n.privateKey)};return{state:Ct.default.encode(JSON.stringify(h))}}async function a_(e){let r=er(e.state),t=await Me(r.privateJwk,"ES256"),n=await new at({}).setIssuer(r.clientId).setSubject(r.clientId).setAudience(r.tokenEndpoint).setExpirationTime("3 minutes").setProtectedHeader({alg:"ES256"}).setJti(xl(32)).sign(t),a=await(await fetch(`${r.tokenEndpoint}`,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded","Shlink-Pin":"1234"},body:na.stringify({scope:"__shlinks",grant_type:"client_credentials",client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",client_assertion:n})})).json();return{shcs:(await Promise.all(a.authorization_details.flatMap(s=>s.locations).map(s=>fetch(s,{headers:{authorization:`Bearer ${a.access_token}`}}).then(l=>l.text())))).flatMap(s=>JSON.parse(s).verifiableCredential).map(s=>{let l=Ct.default.toBuffer(s.split(".")[1]),m=bl(ra(l));return s})}}export{i_ as connect,er as decodeBase64urlToJson,bl as decodeToJson,r_ as flags,n_ as needPin,a_ as pull,xl as randomStringWithEntropy};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */
//# sourceMappingURL=index.js.map
